/*! For license information please see main.e508d8d8.js.LICENSE.txt */
(()=>{var e={49:(e,t)=>{"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,y={};function g(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||m}function v(){}function x(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||m}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=g.prototype;var w=x.prototype=new v;w.constructor=x,f(w,g.prototype),w.isPureReactComponent=!0;var _=Array.isArray,b=Object.prototype.hasOwnProperty,j={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function z(e,t,i){var a,s={},r=null,o=null;if(null!=t)for(a in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(r=""+t.key),t)b.call(t,a)&&!k.hasOwnProperty(a)&&(s[a]=t[a]);var l=arguments.length-2;if(1===l)s.children=i;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===s[a]&&(s[a]=l[a]);return{$$typeof:n,type:e,key:r,ref:o,props:s,_owner:j.current}}function N(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var P=/\/+/g;function S(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function E(e,t,a,s,r){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case i:l=!0}}if(l)return r=r(l=e),e=""===s?"."+S(l,0):s,_(r)?(a="",null!=e&&(a=e.replace(P,"$&/")+"/"),E(r,t,a,"",(function(e){return e}))):null!=r&&(N(r)&&(r=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(r,a+(!r.key||l&&l.key===r.key?"":(""+r.key).replace(P,"$&/")+"/")+e)),t.push(r)),1;if(l=0,s=""===s?".":s+":",_(e))for(var c=0;c<e.length;c++){var d=s+S(o=e[c],c);l+=E(o,t,a,d,r)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)l+=E(o=o.value,t,a,d=s+S(o,c++),r);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function M(e,t,n){if(null==e)return e;var i=[],a=0;return E(e,i,"","",(function(e){return t.call(n,e,a++)})),i}function C(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var T={current:null},L={transition:null},O={ReactCurrentDispatcher:T,ReactCurrentBatchConfig:L,ReactCurrentOwner:j};function A(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:M,forEach:function(e,t,n){M(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return M(e,(function(){t++})),t},toArray:function(e){return M(e,(function(e){return e}))||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=a,t.Profiler=r,t.PureComponent=x,t.StrictMode=s,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=A,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=f({},e.props),s=e.key,r=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(r=t.ref,o=j.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)b.call(t,c)&&!k.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=i;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];a.children=l}return{$$typeof:n,type:e.type,key:s,ref:r,props:a,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=z,t.createFactory=function(e){var t=z.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:C}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=L.transition;L.transition={};try{e()}finally{L.transition=t}},t.unstable_act=A,t.useCallback=function(e,t){return T.current.useCallback(e,t)},t.useContext=function(e){return T.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return T.current.useDeferredValue(e)},t.useEffect=function(e,t){return T.current.useEffect(e,t)},t.useId=function(){return T.current.useId()},t.useImperativeHandle=function(e,t,n){return T.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return T.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return T.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return T.current.useMemo(e,t)},t.useReducer=function(e,t,n){return T.current.useReducer(e,t,n)},t.useRef=function(e){return T.current.useRef(e)},t.useState=function(e){return T.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return T.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return T.current.useTransition()},t.version="18.3.1"},119:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(345)},340:(e,t,n)=>{"use strict";e.exports=n(761)},345:(e,t,n)=>{"use strict";var i=n(950),a=n(340);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)r.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function f(e,t,n,i,a,s,r){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=r}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new f(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new f(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new f(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new f(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new f(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new f(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function x(e,t,n,i){var a=y.hasOwnProperty(t)?y[t]:null;(null!==a?0!==a.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,i)&&(n=null),i||null===a?function(e){return!!u.call(m,e)||!u.call(p,e)&&(h.test(e)?m[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,i=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,v);y[t]=new f(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,v);y[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,v);y[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),b=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),P=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),T=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var L=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function A(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var I,R=Object.assign;function D(e){if(void 0===I)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);I=t&&t[1]||""}return"\n"+I+e}var B=!1;function W(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),s=i.stack.split("\n"),r=a.length-1,o=s.length-1;1<=r&&0<=o&&a[r]!==s[o];)o--;for(;1<=r&&0<=o;r--,o--)if(a[r]!==s[o]){if(1!==r||1!==o)do{if(r--,0>--o||a[r]!==s[o]){var l="\n"+a[r].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=r&&0<=o);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?D(e):""}function F(e){switch(e.tag){case 5:return D(e.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 2:case 15:return e=W(e.type,!1);case 11:return e=W(e.type.render,!1);case 1:return e=W(e.type,!0);default:return""}}function Z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case j:return"Fragment";case b:return"Portal";case z:return"Profiler";case k:return"StrictMode";case E:return"Suspense";case M:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case P:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case S:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case C:return null!==(t=e.displayName||null)?t:Z(e.type)||"Memo";case T:t=e._payload,e=e._init;try{return Z(e(t))}catch(n){}}return null}function U(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Z(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function $(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){i=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=V(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var n=t.checked;return R({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=$(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function Q(e,t){Y(e,t);var n=$(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,$(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function X(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&i&&(e[n].defaultSelected=!0)}else{for(n=""+$(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(i&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return R({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:$(n)}}function se(e,t){var n=$(t.value),i=$(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function re(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction((function(){return de(e,t)}))}:de);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function fe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),a=fe(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,a):e[n]=a}}Object.keys(pe).forEach((function(e){me.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ge=R({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function xe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var be=null,je=null,ke=null;function ze(e){if(e=xa(e)){if("function"!==typeof be)throw Error(s(280));var t=e.stateNode;t&&(t=_a(t),be(e.stateNode,e.type,t))}}function Ne(e){je?ke?ke.push(e):ke=[e]:je=e}function Pe(){if(je){var e=je,t=ke;if(ke=je=null,ze(e),t)for(e=0;e<t.length;e++)ze(t[e])}}function Se(e,t){return e(t)}function Ee(){}var Me=!1;function Ce(e,t,n){if(Me)return e(t,n);Me=!0;try{return Se(e,t,n)}finally{Me=!1,(null!==je||null!==ke)&&(Ee(),Pe())}}function Te(e,t){var n=e.stateNode;if(null===n)return null;var i=_a(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Le=!1;if(d)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Le=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(de){Le=!1}function Ae(e,t,n,i,a,s,r,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var Ie=!1,Re=null,De=!1,Be=null,We={onError:function(e){Ie=!0,Re=e}};function Fe(e,t,n,i,a,s,r,o,l){Ie=!1,Re=null,Ae.apply(We,arguments)}function Ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ue(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function $e(e){if(Ze(e)!==e)throw Error(s(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ze(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,i=t;;){var a=n.return;if(null===a)break;var r=a.alternate;if(null===r){if(null!==(i=a.return)){n=i;continue}break}if(a.child===r.child){for(r=a.child;r;){if(r===n)return $e(a),e;if(r===i)return $e(a),t;r=r.sibling}throw Error(s(188))}if(n.return!==i.return)n=a,i=r;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,i=r;break}if(l===i){o=!0,i=a,n=r;break}l=l.sibling}if(!o){for(l=r.child;l;){if(l===n){o=!0,n=r,i=a;break}if(l===i){o=!0,i=r,n=a;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var qe=a.unstable_scheduleCallback,Ge=a.unstable_cancelCallback,Ke=a.unstable_shouldYield,Je=a.unstable_requestPaint,Ye=a.unstable_now,Qe=a.unstable_getCurrentPriorityLevel,Xe=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,it=a.unstable_IdlePriority,at=null,st=null;var rt=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,a=e.suspendedLanes,s=e.pingedLanes,r=268435455&n;if(0!==r){var o=r&~a;0!==o?i=ut(o):0!==(s&=r)&&(i=ut(s))}else 0!==(r=n&~a)?i=ut(r):0!==s&&(i=ut(s));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&a)&&((a=i&-i)>=(s=t&-t)||16===a&&0!==(4194240&s)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)a=1<<(n=31-rt(t)),i|=e[n],t&=~a;return i}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-rt(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-rt(n),a=1<<i;a&t|e[i]&t&&(e[i]|=t),n&=~a}}var xt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,bt,jt,kt,zt,Nt=!1,Pt=[],St=null,Et=null,Mt=null,Ct=new Map,Tt=new Map,Lt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function At(e,t){switch(e){case"focusin":case"focusout":St=null;break;case"dragenter":case"dragleave":Et=null;break;case"mouseover":case"mouseout":Mt=null;break;case"pointerover":case"pointerout":Ct.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tt.delete(t.pointerId)}}function It(e,t,n,i,a,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[a]},null!==t&&(null!==(t=xa(t))&&bt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Rt(e){var t=va(e.target);if(null!==t){var n=Ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ue(n)))return e.blockedOn=t,void zt(e.priority,(function(){jt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Dt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xa(n))&&bt(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);we=i,n.target.dispatchEvent(i),we=null,t.shift()}return!0}function Bt(e,t,n){Dt(e)&&n.delete(t)}function Wt(){Nt=!1,null!==St&&Dt(St)&&(St=null),null!==Et&&Dt(Et)&&(Et=null),null!==Mt&&Dt(Mt)&&(Mt=null),Ct.forEach(Bt),Tt.forEach(Bt)}function Ft(e,t){e.blockedOn===t&&(e.blockedOn=null,Nt||(Nt=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Wt)))}function Zt(e){function t(t){return Ft(t,e)}if(0<Pt.length){Ft(Pt[0],e);for(var n=1;n<Pt.length;n++){var i=Pt[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==St&&Ft(St,e),null!==Et&&Ft(Et,e),null!==Mt&&Ft(Mt,e),Ct.forEach(t),Tt.forEach(t),n=0;n<Lt.length;n++)(i=Lt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<Lt.length&&null===(n=Lt[0]).blockedOn;)Rt(n),null===n.blockedOn&&Lt.shift()}var Ut=w.ReactCurrentBatchConfig,$t=!0;function Vt(e,t,n,i){var a=xt,s=Ut.transition;Ut.transition=null;try{xt=1,qt(e,t,n,i)}finally{xt=a,Ut.transition=s}}function Ht(e,t,n,i){var a=xt,s=Ut.transition;Ut.transition=null;try{xt=4,qt(e,t,n,i)}finally{xt=a,Ut.transition=s}}function qt(e,t,n,i){if($t){var a=Kt(e,t,n,i);if(null===a)$i(e,t,i,Gt,n),At(e,i);else if(function(e,t,n,i,a){switch(t){case"focusin":return St=It(St,e,t,n,i,a),!0;case"dragenter":return Et=It(Et,e,t,n,i,a),!0;case"mouseover":return Mt=It(Mt,e,t,n,i,a),!0;case"pointerover":var s=a.pointerId;return Ct.set(s,It(Ct.get(s)||null,e,t,n,i,a)),!0;case"gotpointercapture":return s=a.pointerId,Tt.set(s,It(Tt.get(s)||null,e,t,n,i,a)),!0}return!1}(a,e,t,n,i))i.stopPropagation();else if(At(e,i),4&t&&-1<Ot.indexOf(e)){for(;null!==a;){var s=xa(a);if(null!==s&&_t(s),null===(s=Kt(e,t,n,i))&&$i(e,t,i,Gt,n),s===a)break;a=s}null!==a&&i.stopPropagation()}else $i(e,t,i,null,n)}}var Gt=null;function Kt(e,t,n,i){if(Gt=null,null!==(e=va(e=_e(i))))if(null===(t=Ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ue(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Xe:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Yt=null,Qt=null,Xt=null;function en(){if(Xt)return Xt;var e,t,n=Qt,i=n.length,a="value"in Yt?Yt.value:Yt.textContent,s=a.length;for(e=0;e<i&&n[e]===a[e];e++);var r=i-e;for(t=1;t<=r&&n[i-t]===a[s-t];t++);return Xt=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function an(){return!1}function sn(e){function t(t,n,i,a,s){for(var r in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(r)&&(t=e[r],this[r]=t?t(a):a[r]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:an,this.isPropagationStopped=an,this}return R(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var rn,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(cn),un=R({},cn,{view:0,detail:0}),hn=sn(un),pn=R({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(rn=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=rn=0,ln=e),rn)},movementY:function(e){return"movementY"in e?e.movementY:on}}),mn=sn(pn),fn=sn(R({},pn,{dataTransfer:0})),yn=sn(R({},un,{relatedTarget:0})),gn=sn(R({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=R({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=sn(vn),wn=sn(R({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=jn[e])&&!!t[e]}function zn(){return kn}var Nn=R({},un,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?bn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Pn=sn(Nn),Sn=sn(R({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),En=sn(R({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zn})),Mn=sn(R({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Cn=R({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Tn=sn(Cn),Ln=[9,13,27,32],On=d&&"CompositionEvent"in window,An=null;d&&"documentMode"in document&&(An=document.documentMode);var In=d&&"TextEvent"in window&&!An,Rn=d&&(!On||An&&8<An&&11>=An),Dn=String.fromCharCode(32),Bn=!1;function Wn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Zn=!1;var Un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $n(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Un[e.type]:"textarea"===t}function Vn(e,t,n,i){Ne(i),0<(t=Hi(t,"onChange")).length&&(n=new dn("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Hn=null,qn=null;function Gn(e){Di(e,0)}function Kn(e){if(q(wa(e)))return e}function Jn(e,t){if("change"===e)return t}var Yn=!1;if(d){var Qn;if(d){var Xn="oninput"in document;if(!Xn){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),Xn="function"===typeof ei.oninput}Qn=Xn}else Qn=!1;Yn=Qn&&(!document.documentMode||9<document.documentMode)}function ti(){Hn&&(Hn.detachEvent("onpropertychange",ni),qn=Hn=null)}function ni(e){if("value"===e.propertyName&&Kn(qn)){var t=[];Vn(t,qn,e,_e(e)),Ce(Gn,t)}}function ii(e,t,n){"focusin"===e?(ti(),qn=n,(Hn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function ai(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kn(qn)}function si(e,t){if("click"===e)return Kn(t)}function ri(e,t){if("input"===e||"change"===e)return Kn(t)}var oi="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function li(e,t){if(oi(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var a=n[i];if(!u.call(t,a)||!oi(e[a],t[a]))return!1}return!0}function ci(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function di(e,t){var n,i=ci(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ci(i)}}function ui(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ui(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hi(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function pi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mi(e){var t=hi(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ui(n.ownerDocument.documentElement,n)){if(null!==i&&pi(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,s=Math.min(i.start,a);i=void 0===i.end?s:Math.min(i.end,a),!e.extend&&s>i&&(a=i,i=s,s=a),a=di(n,s);var r=di(n,i);a&&r&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==r.node||e.focusOffset!==r.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(r.node,r.offset)):(t.setEnd(r.node,r.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fi=d&&"documentMode"in document&&11>=document.documentMode,yi=null,gi=null,vi=null,xi=!1;function wi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xi||null==yi||yi!==G(i)||("selectionStart"in(i=yi)&&pi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},vi&&li(vi,i)||(vi=i,0<(i=Hi(gi,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=yi)))}function _i(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var bi={animationend:_i("Animation","AnimationEnd"),animationiteration:_i("Animation","AnimationIteration"),animationstart:_i("Animation","AnimationStart"),transitionend:_i("Transition","TransitionEnd")},ji={},ki={};function zi(e){if(ji[e])return ji[e];if(!bi[e])return e;var t,n=bi[e];for(t in n)if(n.hasOwnProperty(t)&&t in ki)return ji[e]=n[t];return e}d&&(ki=document.createElement("div").style,"AnimationEvent"in window||(delete bi.animationend.animation,delete bi.animationiteration.animation,delete bi.animationstart.animation),"TransitionEvent"in window||delete bi.transitionend.transition);var Ni=zi("animationend"),Pi=zi("animationiteration"),Si=zi("animationstart"),Ei=zi("transitionend"),Mi=new Map,Ci="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ti(e,t){Mi.set(e,t),l(t,[e])}for(var Li=0;Li<Ci.length;Li++){var Oi=Ci[Li];Ti(Oi.toLowerCase(),"on"+(Oi[0].toUpperCase()+Oi.slice(1)))}Ti(Ni,"onAnimationEnd"),Ti(Pi,"onAnimationIteration"),Ti(Si,"onAnimationStart"),Ti("dblclick","onDoubleClick"),Ti("focusin","onFocus"),Ti("focusout","onBlur"),Ti(Ei,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ai="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ii=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ai));function Ri(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,a,r,o,l,c){if(Fe.apply(this,arguments),Ie){if(!Ie)throw Error(s(198));var d=Re;Ie=!1,Re=null,De||(De=!0,Be=d)}}(i,t,void 0,e),e.currentTarget=null}function Di(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],a=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var r=i.length-1;0<=r;r--){var o=i[r],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&a.isPropagationStopped())break e;Ri(a,o,c),s=l}else for(r=0;r<i.length;r++){if(l=(o=i[r]).instance,c=o.currentTarget,o=o.listener,l!==s&&a.isPropagationStopped())break e;Ri(a,o,c),s=l}}}if(De)throw e=Be,De=!1,Be=null,e}function Bi(e,t){var n=t[fa];void 0===n&&(n=t[fa]=new Set);var i=e+"__bubble";n.has(i)||(Ui(t,e,2,!1),n.add(i))}function Wi(e,t,n){var i=0;t&&(i|=4),Ui(n,e,i,t)}var Fi="_reactListening"+Math.random().toString(36).slice(2);function Zi(e){if(!e[Fi]){e[Fi]=!0,r.forEach((function(t){"selectionchange"!==t&&(Ii.has(t)||Wi(t,!1,e),Wi(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Fi]||(t[Fi]=!0,Wi("selectionchange",!1,t))}}function Ui(e,t,n,i){switch(Jt(t)){case 1:var a=Vt;break;case 4:a=Ht;break;default:a=qt}n=a.bind(null,t,n,e),a=void 0,!Le||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),i?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function $i(e,t,n,i,a){var s=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var r=i.tag;if(3===r||4===r){var o=i.stateNode.containerInfo;if(o===a||8===o.nodeType&&o.parentNode===a)break;if(4===r)for(r=i.return;null!==r;){var l=r.tag;if((3===l||4===l)&&((l=r.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;r=r.return}for(;null!==o;){if(null===(r=va(o)))return;if(5===(l=r.tag)||6===l){i=s=r;continue e}o=o.parentNode}}i=i.return}Ce((function(){var i=s,a=_e(n),r=[];e:{var o=Mi.get(e);if(void 0!==o){var l=dn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Pn;break;case"focusin":c="focus",l=yn;break;case"focusout":c="blur",l=yn;break;case"beforeblur":case"afterblur":l=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=En;break;case Ni:case Pi:case Si:l=gn;break;case Ei:l=Mn;break;case"scroll":l=hn;break;case"wheel":l=Tn;break;case"copy":case"cut":case"paste":l=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Sn}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==o?o+"Capture":null:o;d=[];for(var p,m=i;null!==m;){var f=(p=m).stateNode;if(5===p.tag&&null!==f&&(p=f,null!==h&&(null!=(f=Te(m,h))&&d.push(Vi(m,f,p)))),u)break;m=m.return}0<d.length&&(o=new l(o,c,null,n,a),r.push({event:o,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!va(c)&&!c[ma])&&(l||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?va(c):null)&&(c!==(u=Ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(d=mn,f="onMouseLeave",h="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=Sn,f="onPointerLeave",h="onPointerEnter",m="pointer"),u=null==l?o:wa(l),p=null==c?o:wa(c),(o=new d(f,m+"leave",l,n,a)).target=u,o.relatedTarget=p,f=null,va(a)===i&&((d=new d(h,m+"enter",c,n,a)).target=p,d.relatedTarget=u,f=d),u=f,l&&c)e:{for(h=c,m=0,p=d=l;p;p=qi(p))m++;for(p=0,f=h;f;f=qi(f))p++;for(;0<m-p;)d=qi(d),m--;for(;0<p-m;)h=qi(h),p--;for(;m--;){if(d===h||null!==h&&d===h.alternate)break e;d=qi(d),h=qi(h)}d=null}else d=null;null!==l&&Gi(r,o,l,d,!1),null!==c&&null!==u&&Gi(r,u,c,d,!0)}if("select"===(l=(o=i?wa(i):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var y=Jn;else if($n(o))if(Yn)y=ri;else{y=ai;var g=ii}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(y=si);switch(y&&(y=y(e,i))?Vn(r,y,n,a):(g&&g(e,o,i),"focusout"===e&&(g=o._wrapperState)&&g.controlled&&"number"===o.type&&ee(o,"number",o.value)),g=i?wa(i):window,e){case"focusin":($n(g)||"true"===g.contentEditable)&&(yi=g,gi=i,vi=null);break;case"focusout":vi=gi=yi=null;break;case"mousedown":xi=!0;break;case"contextmenu":case"mouseup":case"dragend":xi=!1,wi(r,n,a);break;case"selectionchange":if(fi)break;case"keydown":case"keyup":wi(r,n,a)}var v;if(On)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Zn?Wn(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Rn&&"ko"!==n.locale&&(Zn||"onCompositionStart"!==x?"onCompositionEnd"===x&&Zn&&(v=en()):(Qt="value"in(Yt=a)?Yt.value:Yt.textContent,Zn=!0)),0<(g=Hi(i,x)).length&&(x=new wn(x,e,null,n,a),r.push({event:x,listeners:g}),v?x.data=v:null!==(v=Fn(n))&&(x.data=v))),(v=In?function(e,t){switch(e){case"compositionend":return Fn(t);case"keypress":return 32!==t.which?null:(Bn=!0,Dn);case"textInput":return(e=t.data)===Dn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Zn)return"compositionend"===e||!On&&Wn(e,t)?(e=en(),Xt=Qt=Yt=null,Zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Rn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=Hi(i,"onBeforeInput")).length&&(a=new wn("onBeforeInput","beforeinput",null,n,a),r.push({event:a,listeners:i}),a.data=v))}Di(r,t)}))}function Vi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hi(e,t){for(var n=t+"Capture",i=[];null!==e;){var a=e,s=a.stateNode;5===a.tag&&null!==s&&(a=s,null!=(s=Te(e,n))&&i.unshift(Vi(e,s,a)),null!=(s=Te(e,t))&&i.push(Vi(e,s,a))),e=e.return}return i}function qi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gi(e,t,n,i,a){for(var s=t._reactName,r=[];null!==n&&n!==i;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===i)break;5===o.tag&&null!==c&&(o=c,a?null!=(l=Te(n,s))&&r.unshift(Vi(n,l,o)):a||null!=(l=Te(n,s))&&r.push(Vi(n,l,o))),n=n.return}0!==r.length&&e.push({event:t,listeners:r})}var Ki=/\r\n?/g,Ji=/\u0000|\uFFFD/g;function Yi(e){return("string"===typeof e?e:""+e).replace(Ki,"\n").replace(Ji,"")}function Qi(e,t,n){if(t=Yi(t),Yi(e)!==t&&n)throw Error(s(425))}function Xi(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ia="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,sa="function"===typeof Promise?Promise:void 0,ra="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sa?function(e){return sa.resolve(null).then(e).catch(oa)}:ia;function oa(e){setTimeout((function(){throw e}))}function la(e,t){var n=t,i=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===i)return e.removeChild(a),void Zt(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=a}while(n);Zt(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function da(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ua=Math.random().toString(36).slice(2),ha="__reactFiber$"+ua,pa="__reactProps$"+ua,ma="__reactContainer$"+ua,fa="__reactEvents$"+ua,ya="__reactListeners$"+ua,ga="__reactHandles$"+ua;function va(e){var t=e[ha];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ma]||n[ha]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=da(e);null!==e;){if(n=e[ha])return n;e=da(e)}return t}n=(e=n).parentNode}return null}function xa(e){return!(e=e[ha]||e[ma])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _a(e){return e[pa]||null}var ba=[],ja=-1;function ka(e){return{current:e}}function za(e){0>ja||(e.current=ba[ja],ba[ja]=null,ja--)}function Na(e,t){ja++,ba[ja]=e.current,e.current=t}var Pa={},Sa=ka(Pa),Ea=ka(!1),Ma=Pa;function Ca(e,t){var n=e.type.contextTypes;if(!n)return Pa;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var a,s={};for(a in n)s[a]=t[a];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ta(e){return null!==(e=e.childContextTypes)&&void 0!==e}function La(){za(Ea),za(Sa)}function Oa(e,t,n){if(Sa.current!==Pa)throw Error(s(168));Na(Sa,t),Na(Ea,n)}function Aa(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var a in i=i.getChildContext())if(!(a in t))throw Error(s(108,U(e)||"Unknown",a));return R({},n,i)}function Ia(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pa,Ma=Sa.current,Na(Sa,e),Na(Ea,Ea.current),!0}function Ra(e,t,n){var i=e.stateNode;if(!i)throw Error(s(169));n?(e=Aa(e,t,Ma),i.__reactInternalMemoizedMergedChildContext=e,za(Ea),za(Sa),Na(Sa,e)):za(Ea),Na(Ea,n)}var Da=null,Ba=!1,Wa=!1;function Fa(e){null===Da?Da=[e]:Da.push(e)}function Za(){if(!Wa&&null!==Da){Wa=!0;var e=0,t=xt;try{var n=Da;for(xt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Da=null,Ba=!1}catch(a){throw null!==Da&&(Da=Da.slice(e+1)),qe(Xe,Za),a}finally{xt=t,Wa=!1}}return null}var Ua=[],$a=0,Va=null,Ha=0,qa=[],Ga=0,Ka=null,Ja=1,Ya="";function Qa(e,t){Ua[$a++]=Ha,Ua[$a++]=Va,Va=e,Ha=t}function Xa(e,t,n){qa[Ga++]=Ja,qa[Ga++]=Ya,qa[Ga++]=Ka,Ka=e;var i=Ja;e=Ya;var a=32-rt(i)-1;i&=~(1<<a),n+=1;var s=32-rt(t)+a;if(30<s){var r=a-a%5;s=(i&(1<<r)-1).toString(32),i>>=r,a-=r,Ja=1<<32-rt(t)+a|n<<a|i,Ya=s+e}else Ja=1<<s|n<<a|i,Ya=e}function es(e){null!==e.return&&(Qa(e,1),Xa(e,1,0))}function ts(e){for(;e===Va;)Va=Ua[--$a],Ua[$a]=null,Ha=Ua[--$a],Ua[$a]=null;for(;e===Ka;)Ka=qa[--Ga],qa[Ga]=null,Ya=qa[--Ga],qa[Ga]=null,Ja=qa[--Ga],qa[Ga]=null}var ns=null,is=null,as=!1,ss=null;function rs(e,t){var n=Cc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,is=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,is=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ka?{id:Ja,overflow:Ya}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Cc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,is=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(as){var t=is;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=ca(n.nextSibling);var i=ns;t&&os(e,t)?rs(i,n):(e.flags=-4097&e.flags|2,as=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,as=!1,ns=e}}}function ds(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function us(e){if(e!==ns)return!1;if(!as)return ds(e),as=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=is)){if(ls(e))throw hs(),Error(s(418));for(;t;)rs(e,t),t=ca(t.nextSibling)}if(ds(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){is=ca(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}is=null}}else is=ns?ca(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=is;e;)e=ca(e.nextSibling)}function ps(){is=ns=null,as=!1}function ms(e){null===ss?ss=[e]:ss.push(e)}var fs=w.ReactCurrentBatchConfig;function ys(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var i=n.stateNode}if(!i)throw Error(s(147,e));var a=i,r=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===r?t.ref:(t=function(e){var t=a.refs;null===e?delete t[r]:t[r]=e},t._stringRef=r,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function gs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vs(e){return(0,e._init)(e._payload)}function xs(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Lc(e,t)).index=0,e.sibling=null,e}function r(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Rc(n,e.mode,i)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,i){var s=n.type;return s===j?u(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===T&&vs(s)===t.type)?((i=a(t,n.props)).ref=ys(e,t,n),i.return=e,i):((i=Oc(n.type,n.key,n.props,null,e.mode,i)).ref=ys(e,t,n),i.return=e,i)}function d(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Dc(n,e.mode,i)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function u(e,t,n,i,s){return null===t||7!==t.tag?((t=Ac(n,e.mode,i,s)).return=e,t):((t=a(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Rc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=ys(e,null,t),n.return=e,n;case b:return(t=Dc(t,e.mode,n)).return=e,t;case T:return h(e,(0,t._init)(t._payload),n)}if(te(t)||A(t))return(t=Ac(t,e.mode,n,null)).return=e,t;gs(e,t)}return null}function p(e,t,n,i){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===a?c(e,t,n,i):null;case b:return n.key===a?d(e,t,n,i):null;case T:return p(e,t,(a=n._init)(n._payload),i)}if(te(n)||A(n))return null!==a?null:u(e,t,n,i,null);gs(e,n)}return null}function m(e,t,n,i,a){if("string"===typeof i&&""!==i||"number"===typeof i)return l(t,e=e.get(n)||null,""+i,a);if("object"===typeof i&&null!==i){switch(i.$$typeof){case _:return c(t,e=e.get(null===i.key?n:i.key)||null,i,a);case b:return d(t,e=e.get(null===i.key?n:i.key)||null,i,a);case T:return m(e,t,n,(0,i._init)(i._payload),a)}if(te(i)||A(i))return u(t,e=e.get(n)||null,i,a,null);gs(t,i)}return null}function f(a,s,o,l){for(var c=null,d=null,u=s,f=s=0,y=null;null!==u&&f<o.length;f++){u.index>f?(y=u,u=null):y=u.sibling;var g=p(a,u,o[f],l);if(null===g){null===u&&(u=y);break}e&&u&&null===g.alternate&&t(a,u),s=r(g,s,f),null===d?c=g:d.sibling=g,d=g,u=y}if(f===o.length)return n(a,u),as&&Qa(a,f),c;if(null===u){for(;f<o.length;f++)null!==(u=h(a,o[f],l))&&(s=r(u,s,f),null===d?c=u:d.sibling=u,d=u);return as&&Qa(a,f),c}for(u=i(a,u);f<o.length;f++)null!==(y=m(u,a,f,o[f],l))&&(e&&null!==y.alternate&&u.delete(null===y.key?f:y.key),s=r(y,s,f),null===d?c=y:d.sibling=y,d=y);return e&&u.forEach((function(e){return t(a,e)})),as&&Qa(a,f),c}function y(a,o,l,c){var d=A(l);if("function"!==typeof d)throw Error(s(150));if(null==(l=d.call(l)))throw Error(s(151));for(var u=d=null,f=o,y=o=0,g=null,v=l.next();null!==f&&!v.done;y++,v=l.next()){f.index>y?(g=f,f=null):g=f.sibling;var x=p(a,f,v.value,c);if(null===x){null===f&&(f=g);break}e&&f&&null===x.alternate&&t(a,f),o=r(x,o,y),null===u?d=x:u.sibling=x,u=x,f=g}if(v.done)return n(a,f),as&&Qa(a,y),d;if(null===f){for(;!v.done;y++,v=l.next())null!==(v=h(a,v.value,c))&&(o=r(v,o,y),null===u?d=v:u.sibling=v,u=v);return as&&Qa(a,y),d}for(f=i(a,f);!v.done;y++,v=l.next())null!==(v=m(f,a,y,v.value,c))&&(e&&null!==v.alternate&&f.delete(null===v.key?y:v.key),o=r(v,o,y),null===u?d=v:u.sibling=v,u=v);return e&&f.forEach((function(e){return t(a,e)})),as&&Qa(a,y),d}return function e(i,s,r,l){if("object"===typeof r&&null!==r&&r.type===j&&null===r.key&&(r=r.props.children),"object"===typeof r&&null!==r){switch(r.$$typeof){case _:e:{for(var c=r.key,d=s;null!==d;){if(d.key===c){if((c=r.type)===j){if(7===d.tag){n(i,d.sibling),(s=a(d,r.props.children)).return=i,i=s;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===T&&vs(c)===d.type){n(i,d.sibling),(s=a(d,r.props)).ref=ys(i,d,r),s.return=i,i=s;break e}n(i,d);break}t(i,d),d=d.sibling}r.type===j?((s=Ac(r.props.children,i.mode,l,r.key)).return=i,i=s):((l=Oc(r.type,r.key,r.props,null,i.mode,l)).ref=ys(i,s,r),l.return=i,i=l)}return o(i);case b:e:{for(d=r.key;null!==s;){if(s.key===d){if(4===s.tag&&s.stateNode.containerInfo===r.containerInfo&&s.stateNode.implementation===r.implementation){n(i,s.sibling),(s=a(s,r.children||[])).return=i,i=s;break e}n(i,s);break}t(i,s),s=s.sibling}(s=Dc(r,i.mode,l)).return=i,i=s}return o(i);case T:return e(i,s,(d=r._init)(r._payload),l)}if(te(r))return f(i,s,r,l);if(A(r))return y(i,s,r,l);gs(i,r)}return"string"===typeof r&&""!==r||"number"===typeof r?(r=""+r,null!==s&&6===s.tag?(n(i,s.sibling),(s=a(s,r)).return=i,i=s):(n(i,s),(s=Rc(r,i.mode,l)).return=i,i=s),o(i)):n(i,s)}}var ws=xs(!0),_s=xs(!1),bs=ka(null),js=null,ks=null,zs=null;function Ns(){zs=ks=js=null}function Ps(e){var t=bs.current;za(bs),e._currentValue=t}function Ss(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Es(e,t){js=e,zs=ks=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xo=!0),e.firstContext=null)}function Ms(e){var t=e._currentValue;if(zs!==e)if(e={context:e,memoizedValue:t,next:null},null===ks){if(null===js)throw Error(s(308));ks=e,js.dependencies={lanes:0,firstContext:e}}else ks=ks.next=e;return t}var Cs=null;function Ts(e){null===Cs?Cs=[e]:Cs.push(e)}function Ls(e,t,n,i){var a=t.interleaved;return null===a?(n.next=n,Ts(t)):(n.next=a.next,a.next=n),t.interleaved=n,Os(e,i)}function Os(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var As=!1;function Is(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ds(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Bs(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Sl)){var a=i.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),i.pending=t,Os(e,n)}return null===(a=i.interleaved)?(t.next=t,Ts(i)):(t.next=a.next,a.next=t),i.interleaved=t,Os(e,n)}function Ws(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Fs(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var a=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var r={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?a=s=r:s=s.next=r,n=n.next}while(null!==n);null===s?a=s=t:s=s.next=t}else a=s=t;return n={baseState:i.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Zs(e,t,n,i){var a=e.updateQueue;As=!1;var s=a.firstBaseUpdate,r=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,c=l.next;l.next=null,null===r?s=c:r.next=c,r=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==r&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==s){var u=a.baseState;for(r=0,d=c=l=null,o=s;;){var h=o.lane,p=o.eventTime;if((i&h)===h){null!==d&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,f=o;switch(h=t,p=n,f.tag){case 1:if("function"===typeof(m=f.payload)){u=m.call(p,u,h);break e}u=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=f.payload)?m.call(p,u,h):m)||void 0===h)break e;u=R({},u,h);break e;case 2:As=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=a.effects)?a.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=p,l=u):d=d.next=p,r|=h;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(h=o).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}if(null===d&&(l=u),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=d,null!==(t=a.shared.interleaved)){a=t;do{r|=a.lane,a=a.next}while(a!==t)}else null===s&&(a.shared.lanes=0);Il|=r,e.lanes=r,e.memoizedState=u}}function Us(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],a=i.callback;if(null!==a){if(i.callback=null,i=n,"function"!==typeof a)throw Error(s(191,a));a.call(i)}}}var $s={},Vs=ka($s),Hs=ka($s),qs=ka($s);function Gs(e){if(e===$s)throw Error(s(174));return e}function Ks(e,t){switch(Na(qs,t),Na(Hs,e),Na(Vs,$s),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}za(Vs),Na(Vs,t)}function Js(){za(Vs),za(Hs),za(qs)}function Ys(e){Gs(qs.current);var t=Gs(Vs.current),n=le(t,e.type);t!==n&&(Na(Hs,e),Na(Vs,n))}function Qs(e){Hs.current===e&&(za(Vs),za(Hs))}var Xs=ka(0);function er(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var tr=[];function nr(){for(var e=0;e<tr.length;e++)tr[e]._workInProgressVersionPrimary=null;tr.length=0}var ir=w.ReactCurrentDispatcher,ar=w.ReactCurrentBatchConfig,sr=0,rr=null,or=null,lr=null,cr=!1,dr=!1,ur=0,hr=0;function pr(){throw Error(s(321))}function mr(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!oi(e[n],t[n]))return!1;return!0}function fr(e,t,n,i,a,r){if(sr=r,rr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ir.current=null===e||null===e.memoizedState?Qr:Xr,e=n(i,a),dr){r=0;do{if(dr=!1,ur=0,25<=r)throw Error(s(301));r+=1,lr=or=null,t.updateQueue=null,ir.current=eo,e=n(i,a)}while(dr)}if(ir.current=Yr,t=null!==or&&null!==or.next,sr=0,lr=or=rr=null,cr=!1,t)throw Error(s(300));return e}function yr(){var e=0!==ur;return ur=0,e}function gr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lr?rr.memoizedState=lr=e:lr=lr.next=e,lr}function vr(){if(null===or){var e=rr.alternate;e=null!==e?e.memoizedState:null}else e=or.next;var t=null===lr?rr.memoizedState:lr.next;if(null!==t)lr=t,or=e;else{if(null===e)throw Error(s(310));e={memoizedState:(or=e).memoizedState,baseState:or.baseState,baseQueue:or.baseQueue,queue:or.queue,next:null},null===lr?rr.memoizedState=lr=e:lr=lr.next=e}return lr}function xr(e,t){return"function"===typeof t?t(e):t}function wr(e){var t=vr(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=or,a=i.baseQueue,r=n.pending;if(null!==r){if(null!==a){var o=a.next;a.next=r.next,r.next=o}i.baseQueue=a=r,n.pending=null}if(null!==a){r=a.next,i=i.baseState;var l=o=null,c=null,d=r;do{var u=d.lane;if((sr&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),i=d.hasEagerState?d.eagerState:e(i,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,o=i):c=c.next=h,rr.lanes|=u,Il|=u}d=d.next}while(null!==d&&d!==r);null===c?o=i:c.next=l,oi(i,t.memoizedState)||(xo=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=c,n.lastRenderedState=i}if(null!==(e=n.interleaved)){a=e;do{r=a.lane,rr.lanes|=r,Il|=r,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _r(e){var t=vr(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=n.dispatch,a=n.pending,r=t.memoizedState;if(null!==a){n.pending=null;var o=a=a.next;do{r=e(r,o.action),o=o.next}while(o!==a);oi(r,t.memoizedState)||(xo=!0),t.memoizedState=r,null===t.baseQueue&&(t.baseState=r),n.lastRenderedState=r}return[r,i]}function br(){}function jr(e,t){var n=rr,i=vr(),a=t(),r=!oi(i.memoizedState,a);if(r&&(i.memoizedState=a,xo=!0),i=i.queue,Ar(Nr.bind(null,n,i,e),[e]),i.getSnapshot!==t||r||null!==lr&&1&lr.memoizedState.tag){if(n.flags|=2048,Mr(9,zr.bind(null,n,i,a,t),void 0,null),null===El)throw Error(s(349));0!==(30&sr)||kr(n,t,a)}return a}function kr(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=rr.updateQueue)?(t={lastEffect:null,stores:null},rr.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function zr(e,t,n,i){t.value=n,t.getSnapshot=i,Pr(t)&&Sr(e)}function Nr(e,t,n){return n((function(){Pr(t)&&Sr(e)}))}function Pr(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!oi(e,n)}catch(i){return!0}}function Sr(e){var t=Os(e,1);null!==t&&nc(t,e,1,-1)}function Er(e){var t=gr();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xr,lastRenderedState:e},t.queue=e,e=e.dispatch=qr.bind(null,rr,e),[t.memoizedState,e]}function Mr(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=rr.updateQueue)?(t={lastEffect:null,stores:null},rr.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Cr(){return vr().memoizedState}function Tr(e,t,n,i){var a=gr();rr.flags|=e,a.memoizedState=Mr(1|t,n,void 0,void 0===i?null:i)}function Lr(e,t,n,i){var a=vr();i=void 0===i?null:i;var s=void 0;if(null!==or){var r=or.memoizedState;if(s=r.destroy,null!==i&&mr(i,r.deps))return void(a.memoizedState=Mr(t,n,s,i))}rr.flags|=e,a.memoizedState=Mr(1|t,n,s,i)}function Or(e,t){return Tr(8390656,8,e,t)}function Ar(e,t){return Lr(2048,8,e,t)}function Ir(e,t){return Lr(4,2,e,t)}function Rr(e,t){return Lr(4,4,e,t)}function Dr(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Br(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Lr(4,4,Dr.bind(null,t,e),n)}function Wr(){}function Fr(e,t){var n=vr();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&mr(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Zr(e,t){var n=vr();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&mr(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Ur(e,t,n){return 0===(21&sr)?(e.baseState&&(e.baseState=!1,xo=!0),e.memoizedState=n):(oi(n,t)||(n=ft(),rr.lanes|=n,Il|=n,e.baseState=!0),t)}function $r(e,t){var n=xt;xt=0!==n&&4>n?n:4,e(!0);var i=ar.transition;ar.transition={};try{e(!1),t()}finally{xt=n,ar.transition=i}}function Vr(){return vr().memoizedState}function Hr(e,t,n){var i=tc(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Gr(e))Kr(t,n);else if(null!==(n=Ls(e,t,n,i))){nc(n,e,i,ec()),Jr(n,t,i)}}function qr(e,t,n){var i=tc(e),a={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gr(e))Kr(t,a);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var r=t.lastRenderedState,o=s(r,n);if(a.hasEagerState=!0,a.eagerState=o,oi(o,r)){var l=t.interleaved;return null===l?(a.next=a,Ts(t)):(a.next=l.next,l.next=a),void(t.interleaved=a)}}catch(c){}null!==(n=Ls(e,t,a,i))&&(nc(n,e,i,a=ec()),Jr(n,t,i))}}function Gr(e){var t=e.alternate;return e===rr||null!==t&&t===rr}function Kr(e,t){dr=cr=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Jr(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Yr={readContext:Ms,useCallback:pr,useContext:pr,useEffect:pr,useImperativeHandle:pr,useInsertionEffect:pr,useLayoutEffect:pr,useMemo:pr,useReducer:pr,useRef:pr,useState:pr,useDebugValue:pr,useDeferredValue:pr,useTransition:pr,useMutableSource:pr,useSyncExternalStore:pr,useId:pr,unstable_isNewReconciler:!1},Qr={readContext:Ms,useCallback:function(e,t){return gr().memoizedState=[e,void 0===t?null:t],e},useContext:Ms,useEffect:Or,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Tr(4194308,4,Dr.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Tr(4194308,4,e,t)},useInsertionEffect:function(e,t){return Tr(4,2,e,t)},useMemo:function(e,t){var n=gr();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=gr();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Hr.bind(null,rr,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},gr().memoizedState=e},useState:Er,useDebugValue:Wr,useDeferredValue:function(e){return gr().memoizedState=e},useTransition:function(){var e=Er(!1),t=e[0];return e=$r.bind(null,e[1]),gr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=rr,a=gr();if(as){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===El)throw Error(s(349));0!==(30&sr)||kr(i,t,n)}a.memoizedState=n;var r={value:n,getSnapshot:t};return a.queue=r,Or(Nr.bind(null,i,r,e),[e]),i.flags|=2048,Mr(9,zr.bind(null,i,r,n,t),void 0,null),n},useId:function(){var e=gr(),t=El.identifierPrefix;if(as){var n=Ya;t=":"+t+"R"+(n=(Ja&~(1<<32-rt(Ja)-1)).toString(32)+n),0<(n=ur++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=hr++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Xr={readContext:Ms,useCallback:Fr,useContext:Ms,useEffect:Ar,useImperativeHandle:Br,useInsertionEffect:Ir,useLayoutEffect:Rr,useMemo:Zr,useReducer:wr,useRef:Cr,useState:function(){return wr(xr)},useDebugValue:Wr,useDeferredValue:function(e){return Ur(vr(),or.memoizedState,e)},useTransition:function(){return[wr(xr)[0],vr().memoizedState]},useMutableSource:br,useSyncExternalStore:jr,useId:Vr,unstable_isNewReconciler:!1},eo={readContext:Ms,useCallback:Fr,useContext:Ms,useEffect:Ar,useImperativeHandle:Br,useInsertionEffect:Ir,useLayoutEffect:Rr,useMemo:Zr,useReducer:_r,useRef:Cr,useState:function(){return _r(xr)},useDebugValue:Wr,useDeferredValue:function(e){var t=vr();return null===or?t.memoizedState=e:Ur(t,or.memoizedState,e)},useTransition:function(){return[_r(xr)[0],vr().memoizedState]},useMutableSource:br,useSyncExternalStore:jr,useId:Vr,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=R({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:R({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var io={isMounted:function(e){return!!(e=e._reactInternals)&&Ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=ec(),a=tc(e),s=Ds(i,a);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Bs(e,s,a))&&(nc(t,e,a,i),Ws(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=ec(),a=tc(e),s=Ds(i,a);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Bs(e,s,a))&&(nc(t,e,a,i),Ws(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),i=tc(e),a=Ds(n,i);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Bs(e,a,i))&&(nc(t,e,i,n),Ws(t,e,i))}};function ao(e,t,n,i,a,s,r){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,s,r):!t.prototype||!t.prototype.isPureReactComponent||(!li(n,i)||!li(a,s))}function so(e,t,n){var i=!1,a=Pa,s=t.contextType;return"object"===typeof s&&null!==s?s=Ms(s):(a=Ta(t)?Ma:Sa.current,s=(i=null!==(i=t.contextTypes)&&void 0!==i)?Ca(e,a):Pa),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=io,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),t}function ro(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&io.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,i){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Is(e);var s=t.contextType;"object"===typeof s&&null!==s?a.context=Ms(s):(s=Ta(t)?Ma:Sa.current,a.context=Ca(e,s)),a.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(no(e,t,s,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&io.enqueueReplaceState(a,a.state,null),Zs(e,n,a,i),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",i=t;do{n+=F(i),i=i.return}while(i);var a=n}catch(s){a="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:a,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ho="function"===typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=Ds(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){$l||($l=!0,Vl=i),uo(0,t)},n}function mo(e,t,n){(n=Ds(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var a=t.value;n.payload=function(){return i(a)},n.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof i&&(null===Hl?Hl=new Set([this]):Hl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function fo(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new ho;var a=new Set;i.set(t,a)}else void 0===(a=i.get(t))&&(a=new Set,i.set(t,a));a.has(n)||(a.add(n),e=zc.bind(null,e,t,n),t.then(e,e))}function yo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function go(e,t,n,i,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ds(-1,1)).tag=2,Bs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var vo=w.ReactCurrentOwner,xo=!1;function wo(e,t,n,i){t.child=null===e?_s(t,null,n,i):ws(t,e.child,n,i)}function _o(e,t,n,i,a){n=n.render;var s=t.ref;return Es(t,a),i=fr(e,t,n,i,s,a),n=yr(),null===e||xo?(as&&n&&es(t),t.flags|=1,wo(e,t,i,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,$o(e,t,a))}function bo(e,t,n,i,a){if(null===e){var s=n.type;return"function"!==typeof s||Tc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,i,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,jo(e,t,s,i,a))}if(s=e.child,0===(e.lanes&a)){var r=s.memoizedProps;if((n=null!==(n=n.compare)?n:li)(r,i)&&e.ref===t.ref)return $o(e,t,a)}return t.flags|=1,(e=Lc(s,i)).ref=t.ref,e.return=t,t.child=e}function jo(e,t,n,i,a){if(null!==e){var s=e.memoizedProps;if(li(s,i)&&e.ref===t.ref){if(xo=!1,t.pendingProps=i=s,0===(e.lanes&a))return t.lanes=e.lanes,$o(e,t,a);0!==(131072&e.flags)&&(xo=!0)}}return No(e,t,n,i,a)}function ko(e,t,n){var i=t.pendingProps,a=i.children,s=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Na(Ll,Tl),Tl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Na(Ll,Tl),Tl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==s?s.baseLanes:n,Na(Ll,Tl),Tl|=i}else null!==s?(i=s.baseLanes|n,t.memoizedState=null):i=n,Na(Ll,Tl),Tl|=i;return wo(e,t,a,n),t.child}function zo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function No(e,t,n,i,a){var s=Ta(n)?Ma:Sa.current;return s=Ca(t,s),Es(t,a),n=fr(e,t,n,i,s,a),i=yr(),null===e||xo?(as&&i&&es(t),t.flags|=1,wo(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,$o(e,t,a))}function Po(e,t,n,i,a){if(Ta(n)){var s=!0;Ia(t)}else s=!1;if(Es(t,a),null===t.stateNode)Uo(e,t),so(t,n,i),oo(t,n,i,a),i=!0;else if(null===e){var r=t.stateNode,o=t.memoizedProps;r.props=o;var l=r.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ms(c):c=Ca(t,c=Ta(n)?Ma:Sa.current);var d=n.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof r.getSnapshotBeforeUpdate;u||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(o!==i||l!==c)&&ro(t,r,i,c),As=!1;var h=t.memoizedState;r.state=h,Zs(t,i,r,a),l=t.memoizedState,o!==i||h!==l||Ea.current||As?("function"===typeof d&&(no(t,n,d,i),l=t.memoizedState),(o=As||ao(t,n,o,i,h,l,c))?(u||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||("function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount()),"function"===typeof r.componentDidMount&&(t.flags|=4194308)):("function"===typeof r.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),r.props=i,r.state=l,r.context=c,i=o):("function"===typeof r.componentDidMount&&(t.flags|=4194308),i=!1)}else{r=t.stateNode,Rs(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),r.props=c,u=t.pendingProps,h=r.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ms(l):l=Ca(t,l=Ta(n)?Ma:Sa.current);var p=n.getDerivedStateFromProps;(d="function"===typeof p||"function"===typeof r.getSnapshotBeforeUpdate)||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(o!==u||h!==l)&&ro(t,r,i,l),As=!1,h=t.memoizedState,r.state=h,Zs(t,i,r,a);var m=t.memoizedState;o!==u||h!==m||Ea.current||As?("function"===typeof p&&(no(t,n,p,i),m=t.memoizedState),(c=As||ao(t,n,c,i,h,m,l)||!1)?(d||"function"!==typeof r.UNSAFE_componentWillUpdate&&"function"!==typeof r.componentWillUpdate||("function"===typeof r.componentWillUpdate&&r.componentWillUpdate(i,m,l),"function"===typeof r.UNSAFE_componentWillUpdate&&r.UNSAFE_componentWillUpdate(i,m,l)),"function"===typeof r.componentDidUpdate&&(t.flags|=4),"function"===typeof r.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof r.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof r.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=m),r.props=i,r.state=m,r.context=l,i=c):("function"!==typeof r.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof r.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return So(e,t,n,i,s,a)}function So(e,t,n,i,a,s){zo(e,t);var r=0!==(128&t.flags);if(!i&&!r)return a&&Ra(t,n,!1),$o(e,t,s);i=t.stateNode,vo.current=t;var o=r&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&r?(t.child=ws(t,e.child,null,s),t.child=ws(t,null,o,s)):wo(e,t,o,s),t.memoizedState=i.state,a&&Ra(t,n,!0),t.child}function Eo(e){var t=e.stateNode;t.pendingContext?Oa(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oa(0,t.context,!1),Ks(e,t.containerInfo)}function Mo(e,t,n,i,a){return ps(),ms(a),t.flags|=256,wo(e,t,n,i),t.child}var Co,To,Lo,Oo,Ao={dehydrated:null,treeContext:null,retryLane:0};function Io(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ro(e,t,n){var i,a=t.pendingProps,r=Xs.current,o=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&r)),i?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(r|=1),Na(Xs,1&r),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=a.children,e=a.fallback,o?(a=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&a)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Ic(l,a,0,null),e=Ac(e,a,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Io(n),t.memoizedState=Ao,e):Do(t,l));if(null!==(r=e.memoizedState)&&null!==(i=r.dehydrated))return function(e,t,n,i,a,r,o){if(n)return 256&t.flags?(t.flags&=-257,Bo(e,t,o,i=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(r=i.fallback,a=t.mode,i=Ic({mode:"visible",children:i.children},a,0,null),(r=Ac(r,a,o,null)).flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,0!==(1&t.mode)&&ws(t,e.child,null,o),t.child.memoizedState=Io(o),t.memoizedState=Ao,r);if(0===(1&t.mode))return Bo(e,t,o,null);if("$!"===a.data){if(i=a.nextSibling&&a.nextSibling.dataset)var l=i.dgst;return i=l,Bo(e,t,o,i=co(r=Error(s(419)),i,void 0))}if(l=0!==(o&e.childLanes),xo||l){if(null!==(i=El)){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(i.suspendedLanes|o))?0:a)&&a!==r.retryLane&&(r.retryLane=a,Os(e,a),nc(i,e,a,-1))}return fc(),Bo(e,t,o,i=co(Error(s(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Pc.bind(null,e),a._reactRetry=t,null):(e=r.treeContext,is=ca(a.nextSibling),ns=t,as=!0,ss=null,null!==e&&(qa[Ga++]=Ja,qa[Ga++]=Ya,qa[Ga++]=Ka,Ja=e.id,Ya=e.overflow,Ka=t),t=Do(t,i.children),t.flags|=4096,t)}(e,t,l,a,i,r,n);if(o){o=a.fallback,l=t.mode,i=(r=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&l)&&t.child!==r?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Lc(r,c)).subtreeFlags=14680064&r.subtreeFlags,null!==i?o=Lc(i,o):(o=Ac(o,l,n,null)).flags|=2,o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,l=null===(l=e.child.memoizedState)?Io(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Ao,a}return e=(o=e.child).sibling,a=Lc(o,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function Do(e,t){return(t=Ic({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bo(e,t,n,i){return null!==i&&ms(i),ws(t,e.child,null,n),(e=Do(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Wo(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),Ss(e.return,t,n)}function Fo(e,t,n,i,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=a)}function Zo(e,t,n){var i=t.pendingProps,a=i.revealOrder,s=i.tail;if(wo(e,t,i.children,n),0!==(2&(i=Xs.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Wo(e,n,t);else if(19===e.tag)Wo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Na(Xs,i),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===er(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Fo(t,!1,a,n,s);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===er(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Fo(t,!0,n,null,s);break;case"together":Fo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Uo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function $o(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Il|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Lc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Lc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Vo(e,t){if(!as)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ho(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,i|=14680064&a.subtreeFlags,i|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags,i|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function qo(e,t,n){var i=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ho(t),null;case 1:case 17:return Ta(t.type)&&La(),Ho(t),null;case 3:return i=t.stateNode,Js(),za(Ea),za(Sa),nr(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(us(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(rc(ss),ss=null))),To(e,t),Ho(t),null;case 5:Qs(t);var a=Gs(qs.current);if(n=t.type,null!==e&&null!=t.stateNode)Lo(e,t,n,i,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(s(166));return Ho(t),null}if(e=Gs(Vs.current),us(t)){i=t.stateNode,n=t.type;var r=t.memoizedProps;switch(i[ha]=t,i[pa]=r,e=0!==(1&t.mode),n){case"dialog":Bi("cancel",i),Bi("close",i);break;case"iframe":case"object":case"embed":Bi("load",i);break;case"video":case"audio":for(a=0;a<Ai.length;a++)Bi(Ai[a],i);break;case"source":Bi("error",i);break;case"img":case"image":case"link":Bi("error",i),Bi("load",i);break;case"details":Bi("toggle",i);break;case"input":J(i,r),Bi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},Bi("invalid",i);break;case"textarea":ae(i,r),Bi("invalid",i)}for(var l in ve(n,r),a=null,r)if(r.hasOwnProperty(l)){var c=r[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==r.suppressHydrationWarning&&Qi(i.textContent,c,e),a=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==r.suppressHydrationWarning&&Qi(i.textContent,c,e),a=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Bi("scroll",i)}switch(n){case"input":H(i),X(i,r,!0);break;case"textarea":H(i),re(i);break;case"select":case"option":break;default:"function"===typeof r.onClick&&(i.onclick=Xi)}i=a,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[ha]=t,e[pa]=i,Co(e,t,!1,!1),t.stateNode=e;e:{switch(l=xe(n,i),n){case"dialog":Bi("cancel",e),Bi("close",e),a=i;break;case"iframe":case"object":case"embed":Bi("load",e),a=i;break;case"video":case"audio":for(a=0;a<Ai.length;a++)Bi(Ai[a],e);a=i;break;case"source":Bi("error",e),a=i;break;case"img":case"image":case"link":Bi("error",e),Bi("load",e),a=i;break;case"details":Bi("toggle",e),a=i;break;case"input":J(e,i),a=K(e,i),Bi("invalid",e);break;case"option":default:a=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},a=R({},i,{value:void 0}),Bi("invalid",e);break;case"textarea":ae(e,i),a=ie(e,i),Bi("invalid",e)}for(r in ve(n,a),c=a)if(c.hasOwnProperty(r)){var d=c[r];"style"===r?ye(e,d):"dangerouslySetInnerHTML"===r?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===r?"string"===typeof d?("textarea"!==n||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==r&&"suppressHydrationWarning"!==r&&"autoFocus"!==r&&(o.hasOwnProperty(r)?null!=d&&"onScroll"===r&&Bi("scroll",e):null!=d&&x(e,r,d,l))}switch(n){case"input":H(e),X(e,i,!1);break;case"textarea":H(e),re(e);break;case"option":null!=i.value&&e.setAttribute("value",""+$(i.value));break;case"select":e.multiple=!!i.multiple,null!=(r=i.value)?ne(e,!!i.multiple,r,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Xi)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ho(t),null;case 6:if(e&&null!=t.stateNode)Oo(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(s(166));if(n=Gs(qs.current),Gs(Vs.current),us(t)){if(i=t.stateNode,n=t.memoizedProps,i[ha]=t,(r=i.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Qi(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qi(i.nodeValue,n,0!==(1&e.mode))}r&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[ha]=t,t.stateNode=i}return Ho(t),null;case 13:if(za(Xs),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(as&&null!==is&&0!==(1&t.mode)&&0===(128&t.flags))hs(),ps(),t.flags|=98560,r=!1;else if(r=us(t),null!==i&&null!==i.dehydrated){if(null===e){if(!r)throw Error(s(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(s(317));r[ha]=t}else ps(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ho(t),r=!1}else null!==ss&&(rc(ss),ss=null),r=!0;if(!r)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Xs.current)?0===Ol&&(Ol=3):fc())),null!==t.updateQueue&&(t.flags|=4),Ho(t),null);case 4:return Js(),To(e,t),null===e&&Zi(t.stateNode.containerInfo),Ho(t),null;case 10:return Ps(t.type._context),Ho(t),null;case 19:if(za(Xs),null===(r=t.memoizedState))return Ho(t),null;if(i=0!==(128&t.flags),null===(l=r.rendering))if(i)Vo(r,!1);else{if(0!==Ol||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=er(e))){for(t.flags|=128,Vo(r,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(r=n).flags&=14680066,null===(l=r.alternate)?(r.childLanes=0,r.lanes=e,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,e=l.dependencies,r.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Na(Xs,1&Xs.current|2),t.child}e=e.sibling}null!==r.tail&&Ye()>Zl&&(t.flags|=128,i=!0,Vo(r,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=er(l))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Vo(r,!0),null===r.tail&&"hidden"===r.tailMode&&!l.alternate&&!as)return Ho(t),null}else 2*Ye()-r.renderingStartTime>Zl&&1073741824!==n&&(t.flags|=128,i=!0,Vo(r,!1),t.lanes=4194304);r.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=r.last)?n.sibling=l:t.child=l,r.last=l)}return null!==r.tail?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Ye(),t.sibling=null,n=Xs.current,Na(Xs,i?1&n|2:1&n),t):(Ho(t),null);case 22:case 23:return uc(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Tl)&&(Ho(t),6&t.subtreeFlags&&(t.flags|=8192)):Ho(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Go(e,t){switch(ts(t),t.tag){case 1:return Ta(t.type)&&La(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Js(),za(Ea),za(Sa),nr(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Qs(t),null;case 13:if(za(Xs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return za(Xs),null;case 4:return Js(),null;case 10:return Ps(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Co=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},To=function(){},Lo=function(e,t,n,i){var a=e.memoizedProps;if(a!==i){e=t.stateNode,Gs(Vs.current);var s,r=null;switch(n){case"input":a=K(e,a),i=K(e,i),r=[];break;case"select":a=R({},a,{value:void 0}),i=R({},i,{value:void 0}),r=[];break;case"textarea":a=ie(e,a),i=ie(e,i),r=[];break;default:"function"!==typeof a.onClick&&"function"===typeof i.onClick&&(e.onclick=Xi)}for(d in ve(n,i),n=null,a)if(!i.hasOwnProperty(d)&&a.hasOwnProperty(d)&&null!=a[d])if("style"===d){var l=a[d];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?r||(r=[]):(r=r||[]).push(d,null));for(d in i){var c=i[d];if(l=null!=a?a[d]:void 0,i.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(r||(r=[]),r.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(r=r||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(r=r||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Bi("scroll",e),r||l===c||(r=[])):(r=r||[]).push(d,c))}n&&(r=r||[]).push("style",n);var d=r;(t.updateQueue=d)&&(t.flags|=4)}},Oo=function(e,t,n,i){n!==i&&(t.flags|=4)};var Ko=!1,Jo=!1,Yo="function"===typeof WeakSet?WeakSet:Set,Qo=null;function Xo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){kc(e,t,i)}else n.current=null}function el(e,t,n){try{n()}catch(i){kc(e,t,i)}}var tl=!1;function nl(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var a=i=i.next;do{if((a.tag&e)===e){var s=a.destroy;a.destroy=void 0,void 0!==s&&el(t,n,s)}a=a.next}while(a!==i)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function al(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ha],delete t[pa],delete t[fa],delete t[ya],delete t[ga])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rl(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||rl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Xi));else if(4!==i&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var dl=null,ul=!1;function hl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(at,n)}catch(o){}switch(n.tag){case 5:Jo||Xo(n,t);case 6:var i=dl,a=ul;dl=null,hl(e,t,n),ul=a,null!==(dl=i)&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?la(e.parentNode,n):1===e.nodeType&&la(e,n),Zt(e)):la(dl,n.stateNode));break;case 4:i=dl,a=ul,dl=n.stateNode.containerInfo,ul=!0,hl(e,t,n),dl=i,ul=a;break;case 0:case 11:case 14:case 15:if(!Jo&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){a=i=i.next;do{var s=a,r=s.destroy;s=s.tag,void 0!==r&&(0!==(2&s)||0!==(4&s))&&el(n,t,r),a=a.next}while(a!==i)}hl(e,t,n);break;case 1:if(!Jo&&(Xo(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(o){kc(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Jo=(i=Jo)||null!==n.memoizedState,hl(e,t,n),Jo=i):hl(e,t,n);break;default:hl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Yo),t.forEach((function(t){var i=Sc.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function fl(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var a=n[i];try{var r=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(s(160));pl(r,o,a),dl=null,ul=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(d){kc(a,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),gl(e),4&i){try{nl(3,e,e.return),il(3,e)}catch(y){kc(e,e.return,y)}try{nl(5,e,e.return)}catch(y){kc(e,e.return,y)}}break;case 1:fl(t,e),gl(e),512&i&&null!==n&&Xo(n,n.return);break;case 5:if(fl(t,e),gl(e),512&i&&null!==n&&Xo(n,n.return),32&e.flags){var a=e.stateNode;try{he(a,"")}catch(y){kc(e,e.return,y)}}if(4&i&&null!=(a=e.stateNode)){var r=e.memoizedProps,o=null!==n?n.memoizedProps:r,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===r.type&&null!=r.name&&Y(a,r),xe(l,o);var d=xe(l,r);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];"style"===u?ye(a,h):"dangerouslySetInnerHTML"===u?ue(a,h):"children"===u?he(a,h):x(a,u,h,d)}switch(l){case"input":Q(a,r);break;case"textarea":se(a,r);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!r.multiple;var m=r.value;null!=m?ne(a,!!r.multiple,m,!1):p!==!!r.multiple&&(null!=r.defaultValue?ne(a,!!r.multiple,r.defaultValue,!0):ne(a,!!r.multiple,r.multiple?[]:"",!1))}a[pa]=r}catch(y){kc(e,e.return,y)}}break;case 6:if(fl(t,e),gl(e),4&i){if(null===e.stateNode)throw Error(s(162));a=e.stateNode,r=e.memoizedProps;try{a.nodeValue=r}catch(y){kc(e,e.return,y)}}break;case 3:if(fl(t,e),gl(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Zt(t.containerInfo)}catch(y){kc(e,e.return,y)}break;case 4:default:fl(t,e),gl(e);break;case 13:fl(t,e),gl(e),8192&(a=e.child).flags&&(r=null!==a.memoizedState,a.stateNode.isHidden=r,!r||null!==a.alternate&&null!==a.alternate.memoizedState||(Fl=Ye())),4&i&&ml(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Jo=(d=Jo)||u,fl(t,e),Jo=d):fl(t,e),gl(e),8192&i){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Qo=e,u=e.child;null!==u;){for(h=Qo=u;null!==Qo;){switch(m=(p=Qo).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Xo(p,p.return);var f=p.stateNode;if("function"===typeof f.componentWillUnmount){i=p,n=p.return;try{t=i,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(y){kc(i,n,y)}}break;case 5:Xo(p,p.return);break;case 22:if(null!==p.memoizedState){_l(h);continue}}null!==m?(m.return=p,Qo=m):_l(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{a=h.stateNode,d?"function"===typeof(r=a.style).setProperty?r.setProperty("display","none","important"):r.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",o))}catch(y){kc(e,e.return,y)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(y){kc(e,e.return,y)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fl(t,e),gl(e),4&i&&ml(e);case 21:}}function gl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(rl(n)){var i=n;break e}n=n.return}throw Error(s(160))}switch(i.tag){case 5:var a=i.stateNode;32&i.flags&&(he(a,""),i.flags&=-33),cl(e,ol(e),a);break;case 3:case 4:var r=i.stateNode.containerInfo;ll(e,ol(e),r);break;default:throw Error(s(161))}}catch(o){kc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Qo=e,xl(e,t,n)}function xl(e,t,n){for(var i=0!==(1&e.mode);null!==Qo;){var a=Qo,s=a.child;if(22===a.tag&&i){var r=null!==a.memoizedState||Ko;if(!r){var o=a.alternate,l=null!==o&&null!==o.memoizedState||Jo;o=Ko;var c=Jo;if(Ko=r,(Jo=l)&&!c)for(Qo=a;null!==Qo;)l=(r=Qo).child,22===r.tag&&null!==r.memoizedState?bl(a):null!==l?(l.return=r,Qo=l):bl(a);for(;null!==s;)Qo=s,xl(s,t,n),s=s.sibling;Qo=a,Ko=o,Jo=c}wl(e)}else 0!==(8772&a.subtreeFlags)&&null!==s?(s.return=a,Qo=s):wl(e)}}function wl(e){for(;null!==Qo;){var t=Qo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Jo||il(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!Jo)if(null===n)i.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);i.componentDidUpdate(a,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=t.updateQueue;null!==r&&Us(t,r,i);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Us(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Zt(h)}}}break;default:throw Error(s(163))}Jo||512&t.flags&&al(t)}catch(p){kc(t,t.return,p)}}if(t===e){Qo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qo=n;break}Qo=t.return}}function _l(e){for(;null!==Qo;){var t=Qo;if(t===e){Qo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qo=n;break}Qo=t.return}}function bl(e){for(;null!==Qo;){var t=Qo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){kc(t,n,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var a=t.return;try{i.componentDidMount()}catch(l){kc(t,a,l)}}var s=t.return;try{al(t)}catch(l){kc(t,s,l)}break;case 5:var r=t.return;try{al(t)}catch(l){kc(t,r,l)}}}catch(l){kc(t,t.return,l)}if(t===e){Qo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Qo=o;break}Qo=t.return}}var jl,kl=Math.ceil,zl=w.ReactCurrentDispatcher,Nl=w.ReactCurrentOwner,Pl=w.ReactCurrentBatchConfig,Sl=0,El=null,Ml=null,Cl=0,Tl=0,Ll=ka(0),Ol=0,Al=null,Il=0,Rl=0,Dl=0,Bl=null,Wl=null,Fl=0,Zl=1/0,Ul=null,$l=!1,Vl=null,Hl=null,ql=!1,Gl=null,Kl=0,Jl=0,Yl=null,Ql=-1,Xl=0;function ec(){return 0!==(6&Sl)?Ye():-1!==Ql?Ql:Ql=Ye()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Sl)&&0!==Cl?Cl&-Cl:null!==fs.transition?(0===Xl&&(Xl=ft()),Xl):0!==(e=xt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function nc(e,t,n,i){if(50<Jl)throw Jl=0,Yl=null,Error(s(185));gt(e,n,i),0!==(2&Sl)&&e===El||(e===El&&(0===(2&Sl)&&(Rl|=n),4===Ol&&oc(e,Cl)),ic(e,i),1===n&&0===Sl&&0===(1&t.mode)&&(Zl=Ye()+500,Ba&&Za()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var r=31-rt(s),o=1<<r,l=a[r];-1===l?0!==(o&n)&&0===(o&i)||(a[r]=pt(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var i=ht(e,e===El?Cl:0);if(0===i)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Ba=!0,Fa(e)}(lc.bind(null,e)):Fa(lc.bind(null,e)),ra((function(){0===(6&Sl)&&Za()})),n=null;else{switch(wt(i)){case 1:n=Xe;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Ec(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Ql=-1,Xl=0,0!==(6&Sl))throw Error(s(327));var n=e.callbackNode;if(bc()&&e.callbackNode!==n)return null;var i=ht(e,e===El?Cl:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=yc(e,i);else{t=i;var a=Sl;Sl|=2;var r=mc();for(El===e&&Cl===t||(Ul=null,Zl=Ye()+500,hc(e,t));;)try{vc();break}catch(l){pc(e,l)}Ns(),zl.current=r,Sl=a,null!==Ml?t=0:(El=null,Cl=0,t=Ol)}if(0!==t){if(2===t&&(0!==(a=mt(e))&&(i=a,t=sc(e,a))),1===t)throw n=Al,hc(e,0),oc(e,i),ic(e,Ye()),n;if(6===t)oc(e,i);else{if(a=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var a=n[i],s=a.getSnapshot;a=a.value;try{if(!oi(s(),a))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=yc(e,i))&&(0!==(r=mt(e))&&(i=r,t=sc(e,r))),1===t))throw n=Al,hc(e,0),oc(e,i),ic(e,Ye()),n;switch(e.finishedWork=a,e.finishedLanes=i,t){case 0:case 1:throw Error(s(345));case 2:case 5:_c(e,Wl,Ul);break;case 3:if(oc(e,i),(130023424&i)===i&&10<(t=Fl+500-Ye())){if(0!==ht(e,0))break;if(((a=e.suspendedLanes)&i)!==i){ec(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ia(_c.bind(null,e,Wl,Ul),t);break}_c(e,Wl,Ul);break;case 4:if(oc(e,i),(4194240&i)===i)break;for(t=e.eventTimes,a=-1;0<i;){var o=31-rt(i);r=1<<o,(o=t[o])>a&&(a=o),i&=~r}if(i=a,10<(i=(120>(i=Ye()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*kl(i/1960))-i)){e.timeoutHandle=ia(_c.bind(null,e,Wl,Ul),i);break}_c(e,Wl,Ul);break;default:throw Error(s(329))}}}return ic(e,Ye()),e.callbackNode===n?ac.bind(null,e):null}function sc(e,t){var n=Bl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Wl,Wl=n,null!==t&&rc(t)),e}function rc(e){null===Wl?Wl=e:Wl.push.apply(Wl,e)}function oc(e,t){for(t&=~Dl,t&=~Rl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-rt(t),i=1<<n;e[n]=-1,t&=~i}}function lc(e){if(0!==(6&Sl))throw Error(s(327));bc();var t=ht(e,0);if(0===(1&t))return ic(e,Ye()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var i=mt(e);0!==i&&(t=i,n=sc(e,i))}if(1===n)throw n=Al,hc(e,0),oc(e,t),ic(e,Ye()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,Wl,Ul),ic(e,Ye()),null}function cc(e,t){var n=Sl;Sl|=1;try{return e(t)}finally{0===(Sl=n)&&(Zl=Ye()+500,Ba&&Za())}}function dc(e){null!==Gl&&0===Gl.tag&&0===(6&Sl)&&bc();var t=Sl;Sl|=1;var n=Pl.transition,i=xt;try{if(Pl.transition=null,xt=1,e)return e()}finally{xt=i,Pl.transition=n,0===(6&(Sl=t))&&Za()}}function uc(){Tl=Ll.current,za(Ll)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==Ml)for(n=Ml.return;null!==n;){var i=n;switch(ts(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&La();break;case 3:Js(),za(Ea),za(Sa),nr();break;case 5:Qs(i);break;case 4:Js();break;case 13:case 19:za(Xs);break;case 10:Ps(i.type._context);break;case 22:case 23:uc()}n=n.return}if(El=e,Ml=e=Lc(e.current,null),Cl=Tl=t,Ol=0,Al=null,Dl=Rl=Il=0,Wl=Bl=null,null!==Cs){for(t=0;t<Cs.length;t++)if(null!==(i=(n=Cs[t]).interleaved)){n.interleaved=null;var a=i.next,s=n.pending;if(null!==s){var r=s.next;s.next=a,i.next=r}n.pending=i}Cs=null}return e}function pc(e,t){for(;;){var n=Ml;try{if(Ns(),ir.current=Yr,cr){for(var i=rr.memoizedState;null!==i;){var a=i.queue;null!==a&&(a.pending=null),i=i.next}cr=!1}if(sr=0,lr=or=rr=null,dr=!1,ur=0,Nl.current=null,null===n||null===n.return){Ol=1,Al=t,Ml=null;break}e:{var r=e,o=n.return,l=n,c=t;if(t=Cl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=yo(o);if(null!==m){m.flags&=-257,go(m,o,l,0,t),1&m.mode&&fo(r,d,t),c=d;var f=(t=m).updateQueue;if(null===f){var y=new Set;y.add(c),t.updateQueue=y}else f.add(c);break e}if(0===(1&t)){fo(r,d,t),fc();break e}c=Error(s(426))}else if(as&&1&l.mode){var g=yo(o);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),go(g,o,l,0,t),ms(lo(c,l));break e}}r=c=lo(c,l),4!==Ol&&(Ol=2),null===Bl?Bl=[r]:Bl.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,t&=-t,r.lanes|=t,Fs(r,po(0,c,t));break e;case 1:l=c;var v=r.type,x=r.stateNode;if(0===(128&r.flags)&&("function"===typeof v.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Hl||!Hl.has(x)))){r.flags|=65536,t&=-t,r.lanes|=t,Fs(r,mo(r,l,t));break e}}r=r.return}while(null!==r)}wc(n)}catch(w){t=w,Ml===n&&null!==n&&(Ml=n=n.return);continue}break}}function mc(){var e=zl.current;return zl.current=Yr,null===e?Yr:e}function fc(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===El||0===(268435455&Il)&&0===(268435455&Rl)||oc(El,Cl)}function yc(e,t){var n=Sl;Sl|=2;var i=mc();for(El===e&&Cl===t||(Ul=null,hc(e,t));;)try{gc();break}catch(a){pc(e,a)}if(Ns(),Sl=n,zl.current=i,null!==Ml)throw Error(s(261));return El=null,Cl=0,Ol}function gc(){for(;null!==Ml;)xc(Ml)}function vc(){for(;null!==Ml&&!Ke();)xc(Ml)}function xc(e){var t=jl(e.alternate,e,Tl);e.memoizedProps=e.pendingProps,null===t?wc(e):Ml=t,Nl.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=qo(n,t,Tl)))return void(Ml=n)}else{if(null!==(n=Go(n,t)))return n.flags&=32767,void(Ml=n);if(null===e)return Ol=6,void(Ml=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ml=t);Ml=t=e}while(null!==t);0===Ol&&(Ol=5)}function _c(e,t,n){var i=xt,a=Pl.transition;try{Pl.transition=null,xt=1,function(e,t,n,i){do{bc()}while(null!==Gl);if(0!==(6&Sl))throw Error(s(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var r=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-rt(n),s=1<<a;t[a]=0,i[a]=-1,e[a]=-1,n&=~s}}(e,r),e===El&&(Ml=El=null,Cl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||ql||(ql=!0,Ec(tt,(function(){return bc(),null}))),r=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||r){r=Pl.transition,Pl.transition=null;var o=xt;xt=1;var l=Sl;Sl|=4,Nl.current=null,function(e,t){if(ea=$t,pi(e=hi())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var a=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch(_){n=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,p=null;t:for(;;){for(var m;h!==n||0!==a&&3!==h.nodeType||(l=o+a),h!==r||0!==i&&3!==h.nodeType||(c=o+i),3===h.nodeType&&(o+=h.nodeValue.length),null!==(m=h.firstChild);)p=h,h=m;for(;;){if(h===e)break t;if(p===n&&++d===a&&(l=o),p===r&&++u===i&&(c=o),null!==(m=h.nextSibling))break;p=(h=p).parentNode}h=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},$t=!1,Qo=t;null!==Qo;)if(e=(t=Qo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qo=e;else for(;null!==Qo;){t=Qo;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var y=f.memoizedProps,g=f.memoizedState,v=t.stateNode,x=v.getSnapshotBeforeUpdate(t.elementType===t.type?y:to(t.type,y),g);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(_){kc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Qo=e;break}Qo=t.return}f=tl,tl=!1}(e,n),yl(n,e),mi(ta),$t=!!ea,ta=ea=null,e.current=n,vl(n,e,a),Je(),Sl=l,xt=o,Pl.transition=r}else e.current=n;if(ql&&(ql=!1,Gl=e,Kl=a),r=e.pendingLanes,0===r&&(Hl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Ye()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],i(a.value,{componentStack:a.stack,digest:a.digest});if($l)throw $l=!1,e=Vl,Vl=null,e;0!==(1&Kl)&&0!==e.tag&&bc(),r=e.pendingLanes,0!==(1&r)?e===Yl?Jl++:(Jl=0,Yl=e):Jl=0,Za()}(e,t,n,i)}finally{Pl.transition=a,xt=i}return null}function bc(){if(null!==Gl){var e=wt(Kl),t=Pl.transition,n=xt;try{if(Pl.transition=null,xt=16>e?16:e,null===Gl)var i=!1;else{if(e=Gl,Gl=null,Kl=0,0!==(6&Sl))throw Error(s(331));var a=Sl;for(Sl|=4,Qo=e.current;null!==Qo;){var r=Qo,o=r.child;if(0!==(16&Qo.flags)){var l=r.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Qo=d;null!==Qo;){var u=Qo;switch(u.tag){case 0:case 11:case 15:nl(8,u,r)}var h=u.child;if(null!==h)h.return=u,Qo=h;else for(;null!==Qo;){var p=(u=Qo).sibling,m=u.return;if(sl(u),u===d){Qo=null;break}if(null!==p){p.return=m,Qo=p;break}Qo=m}}}var f=r.alternate;if(null!==f){var y=f.child;if(null!==y){f.child=null;do{var g=y.sibling;y.sibling=null,y=g}while(null!==y)}}Qo=r}}if(0!==(2064&r.subtreeFlags)&&null!==o)o.return=r,Qo=o;else e:for(;null!==Qo;){if(0!==(2048&(r=Qo).flags))switch(r.tag){case 0:case 11:case 15:nl(9,r,r.return)}var v=r.sibling;if(null!==v){v.return=r.return,Qo=v;break e}Qo=r.return}}var x=e.current;for(Qo=x;null!==Qo;){var w=(o=Qo).child;if(0!==(2064&o.subtreeFlags)&&null!==w)w.return=o,Qo=w;else e:for(o=x;null!==Qo;){if(0!==(2048&(l=Qo).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(b){kc(l,l.return,b)}if(l===o){Qo=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Qo=_;break e}Qo=l.return}}if(Sl=a,Za(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(at,e)}catch(b){}i=!0}return i}finally{xt=n,Pl.transition=t}}return!1}function jc(e,t,n){e=Bs(e,t=po(0,t=lo(n,t),1),1),t=ec(),null!==e&&(gt(e,1,t),ic(e,t))}function kc(e,t,n){if(3===e.tag)jc(e,e,n);else for(;null!==t;){if(3===t.tag){jc(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Hl||!Hl.has(i))){t=Bs(t,e=mo(t,e=lo(n,e),1),1),e=ec(),null!==t&&(gt(t,1,e),ic(t,e));break}}t=t.return}}function zc(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,El===e&&(Cl&n)===n&&(4===Ol||3===Ol&&(130023424&Cl)===Cl&&500>Ye()-Fl?hc(e,0):Dl|=n),ic(e,t)}function Nc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=ec();null!==(e=Os(e,t))&&(gt(e,t,n),ic(e,n))}function Pc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Nc(e,n)}function Sc(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(s(314))}null!==i&&i.delete(t),Nc(e,n)}function Ec(e,t){return qe(e,t)}function Mc(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cc(e,t,n,i){return new Mc(e,t,n,i)}function Tc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lc(e,t){var n=e.alternate;return null===n?((n=Cc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,i,a,r){var o=2;if(i=e,"function"===typeof e)Tc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case j:return Ac(n.children,a,r,t);case k:o=8,a|=8;break;case z:return(e=Cc(12,n,t,2|a)).elementType=z,e.lanes=r,e;case E:return(e=Cc(13,n,t,a)).elementType=E,e.lanes=r,e;case M:return(e=Cc(19,n,t,a)).elementType=M,e.lanes=r,e;case L:return Ic(n,a,r,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case N:o=10;break e;case P:o=9;break e;case S:o=11;break e;case C:o=14;break e;case T:o=16,i=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Cc(o,n,t,a)).elementType=e,t.type=i,t.lanes=r,t}function Ac(e,t,n,i){return(e=Cc(7,e,i,t)).lanes=n,e}function Ic(e,t,n,i){return(e=Cc(22,e,i,t)).elementType=L,e.lanes=n,e.stateNode={isHidden:!1},e}function Rc(e,t,n){return(e=Cc(6,e,null,t)).lanes=n,e}function Dc(e,t,n){return(t=Cc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,n,i,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=i,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Wc(e,t,n,i,a,s,r,o,l){return e=new Bc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Cc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Is(s),e}function Fc(e){if(!e)return Pa;e:{if(Ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ta(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Ta(n))return Aa(e,n,t)}return t}function Zc(e,t,n,i,a,s,r,o,l){return(e=Wc(n,i,!0,e,0,s,0,o,l)).context=Fc(null),n=e.current,(s=Ds(i=ec(),a=tc(n))).callback=void 0!==t&&null!==t?t:null,Bs(n,s,a),e.current.lanes=a,gt(e,a,i),ic(e,i),e}function Uc(e,t,n,i){var a=t.current,s=ec(),r=tc(a);return n=Fc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ds(s,r)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=Bs(a,t,r))&&(nc(e,a,r,s),Ws(e,a,r)),r}function $c(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}jl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ea.current)xo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xo=!1,function(e,t,n){switch(t.tag){case 3:Eo(t),ps();break;case 5:Ys(t);break;case 1:Ta(t.type)&&Ia(t);break;case 4:Ks(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,a=t.memoizedProps.value;Na(bs,i._currentValue),i._currentValue=a;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(Na(Xs,1&Xs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ro(e,t,n):(Na(Xs,1&Xs.current),null!==(e=$o(e,t,n))?e.sibling:null);Na(Xs,1&Xs.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return Zo(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Na(Xs,Xs.current),i)break;return null;case 22:case 23:return t.lanes=0,ko(e,t,n)}return $o(e,t,n)}(e,t,n);xo=0!==(131072&e.flags)}else xo=!1,as&&0!==(1048576&t.flags)&&Xa(t,Ha,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Uo(e,t),e=t.pendingProps;var a=Ca(t,Sa.current);Es(t,n),a=fr(null,t,i,e,a,n);var r=yr();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ta(i)?(r=!0,Ia(t)):r=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Is(t),a.updater=io,t.stateNode=a,a._reactInternals=t,oo(t,i,e,n),t=So(null,t,i,!0,r,n)):(t.tag=0,as&&r&&es(t),wo(null,t,a,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Uo(e,t),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Tc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===S)return 11;if(e===C)return 14}return 2}(i),e=to(i,e),a){case 0:t=No(null,t,i,e,n);break e;case 1:t=Po(null,t,i,e,n);break e;case 11:t=_o(null,t,i,e,n);break e;case 14:t=bo(null,t,i,to(i.type,e),n);break e}throw Error(s(306,i,""))}return t;case 0:return i=t.type,a=t.pendingProps,No(e,t,i,a=t.elementType===i?a:to(i,a),n);case 1:return i=t.type,a=t.pendingProps,Po(e,t,i,a=t.elementType===i?a:to(i,a),n);case 3:e:{if(Eo(t),null===e)throw Error(s(387));i=t.pendingProps,a=(r=t.memoizedState).element,Rs(e,t),Zs(t,i,null,n);var o=t.memoizedState;if(i=o.element,r.isDehydrated){if(r={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=r,t.memoizedState=r,256&t.flags){t=Mo(e,t,i,n,a=lo(Error(s(423)),t));break e}if(i!==a){t=Mo(e,t,i,n,a=lo(Error(s(424)),t));break e}for(is=ca(t.stateNode.containerInfo.firstChild),ns=t,as=!0,ss=null,n=_s(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),i===a){t=$o(e,t,n);break e}wo(e,t,i,n)}t=t.child}return t;case 5:return Ys(t),null===e&&cs(t),i=t.type,a=t.pendingProps,r=null!==e?e.memoizedProps:null,o=a.children,na(i,a)?o=null:null!==r&&na(i,r)&&(t.flags|=32),zo(e,t),wo(e,t,o,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Ro(e,t,n);case 4:return Ks(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=ws(t,null,i,n):wo(e,t,i,n),t.child;case 11:return i=t.type,a=t.pendingProps,_o(e,t,i,a=t.elementType===i?a:to(i,a),n);case 7:return wo(e,t,t.pendingProps,n),t.child;case 8:case 12:return wo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,a=t.pendingProps,r=t.memoizedProps,o=a.value,Na(bs,i._currentValue),i._currentValue=o,null!==r)if(oi(r.value,o)){if(r.children===a.children&&!Ea.current){t=$o(e,t,n);break e}}else for(null!==(r=t.child)&&(r.return=t);null!==r;){var l=r.dependencies;if(null!==l){o=r.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===r.tag){(c=Ds(-1,n&-n)).tag=2;var d=r.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}r.lanes|=n,null!==(c=r.alternate)&&(c.lanes|=n),Ss(r.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===r.tag)o=r.type===t.type?null:r.child;else if(18===r.tag){if(null===(o=r.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ss(o,n,t),o=r.sibling}else o=r.child;if(null!==o)o.return=r;else for(o=r;null!==o;){if(o===t){o=null;break}if(null!==(r=o.sibling)){r.return=o.return,o=r;break}o=o.return}r=o}wo(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,i=t.pendingProps.children,Es(t,n),i=i(a=Ms(a)),t.flags|=1,wo(e,t,i,n),t.child;case 14:return a=to(i=t.type,t.pendingProps),bo(e,t,i,a=to(i.type,a),n);case 15:return jo(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:to(i,a),Uo(e,t),t.tag=1,Ta(i)?(e=!0,Ia(t)):e=!1,Es(t,n),so(t,i,a),oo(t,i,a,n),So(null,t,i,!0,e,n);case 19:return Zo(e,t,n);case 22:return ko(e,t,n)}throw Error(s(156,t.tag))};var qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Gc(e){this._internalRoot=e}function Kc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function Xc(e,t,n,i,a){var s=n._reactRootContainer;if(s){var r=s;if("function"===typeof a){var o=a;a=function(){var e=$c(r);o.call(e)}}Uc(t,r,e,a)}else r=function(e,t,n,i,a){if(a){if("function"===typeof i){var s=i;i=function(){var e=$c(r);s.call(e)}}var r=Zc(t,i,e,0,null,!1,0,"",Qc);return e._reactRootContainer=r,e[ma]=r.current,Zi(8===e.nodeType?e.parentNode:e),dc(),r}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof i){var o=i;i=function(){var e=$c(l);o.call(e)}}var l=Wc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=l,e[ma]=l.current,Zi(8===e.nodeType?e.parentNode:e),dc((function(){Uc(t,l,n,i)})),l}(n,t,e,a,i);return $c(r)}Kc.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Uc(e,t,null,null)},Kc.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){Uc(null,e,null,null)})),t[ma]=null}},Kc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Lt.length&&0!==t&&t<Lt[n].priority;n++);Lt.splice(n,0,e),0===n&&Rt(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(vt(t,1|n),ic(t,Ye()),0===(6&Sl)&&(Zl=Ye()+500,Za()))}break;case 13:dc((function(){var t=Os(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Hc(e,1)}},bt=function(e){if(13===e.tag){var t=Os(e,134217728);if(null!==t)nc(t,e,134217728,ec());Hc(e,134217728)}},jt=function(e){if(13===e.tag){var t=tc(e),n=Os(e,t);if(null!==n)nc(n,e,t,ec());Hc(e,t)}},kt=function(){return xt},zt=function(e,t){var n=xt;try{return xt=e,t()}finally{xt=n}},be=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var a=_a(i);if(!a)throw Error(s(90));q(i),Q(i,a)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Se=cc,Ee=dc;var ed={usingClientEntryPoint:!1,Events:[xa,wa,_a,Ne,Pe,cc]},td={findFiberByHostInstance:va,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var id=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!id.isDisabled&&id.supportsFiber)try{at=id.inject(nd),st=id}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(s(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:b,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(s(299));var n=!1,i="",a=qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Wc(e,1,!1,null,0,n,0,i,a),e[ma]=t.current,Zi(8===e.nodeType?e.parentNode:e),new Gc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Yc(t))throw Error(s(200));return Xc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(s(405));var i=null!=n&&n.hydratedSources||null,a=!1,r="",o=qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(r=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Zc(t,null,e,1,null!=n?n:null,a,0,r,o),e[ma]=t.current,Zi(e),i)for(e=0;e<i.length;e++)a=(a=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Kc(t)},t.render=function(e,t,n){if(!Yc(t))throw Error(s(200));return Xc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Yc(e))throw Error(s(40));return!!e._reactRootContainer&&(dc((function(){Xc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ma]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Yc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Xc(e,t,n,!1,i)},t.version="18.3.1-next-f1338f8080-20240426"},352:(e,t,n)=>{"use strict";var i=n(119);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},414:(e,t,n)=>{"use strict";e.exports=n(654)},527:function(e,t){!function(e){"use strict";var t="1.9.4";function n(e){var t,n,i,a;for(n=1,i=arguments.length;n<i;n++)for(t in a=arguments[n])e[t]=a[t];return e}var i=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}();function a(e,t){var n=Array.prototype.slice;if(e.bind)return e.bind.apply(e,n.call(arguments,1));var i=n.call(arguments,2);return function(){return e.apply(t,i.length?i.concat(n.call(arguments)):arguments)}}var s=0;function r(e){return"_leaflet_id"in e||(e._leaflet_id=++s),e._leaflet_id}function o(e,t,n){var i,a,s,r;return r=function(){i=!1,a&&(s.apply(n,a),a=!1)},s=function(){i?a=arguments:(e.apply(n,arguments),setTimeout(r,t),i=!0)},s}function l(e,t,n){var i=t[1],a=t[0],s=i-a;return e===i&&n?e:((e-a)%s+s)%s+a}function c(){return!1}function d(e,t){if(!1===t)return e;var n=Math.pow(10,void 0===t?6:t);return Math.round(e*n)/n}function u(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function h(e){return u(e).split(/\s+/)}function p(e,t){for(var n in Object.prototype.hasOwnProperty.call(e,"options")||(e.options=e.options?i(e.options):{}),t)e.options[n]=t[n];return e.options}function m(e,t,n){var i=[];for(var a in e)i.push(encodeURIComponent(n?a.toUpperCase():a)+"="+encodeURIComponent(e[a]));return(t&&-1!==t.indexOf("?")?"&":"?")+i.join("&")}var f=/\{ *([\w_ -]+) *\}/g;function y(e,t){return e.replace(f,(function(e,n){var i=t[n];if(void 0===i)throw new Error("No value provided for variable "+e);return"function"===typeof i&&(i=i(t)),i}))}var g=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function v(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}var x="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function w(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var _=0;function b(e){var t=+new Date,n=Math.max(0,16-(t-_));return _=t+n,window.setTimeout(e,n)}var j=window.requestAnimationFrame||w("RequestAnimationFrame")||b,k=window.cancelAnimationFrame||w("CancelAnimationFrame")||w("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function z(e,t,n){if(!n||j!==b)return j.call(window,a(e,t));e.call(t)}function N(e){e&&k.call(window,e)}var P={__proto__:null,extend:n,create:i,bind:a,get lastId(){return s},stamp:r,throttle:o,wrapNum:l,falseFn:c,formatNum:d,trim:u,splitWords:h,setOptions:p,getParamString:m,template:y,isArray:g,indexOf:v,emptyImageUrl:x,requestFn:j,cancelFn:k,requestAnimFrame:z,cancelAnimFrame:N};function S(){}function E(e){if("undefined"!==typeof L&&L&&L.Mixin){e=g(e)?e:[e];for(var t=0;t<e.length;t++)e[t]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}S.extend=function(e){var t=function(){p(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},a=t.__super__=this.prototype,s=i(a);for(var r in s.constructor=t,t.prototype=s,this)Object.prototype.hasOwnProperty.call(this,r)&&"prototype"!==r&&"__super__"!==r&&(t[r]=this[r]);return e.statics&&n(t,e.statics),e.includes&&(E(e.includes),n.apply(null,[s].concat(e.includes))),n(s,e),delete s.statics,delete s.includes,s.options&&(s.options=a.options?i(a.options):{},n(s.options,e.options)),s._initHooks=[],s.callInitHooks=function(){if(!this._initHooksCalled){a.callInitHooks&&a.callInitHooks.call(this),this._initHooksCalled=!0;for(var e=0,t=s._initHooks.length;e<t;e++)s._initHooks[e].call(this)}},t},S.include=function(e){var t=this.prototype.options;return n(this.prototype,e),e.options&&(this.prototype.options=t,this.mergeOptions(e.options)),this},S.mergeOptions=function(e){return n(this.prototype.options,e),this},S.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),n="function"===typeof e?e:function(){this[e].apply(this,t)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var M={on:function(e,t,n){if("object"===typeof e)for(var i in e)this._on(i,e[i],t);else for(var a=0,s=(e=h(e)).length;a<s;a++)this._on(e[a],t,n);return this},off:function(e,t,n){if(arguments.length)if("object"===typeof e)for(var i in e)this._off(i,e[i],t);else{e=h(e);for(var a=1===arguments.length,s=0,r=e.length;s<r;s++)a?this._off(e[s]):this._off(e[s],t,n)}else delete this._events;return this},_on:function(e,t,n,i){if("function"===typeof t){if(!1===this._listens(e,t,n)){n===this&&(n=void 0);var a={fn:t,ctx:n};i&&(a.once=!0),this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(a)}}else console.warn("wrong listener type: "+typeof t)},_off:function(e,t,n){var i,a,s;if(this._events&&(i=this._events[e]))if(1!==arguments.length)if("function"===typeof t){var r=this._listens(e,t,n);if(!1!==r){var o=i[r];this._firingCount&&(o.fn=c,this._events[e]=i=i.slice()),i.splice(r,1)}}else console.warn("wrong listener type: "+typeof t);else{if(this._firingCount)for(a=0,s=i.length;a<s;a++)i[a].fn=c;delete this._events[e]}},fire:function(e,t,i){if(!this.listens(e,i))return this;var a=n({},t,{type:e,target:this,sourceTarget:t&&t.sourceTarget||this});if(this._events){var s=this._events[e];if(s){this._firingCount=this._firingCount+1||1;for(var r=0,o=s.length;r<o;r++){var l=s[r],c=l.fn;l.once&&this.off(e,c,l.ctx),c.call(l.ctx||this,a)}this._firingCount--}}return i&&this._propagateEvent(a),this},listens:function(e,t,n,i){"string"!==typeof e&&console.warn('"string" type argument expected');var a=t;"function"!==typeof t&&(i=!!t,a=void 0,n=void 0);var s=this._events&&this._events[e];if(s&&s.length&&!1!==this._listens(e,a,n))return!0;if(i)for(var r in this._eventParents)if(this._eventParents[r].listens(e,t,n,i))return!0;return!1},_listens:function(e,t,n){if(!this._events)return!1;var i=this._events[e]||[];if(!t)return!!i.length;n===this&&(n=void 0);for(var a=0,s=i.length;a<s;a++)if(i[a].fn===t&&i[a].ctx===n)return a;return!1},once:function(e,t,n){if("object"===typeof e)for(var i in e)this._on(i,e[i],t,!0);else for(var a=0,s=(e=h(e)).length;a<s;a++)this._on(e[a],t,n,!0);return this},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[r(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[r(e)],this},_propagateEvent:function(e){for(var t in this._eventParents)this._eventParents[t].fire(e.type,n({layer:e.target,propagatedFrom:e.target},e),!0)}};M.addEventListener=M.on,M.removeEventListener=M.clearAllEventListeners=M.off,M.addOneTimeEventListener=M.once,M.fireEvent=M.fire,M.hasEventListeners=M.listens;var C=S.extend(M);function T(e,t,n){this.x=n?Math.round(e):e,this.y=n?Math.round(t):t}var O=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};function A(e,t,n){return e instanceof T?e:g(e)?new T(e[0],e[1]):void 0===e||null===e?e:"object"===typeof e&&"x"in e&&"y"in e?new T(e.x,e.y):new T(e,t,n)}function I(e,t){if(e)for(var n=t?[e,t]:e,i=0,a=n.length;i<a;i++)this.extend(n[i])}function R(e,t){return!e||e instanceof I?e:new I(e,t)}function D(e,t){if(e)for(var n=t?[e,t]:e,i=0,a=n.length;i<a;i++)this.extend(n[i])}function B(e,t){return e instanceof D?e:new D(e,t)}function W(e,t,n){if(isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=+e,this.lng=+t,void 0!==n&&(this.alt=+n)}function F(e,t,n){return e instanceof W?e:g(e)&&"object"!==typeof e[0]?3===e.length?new W(e[0],e[1],e[2]):2===e.length?new W(e[0],e[1]):null:void 0===e||null===e?e:"object"===typeof e&&"lat"in e?new W(e.lat,"lng"in e?e.lng:e.lon,e.alt):void 0===t?null:new W(e,t,n)}T.prototype={clone:function(){return new T(this.x,this.y)},add:function(e){return this.clone()._add(A(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(A(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new T(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new T(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=O(this.x),this.y=O(this.y),this},distanceTo:function(e){var t=(e=A(e)).x-this.x,n=e.y-this.y;return Math.sqrt(t*t+n*n)},equals:function(e){return(e=A(e)).x===this.x&&e.y===this.y},contains:function(e){return e=A(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+d(this.x)+", "+d(this.y)+")"}},I.prototype={extend:function(e){var t,n;if(!e)return this;if(e instanceof T||"number"===typeof e[0]||"x"in e)t=n=A(e);else if(t=(e=R(e)).min,n=e.max,!t||!n)return this;return this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)):(this.min=t.clone(),this.max=n.clone()),this},getCenter:function(e){return A((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return A(this.min.x,this.max.y)},getTopRight:function(){return A(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,n;return(e="number"===typeof e[0]||e instanceof T?A(e):R(e))instanceof I?(t=e.min,n=e.max):t=n=e,t.x>=this.min.x&&n.x<=this.max.x&&t.y>=this.min.y&&n.y<=this.max.y},intersects:function(e){e=R(e);var t=this.min,n=this.max,i=e.min,a=e.max,s=a.x>=t.x&&i.x<=n.x,r=a.y>=t.y&&i.y<=n.y;return s&&r},overlaps:function(e){e=R(e);var t=this.min,n=this.max,i=e.min,a=e.max,s=a.x>t.x&&i.x<n.x,r=a.y>t.y&&i.y<n.y;return s&&r},isValid:function(){return!(!this.min||!this.max)},pad:function(e){var t=this.min,n=this.max,i=Math.abs(t.x-n.x)*e,a=Math.abs(t.y-n.y)*e;return R(A(t.x-i,t.y-a),A(n.x+i,n.y+a))},equals:function(e){return!!e&&(e=R(e),this.min.equals(e.getTopLeft())&&this.max.equals(e.getBottomRight()))}},D.prototype={extend:function(e){var t,n,i=this._southWest,a=this._northEast;if(e instanceof W)t=e,n=e;else{if(!(e instanceof D))return e?this.extend(F(e)||B(e)):this;if(t=e._southWest,n=e._northEast,!t||!n)return this}return i||a?(i.lat=Math.min(t.lat,i.lat),i.lng=Math.min(t.lng,i.lng),a.lat=Math.max(n.lat,a.lat),a.lng=Math.max(n.lng,a.lng)):(this._southWest=new W(t.lat,t.lng),this._northEast=new W(n.lat,n.lng)),this},pad:function(e){var t=this._southWest,n=this._northEast,i=Math.abs(t.lat-n.lat)*e,a=Math.abs(t.lng-n.lng)*e;return new D(new W(t.lat-i,t.lng-a),new W(n.lat+i,n.lng+a))},getCenter:function(){return new W((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new W(this.getNorth(),this.getWest())},getSouthEast:function(){return new W(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){e="number"===typeof e[0]||e instanceof W||"lat"in e?F(e):B(e);var t,n,i=this._southWest,a=this._northEast;return e instanceof D?(t=e.getSouthWest(),n=e.getNorthEast()):t=n=e,t.lat>=i.lat&&n.lat<=a.lat&&t.lng>=i.lng&&n.lng<=a.lng},intersects:function(e){e=B(e);var t=this._southWest,n=this._northEast,i=e.getSouthWest(),a=e.getNorthEast(),s=a.lat>=t.lat&&i.lat<=n.lat,r=a.lng>=t.lng&&i.lng<=n.lng;return s&&r},overlaps:function(e){e=B(e);var t=this._southWest,n=this._northEast,i=e.getSouthWest(),a=e.getNorthEast(),s=a.lat>t.lat&&i.lat<n.lat,r=a.lng>t.lng&&i.lng<n.lng;return s&&r},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,t){return!!e&&(e=B(e),this._southWest.equals(e.getSouthWest(),t)&&this._northEast.equals(e.getNorthEast(),t))},isValid:function(){return!(!this._southWest||!this._northEast)}},W.prototype={equals:function(e,t){return!!e&&(e=F(e),Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng))<=(void 0===t?1e-9:t))},toString:function(e){return"LatLng("+d(this.lat,e)+", "+d(this.lng,e)+")"},distanceTo:function(e){return U.distance(this,F(e))},wrap:function(){return U.wrapLatLng(this)},toBounds:function(e){var t=180*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return B([this.lat-t,this.lng-n],[this.lat+t,this.lng+n])},clone:function(){return new W(this.lat,this.lng,this.alt)}};var Z={latLngToPoint:function(e,t){var n=this.projection.project(e),i=this.scale(t);return this.transformation._transform(n,i)},pointToLatLng:function(e,t){var n=this.scale(t),i=this.transformation.untransform(e,n);return this.projection.unproject(i)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var t=this.projection.bounds,n=this.scale(e);return new I(this.transformation.transform(t.min,n),this.transformation.transform(t.max,n))},infinite:!1,wrapLatLng:function(e){var t=this.wrapLng?l(e.lng,this.wrapLng,!0):e.lng;return new W(this.wrapLat?l(e.lat,this.wrapLat,!0):e.lat,t,e.alt)},wrapLatLngBounds:function(e){var t=e.getCenter(),n=this.wrapLatLng(t),i=t.lat-n.lat,a=t.lng-n.lng;if(0===i&&0===a)return e;var s=e.getSouthWest(),r=e.getNorthEast();return new D(new W(s.lat-i,s.lng-a),new W(r.lat-i,r.lng-a))}},U=n({},Z,{wrapLng:[-180,180],R:6371e3,distance:function(e,t){var n=Math.PI/180,i=e.lat*n,a=t.lat*n,s=Math.sin((t.lat-e.lat)*n/2),r=Math.sin((t.lng-e.lng)*n/2),o=s*s+Math.cos(i)*Math.cos(a)*r*r,l=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o));return this.R*l}}),$=6378137,V={R:$,MAX_LATITUDE:85.0511287798,project:function(e){var t=Math.PI/180,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,e.lat),-n),a=Math.sin(i*t);return new T(this.R*e.lng*t,this.R*Math.log((1+a)/(1-a))/2)},unproject:function(e){var t=180/Math.PI;return new W((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*t,e.x*t/this.R)},bounds:function(){var e=$*Math.PI;return new I([-e,-e],[e,e])}()};function H(e,t,n,i){if(g(e))return this._a=e[0],this._b=e[1],this._c=e[2],void(this._d=e[3]);this._a=e,this._b=t,this._c=n,this._d=i}function q(e,t,n,i){return new H(e,t,n,i)}H.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new T((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}};var G=n({},U,{code:"EPSG:3857",projection:V,transformation:function(){var e=.5/(Math.PI*V.R);return q(e,.5,-e,.5)}()}),K=n({},G,{code:"EPSG:900913"});function J(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Y(e,t){var n,i,a,s,r,o,l="";for(n=0,a=e.length;n<a;n++){for(i=0,s=(r=e[n]).length;i<s;i++)l+=(i?"L":"M")+(o=r[i]).x+" "+o.y;l+=t?Ie.svg?"z":"x":""}return l||"M0 0"}var Q=document.documentElement.style,X="ActiveXObject"in window,ee=X&&!document.addEventListener,te="msLaunchUri"in navigator&&!("documentMode"in document),ne=Ae("webkit"),ie=Ae("android"),ae=Ae("android 2")||Ae("android 3"),se=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),re=ie&&Ae("Google")&&se<537&&!("AudioNode"in window),oe=!!window.opera,le=!te&&Ae("chrome"),ce=Ae("gecko")&&!ne&&!oe&&!X,de=!le&&Ae("safari"),ue=Ae("phantom"),he="OTransition"in Q,pe=0===navigator.platform.indexOf("Win"),me=X&&"transition"in Q,fe="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ae,ye="MozPerspective"in Q,ge=!window.L_DISABLE_3D&&(me||fe||ye)&&!he&&!ue,ve="undefined"!==typeof orientation||Ae("mobile"),xe=ve&&ne,we=ve&&fe,_e=!window.PointerEvent&&window.MSPointerEvent,be=!(!window.PointerEvent&&!_e),je="ontouchstart"in window||!!window.TouchEvent,ke=!window.L_NO_TOUCH&&(je||be),ze=ve&&oe,Ne=ve&&ce,Pe=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Se=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveEventSupport",c,t),window.removeEventListener("testPassiveEventSupport",c,t)}catch(n){}return e}(),Ee=!!document.createElement("canvas").getContext,Me=!(!document.createElementNS||!J("svg").createSVGRect),Ce=!!Me&&function(){var e=document.createElement("div");return e.innerHTML="<svg/>","http://www.w3.org/2000/svg"===(e.firstChild&&e.firstChild.namespaceURI)}(),Te=!Me&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var t=e.firstChild;return t.style.behavior="url(#default#VML)",t&&"object"===typeof t.adj}catch(n){return!1}}(),Le=0===navigator.platform.indexOf("Mac"),Oe=0===navigator.platform.indexOf("Linux");function Ae(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var Ie={ie:X,ielt9:ee,edge:te,webkit:ne,android:ie,android23:ae,androidStock:re,opera:oe,chrome:le,gecko:ce,safari:de,phantom:ue,opera12:he,win:pe,ie3d:me,webkit3d:fe,gecko3d:ye,any3d:ge,mobile:ve,mobileWebkit:xe,mobileWebkit3d:we,msPointer:_e,pointer:be,touch:ke,touchNative:je,mobileOpera:ze,mobileGecko:Ne,retina:Pe,passiveEvents:Se,canvas:Ee,svg:Me,vml:Te,inlineSvg:Ce,mac:Le,linux:Oe},Re=Ie.msPointer?"MSPointerDown":"pointerdown",De=Ie.msPointer?"MSPointerMove":"pointermove",Be=Ie.msPointer?"MSPointerUp":"pointerup",We=Ie.msPointer?"MSPointerCancel":"pointercancel",Fe={touchstart:Re,touchmove:De,touchend:Be,touchcancel:We},Ze={touchstart:Qe,touchmove:Ye,touchend:Ye,touchcancel:Ye},Ue={},$e=!1;function Ve(e,t,n){return"touchstart"===t&&Je(),Ze[t]?(n=Ze[t].bind(this,n),e.addEventListener(Fe[t],n,!1),n):(console.warn("wrong event specified:",t),c)}function He(e,t,n){Fe[t]?e.removeEventListener(Fe[t],n,!1):console.warn("wrong event specified:",t)}function qe(e){Ue[e.pointerId]=e}function Ge(e){Ue[e.pointerId]&&(Ue[e.pointerId]=e)}function Ke(e){delete Ue[e.pointerId]}function Je(){$e||(document.addEventListener(Re,qe,!0),document.addEventListener(De,Ge,!0),document.addEventListener(Be,Ke,!0),document.addEventListener(We,Ke,!0),$e=!0)}function Ye(e,t){if(t.pointerType!==(t.MSPOINTER_TYPE_MOUSE||"mouse")){for(var n in t.touches=[],Ue)t.touches.push(Ue[n]);t.changedTouches=[t],e(t)}}function Qe(e,t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&qt(t),Ye(e,t)}function Xe(e){var t,n,i={};for(n in e)t=e[n],i[n]=t&&t.bind?t.bind(e):t;return e=i,i.type="dblclick",i.detail=2,i.isTrusted=!1,i._simulated=!0,i}var et=200;function tt(e,t){e.addEventListener("dblclick",t);var n,i=0;function a(e){if(1===e.detail){if("mouse"!==e.pointerType&&(!e.sourceCapabilities||e.sourceCapabilities.firesTouchEvents)){var a=Kt(e);if(!a.some((function(e){return e instanceof HTMLLabelElement&&e.attributes.for}))||a.some((function(e){return e instanceof HTMLInputElement||e instanceof HTMLSelectElement}))){var s=Date.now();s-i<=et?2===++n&&t(Xe(e)):n=1,i=s}}}else n=e.detail}return e.addEventListener("click",a),{dblclick:t,simDblclick:a}}function nt(e,t){e.removeEventListener("dblclick",t.dblclick),e.removeEventListener("click",t.simDblclick)}var it,at,st,rt,ot,lt=zt(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ct=zt(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),dt="webkitTransition"===ct||"OTransition"===ct?ct+"End":"transitionend";function ut(e){return"string"===typeof e?document.getElementById(e):e}function ht(e,t){var n=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!n||"auto"===n)&&document.defaultView){var i=document.defaultView.getComputedStyle(e,null);n=i?i[t]:null}return"auto"===n?null:n}function pt(e,t,n){var i=document.createElement(e);return i.className=t||"",n&&n.appendChild(i),i}function mt(e){var t=e.parentNode;t&&t.removeChild(e)}function ft(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function yt(e){var t=e.parentNode;t&&t.lastChild!==e&&t.appendChild(e)}function gt(e){var t=e.parentNode;t&&t.firstChild!==e&&t.insertBefore(e,t.firstChild)}function vt(e,t){if(void 0!==e.classList)return e.classList.contains(t);var n=bt(e);return n.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n)}function xt(e,t){if(void 0!==e.classList)for(var n=h(t),i=0,a=n.length;i<a;i++)e.classList.add(n[i]);else if(!vt(e,t)){var s=bt(e);_t(e,(s?s+" ":"")+t)}}function wt(e,t){void 0!==e.classList?e.classList.remove(t):_t(e,u((" "+bt(e)+" ").replace(" "+t+" "," ")))}function _t(e,t){void 0===e.className.baseVal?e.className=t:e.className.baseVal=t}function bt(e){return e.correspondingElement&&(e=e.correspondingElement),void 0===e.className.baseVal?e.className:e.className.baseVal}function jt(e,t){"opacity"in e.style?e.style.opacity=t:"filter"in e.style&&kt(e,t)}function kt(e,t){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=e.filters.item(i)}catch(a){if(1===t)return}t=Math.round(100*t),n?(n.Enabled=100!==t,n.Opacity=t):e.style.filter+=" progid:"+i+"(opacity="+t+")"}function zt(e){for(var t=document.documentElement.style,n=0;n<e.length;n++)if(e[n]in t)return e[n];return!1}function Nt(e,t,n){var i=t||new T(0,0);e.style[lt]=(Ie.ie3d?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(n?" scale("+n+")":"")}function Pt(e,t){e._leaflet_pos=t,Ie.any3d?Nt(e,t):(e.style.left=t.x+"px",e.style.top=t.y+"px")}function St(e){return e._leaflet_pos||new T(0,0)}if("onselectstart"in document)it=function(){Rt(window,"selectstart",qt)},at=function(){Bt(window,"selectstart",qt)};else{var Et=zt(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);it=function(){if(Et){var e=document.documentElement.style;st=e[Et],e[Et]="none"}},at=function(){Et&&(document.documentElement.style[Et]=st,st=void 0)}}function Mt(){Rt(window,"dragstart",qt)}function Ct(){Bt(window,"dragstart",qt)}function Tt(e){for(;-1===e.tabIndex;)e=e.parentNode;e.style&&(Lt(),rt=e,ot=e.style.outlineStyle,e.style.outlineStyle="none",Rt(window,"keydown",Lt))}function Lt(){rt&&(rt.style.outlineStyle=ot,rt=void 0,ot=void 0,Bt(window,"keydown",Lt))}function Ot(e){do{e=e.parentNode}while((!e.offsetWidth||!e.offsetHeight)&&e!==document.body);return e}function At(e){var t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}var It={__proto__:null,TRANSFORM:lt,TRANSITION:ct,TRANSITION_END:dt,get:ut,getStyle:ht,create:pt,remove:mt,empty:ft,toFront:yt,toBack:gt,hasClass:vt,addClass:xt,removeClass:wt,setClass:_t,getClass:bt,setOpacity:jt,testProp:zt,setTransform:Nt,setPosition:Pt,getPosition:St,get disableTextSelection(){return it},get enableTextSelection(){return at},disableImageDrag:Mt,enableImageDrag:Ct,preventOutline:Tt,restoreOutline:Lt,getSizedParentNode:Ot,getScale:At};function Rt(e,t,n,i){if(t&&"object"===typeof t)for(var a in t)Zt(e,a,t[a],n);else for(var s=0,r=(t=h(t)).length;s<r;s++)Zt(e,t[s],n,i);return this}var Dt="_leaflet_events";function Bt(e,t,n,i){if(1===arguments.length)Wt(e),delete e[Dt];else if(t&&"object"===typeof t)for(var a in t)Ut(e,a,t[a],n);else if(t=h(t),2===arguments.length)Wt(e,(function(e){return-1!==v(t,e)}));else for(var s=0,r=t.length;s<r;s++)Ut(e,t[s],n,i);return this}function Wt(e,t){for(var n in e[Dt]){var i=n.split(/\d/)[0];t&&!t(i)||Ut(e,i,null,null,n)}}var Ft={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Zt(e,t,n,i){var a=t+r(n)+(i?"_"+r(i):"");if(e[Dt]&&e[Dt][a])return this;var s=function(t){return n.call(i||e,t||window.event)},o=s;!Ie.touchNative&&Ie.pointer&&0===t.indexOf("touch")?s=Ve(e,t,s):Ie.touch&&"dblclick"===t?s=tt(e,s):"addEventListener"in e?"touchstart"===t||"touchmove"===t||"wheel"===t||"mousewheel"===t?e.addEventListener(Ft[t]||t,s,!!Ie.passiveEvents&&{passive:!1}):"mouseenter"===t||"mouseleave"===t?(s=function(t){t=t||window.event,Xt(e,t)&&o(t)},e.addEventListener(Ft[t],s,!1)):e.addEventListener(t,o,!1):e.attachEvent("on"+t,s),e[Dt]=e[Dt]||{},e[Dt][a]=s}function Ut(e,t,n,i,a){a=a||t+r(n)+(i?"_"+r(i):"");var s=e[Dt]&&e[Dt][a];if(!s)return this;!Ie.touchNative&&Ie.pointer&&0===t.indexOf("touch")?He(e,t,s):Ie.touch&&"dblclick"===t?nt(e,s):"removeEventListener"in e?e.removeEventListener(Ft[t]||t,s,!1):e.detachEvent("on"+t,s),e[Dt][a]=null}function $t(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,this}function Vt(e){return Zt(e,"wheel",$t),this}function Ht(e){return Rt(e,"mousedown touchstart dblclick contextmenu",$t),e._leaflet_disable_click=!0,this}function qt(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function Gt(e){return qt(e),$t(e),this}function Kt(e){if(e.composedPath)return e.composedPath();for(var t=[],n=e.target;n;)t.push(n),n=n.parentNode;return t}function Jt(e,t){if(!t)return new T(e.clientX,e.clientY);var n=At(t),i=n.boundingClientRect;return new T((e.clientX-i.left)/n.x-t.clientLeft,(e.clientY-i.top)/n.y-t.clientTop)}var Yt=Ie.linux&&Ie.chrome?window.devicePixelRatio:Ie.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Qt(e){return Ie.edge?e.wheelDeltaY/2:e.deltaY&&0===e.deltaMode?-e.deltaY/Yt:e.deltaY&&1===e.deltaMode?20*-e.deltaY:e.deltaY&&2===e.deltaMode?60*-e.deltaY:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?20*-e.detail:e.detail?e.detail/-32765*60:0}function Xt(e,t){var n=t.relatedTarget;if(!n)return!0;try{for(;n&&n!==e;)n=n.parentNode}catch(i){return!1}return n!==e}var en={__proto__:null,on:Rt,off:Bt,stopPropagation:$t,disableScrollPropagation:Vt,disableClickPropagation:Ht,preventDefault:qt,stop:Gt,getPropagationPath:Kt,getMousePosition:Jt,getWheelDelta:Qt,isExternalTarget:Xt,addListener:Rt,removeListener:Bt},tn=C.extend({run:function(e,t,n,i){this.stop(),this._el=e,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=St(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=z(this._animate,this),this._step()},_step:function(e){var t=+new Date-this._startTime,n=1e3*this._duration;t<n?this._runFrame(this._easeOut(t/n),e):(this._runFrame(1),this._complete())},_runFrame:function(e,t){var n=this._startPos.add(this._offset.multiplyBy(e));t&&n._round(),Pt(this._el,n),this.fire("step")},_complete:function(){N(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),nn=C.extend({options:{crs:G,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,t){t=p(this,t),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),void 0!==t.zoom&&(this._zoom=this._limitZoom(t.zoom)),t.center&&void 0!==t.zoom&&this.setView(F(t.center),t.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ct&&Ie.any3d&&!Ie.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Rt(this._proxy,dt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,t,i){return t=void 0===t?this._zoom:this._limitZoom(t),e=this._limitCenter(F(e),t,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i&&(void 0!==i.animate&&(i.zoom=n({animate:i.animate},i.zoom),i.pan=n({animate:i.animate,duration:i.duration},i.pan)),this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,i.zoom):this._tryAnimatedPan(e,i.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(e,t,i.pan&&i.pan.noMoveStart),this)},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=e,this)},zoomIn:function(e,t){return e=e||(Ie.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+e,t)},zoomOut:function(e,t){return e=e||(Ie.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-e,t)},setZoomAround:function(e,t,n){var i=this.getZoomScale(t),a=this.getSize().divideBy(2),s=(e instanceof T?e:this.latLngToContainerPoint(e)).subtract(a).multiplyBy(1-1/i),r=this.containerPointToLatLng(a.add(s));return this.setView(r,t,{zoom:n})},_getBoundsCenterZoom:function(e,t){t=t||{},e=e.getBounds?e.getBounds():B(e);var n=A(t.paddingTopLeft||t.padding||[0,0]),i=A(t.paddingBottomRight||t.padding||[0,0]),a=this.getBoundsZoom(e,!1,n.add(i));if((a="number"===typeof t.maxZoom?Math.min(t.maxZoom,a):a)===1/0)return{center:e.getCenter(),zoom:a};var s=i.subtract(n).divideBy(2),r=this.project(e.getSouthWest(),a),o=this.project(e.getNorthEast(),a);return{center:this.unproject(r.add(o).divideBy(2).add(s),a),zoom:a}},fitBounds:function(e,t){if(!(e=B(e)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(e,t);return this.setView(n.center,n.zoom,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e,t){if(t=t||{},!(e=A(e).round()).x&&!e.y)return this.fire("moveend");if(!0!==t.animate&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new tn,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),!1!==t.animate){xt(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,n,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,t,n){if(!1===(n=n||{}).animate||!Ie.any3d)return this.setView(e,t,n);this._stop();var i=this.project(this.getCenter()),a=this.project(e),s=this.getSize(),r=this._zoom;e=F(e),t=void 0===t?r:t;var o=Math.max(s.x,s.y),l=o*this.getZoomScale(r,t),c=a.distanceTo(i)||1,d=1.42,u=d*d;function h(e){var t=(l*l-o*o+(e?-1:1)*u*u*c*c)/(2*(e?l:o)*u*c),n=Math.sqrt(t*t+1)-t;return n<1e-9?-18:Math.log(n)}function p(e){return(Math.exp(e)-Math.exp(-e))/2}function m(e){return(Math.exp(e)+Math.exp(-e))/2}function f(e){return p(e)/m(e)}var y=h(0);function g(e){return o*(m(y)/m(y+d*e))}function v(e){return o*(m(y)*f(y+d*e)-p(y))/u}function x(e){return 1-Math.pow(1-e,1.5)}var w=Date.now(),_=(h(1)-y)/d,b=n.duration?1e3*n.duration:1e3*_*.8;function j(){var n=(Date.now()-w)/b,s=x(n)*_;n<=1?(this._flyToFrame=z(j,this),this._move(this.unproject(i.add(a.subtract(i).multiplyBy(v(s)/c)),r),this.getScaleZoom(o/g(s),r),{flyTo:!0})):this._move(e,t)._moveEnd(!0)}return this._moveStart(!0,n.noMoveStart),j.call(this),this},flyToBounds:function(e,t){var n=this._getBoundsCenterZoom(e,t);return this.flyTo(n.center,n.zoom,t)},setMaxBounds:function(e){return e=B(e),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),e.isValid()?(this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(e){var t=this.options.minZoom;return this.options.minZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var t=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,t){this._enforcingBounds=!0;var n=this.getCenter(),i=this._limitCenter(n,this._zoom,B(e));return n.equals(i)||this.panTo(i,t),this._enforcingBounds=!1,this},panInside:function(e,t){var n=A((t=t||{}).paddingTopLeft||t.padding||[0,0]),i=A(t.paddingBottomRight||t.padding||[0,0]),a=this.project(this.getCenter()),s=this.project(e),r=this.getPixelBounds(),o=R([r.min.add(n),r.max.subtract(i)]),l=o.getSize();if(!o.contains(s)){this._enforcingBounds=!0;var c=s.subtract(o.getCenter()),d=o.extend(s).getSize().subtract(l);a.x+=c.x<0?-d.x:d.x,a.y+=c.y<0?-d.y:d.y,this.panTo(this.unproject(a),t),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=n({animate:!1,pan:!0},!0===e?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),s=t.divideBy(2).round(),r=i.divideBy(2).round(),o=s.subtract(r);return o.x||o.y?(e.animate&&e.pan?this.panBy(o):(e.pan&&this._rawPanBy(o),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:i})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=n({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=a(this._handleGeolocationResponse,this),i=a(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,i,e):navigator.geolocation.getCurrentPosition(t,i,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){if(this._container._leaflet_id){var t=e.code,n=e.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+n+"."})}},_handleGeolocationResponse:function(e){if(this._container._leaflet_id){var t=new W(e.coords.latitude,e.coords.longitude),n=t.toBounds(2*e.coords.accuracy),i=this._locateOptions;if(i.setView){var a=this.getBoundsZoom(n);this.setView(t,i.maxZoom?Math.min(a,i.maxZoom):a)}var s={latlng:t,bounds:n,timestamp:e.timestamp};for(var r in e.coords)"number"===typeof e.coords[r]&&(s[r]=e.coords[r]);this.fire("locationfound",s)}},addHandler:function(e,t){if(!t)return this;var n=this[e]=new t(this);return this._handlers.push(n),this.options[e]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var e;for(e in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),mt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(N(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[e].remove();for(e in this._panes)mt(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,t){var n=pt("div","leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),t||this._mapPane);return e&&(this._panes[e]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds();return new D(this.unproject(e.getBottomLeft()),this.unproject(e.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,n){e=B(e),n=A(n||[0,0]);var i=this.getZoom()||0,a=this.getMinZoom(),s=this.getMaxZoom(),r=e.getNorthWest(),o=e.getSouthEast(),l=this.getSize().subtract(n),c=R(this.project(o,i),this.project(r,i)).getSize(),d=Ie.any3d?this.options.zoomSnap:1,u=l.x/c.x,h=l.y/c.y,p=t?Math.max(u,h):Math.min(u,h);return i=this.getScaleZoom(p,i),d&&(i=Math.round(i/(d/100))*(d/100),i=t?Math.ceil(i/d)*d:Math.floor(i/d)*d),Math.max(a,Math.min(s,i))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new T(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,t){var n=this._getTopLeftPoint(e,t);return new I(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(void 0===e?this.getZoom():e)},getPane:function(e){return"string"===typeof e?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,t){var n=this.options.crs;return t=void 0===t?this._zoom:t,n.scale(e)/n.scale(t)},getScaleZoom:function(e,t){var n=this.options.crs;t=void 0===t?this._zoom:t;var i=n.zoom(e*n.scale(t));return isNaN(i)?1/0:i},project:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.latLngToPoint(F(e),t)},unproject:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.pointToLatLng(A(e),t)},layerPointToLatLng:function(e){var t=A(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){return this.project(F(e))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(F(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(B(e))},distance:function(e,t){return this.options.crs.distance(F(e),F(t))},containerPointToLayerPoint:function(e){return A(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return A(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(A(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(F(e)))},mouseEventToContainerPoint:function(e){return Jt(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=ut(e);if(!t)throw new Error("Map container not found.");if(t._leaflet_id)throw new Error("Map container is already initialized.");Rt(t,"scroll",this._onScroll,this),this._containerId=r(t)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ie.any3d,xt(e,"leaflet-container"+(Ie.touch?" leaflet-touch":"")+(Ie.retina?" leaflet-retina":"")+(Ie.ielt9?" leaflet-oldie":"")+(Ie.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var t=ht(e,"position");"absolute"!==t&&"relative"!==t&&"fixed"!==t&&"sticky"!==t&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Pt(this._mapPane,new T(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(xt(e.markerPane,"leaflet-zoom-hide"),xt(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,t,n){Pt(this._mapPane,new T(0,0));var i=!this._loaded;this._loaded=!0,t=this._limitZoom(t),this.fire("viewprereset");var a=this._zoom!==t;this._moveStart(a,n)._move(e,t)._moveEnd(a),this.fire("viewreset"),i&&this.fire("load")},_moveStart:function(e,t){return e&&this.fire("zoomstart"),t||this.fire("movestart"),this},_move:function(e,t,n,i){void 0===t&&(t=this._zoom);var a=this._zoom!==t;return this._zoom=t,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),i?n&&n.pinch&&this.fire("zoom",n):((a||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)),this},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return N(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){Pt(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[r(this._container)]=this;var t=e?Bt:Rt;t(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&t(window,"resize",this._onResize,this),Ie.any3d&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){N(this._resizeRequest),this._resizeRequest=z((function(){this.invalidateSize({debounceMoveend:!0})}),this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,t){for(var n,i=[],a="mouseout"===t||"mouseover"===t,s=e.target||e.srcElement,o=!1;s;){if((n=this._targets[r(s)])&&("click"===t||"preclick"===t)&&this._draggableMoved(n)){o=!0;break}if(n&&n.listens(t,!0)){if(a&&!Xt(s,e))break;if(i.push(n),a)break}if(s===this._container)break;s=s.parentNode}return i.length||o||a||!this.listens(t,!0)||(i=[this]),i},_isClickDisabled:function(e){for(;e&&e!==this._container;){if(e._leaflet_disable_click)return!0;e=e.parentNode}},_handleDOMEvent:function(e){var t=e.target||e.srcElement;if(!(!this._loaded||t._leaflet_disable_events||"click"===e.type&&this._isClickDisabled(t))){var n=e.type;"mousedown"===n&&Tt(t),this._fireDOMEvent(e,n)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,t,i){if("click"===e.type){var a=n({},e);a.type="preclick",this._fireDOMEvent(a,a.type,i)}var s=this._findEventTargets(e,t);if(i){for(var r=[],o=0;o<i.length;o++)i[o].listens(t,!0)&&r.push(i[o]);s=r.concat(s)}if(s.length){"contextmenu"===t&&qt(e);var l=s[0],c={originalEvent:e};if("keypress"!==e.type&&"keydown"!==e.type&&"keyup"!==e.type){var d=l.getLatLng&&(!l._radius||l._radius<=10);c.containerPoint=d?this.latLngToContainerPoint(l.getLatLng()):this.mouseEventToContainerPoint(e),c.layerPoint=this.containerPointToLayerPoint(c.containerPoint),c.latlng=d?l.getLatLng():this.layerPointToLatLng(c.layerPoint)}for(o=0;o<s.length;o++)if(s[o].fire(t,c,!0),c.originalEvent._stopped||!1===s[o].options.bubblingMouseEvents&&-1!==v(this._mouseEvents,t))return}},_draggableMoved:function(e){return(e=e.dragging&&e.dragging.enabled()?e:this).dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,{target:this}):this.on("load",e,t),this},_getMapPanePos:function(){return St(this._mapPane)||new T(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){return(e&&void 0!==t?this._getNewPixelOrigin(e,t):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,t){var n=this.getSize()._divideBy(2);return this.project(e,t)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,t,n){var i=this._getNewPixelOrigin(n,t);return this.project(e,t)._subtract(i)},_latLngBoundsToNewLayerBounds:function(e,t,n){var i=this._getNewPixelOrigin(n,t);return R([this.project(e.getSouthWest(),t)._subtract(i),this.project(e.getNorthWest(),t)._subtract(i),this.project(e.getSouthEast(),t)._subtract(i),this.project(e.getNorthEast(),t)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,n){if(!n)return e;var i=this.project(e,t),a=this.getSize().divideBy(2),s=new I(i.subtract(a),i.add(a)),r=this._getBoundsOffset(s,n,t);return Math.abs(r.x)<=1&&Math.abs(r.y)<=1?e:this.unproject(i.add(r),t)},_limitOffset:function(e,t){if(!t)return e;var n=this.getPixelBounds(),i=new I(n.min.add(e),n.max.add(e));return e.add(this._getBoundsOffset(i,t))},_getBoundsOffset:function(e,t,n){var i=R(this.project(t.getNorthEast(),n),this.project(t.getSouthWest(),n)),a=i.min.subtract(e.min),s=i.max.subtract(e.max);return new T(this._rebound(a.x,-s.x),this._rebound(a.y,-s.y))},_rebound:function(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),n=this.getMaxZoom(),i=Ie.any3d?this.options.zoomSnap:1;return i&&(e=Math.round(e/i)*i),Math.max(t,Math.min(n,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){wt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var n=this._getCenterOffset(e)._trunc();return!(!0!==(t&&t.animate)&&!this.getSize().contains(n))&&(this.panBy(n,t),!0)},_createAnimProxy:function(){var e=this._proxy=pt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",(function(e){var t=lt,n=this._proxy.style[t];Nt(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),n===this._proxy.style[t]&&this._animatingZoom&&this._onZoomTransitionEnd()}),this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){mt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var e=this.getCenter(),t=this.getZoom();Nt(this._proxy,this.project(e,t),this.getZoomScale(t,1))},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(t),a=this._getCenterOffset(e)._divideBy(1-1/i);return!(!0!==n.animate&&!this.getSize().contains(a))&&(z((function(){this._moveStart(!0,n.noMoveStart||!1)._animateZoom(e,t,!0)}),this),!0)},_animateZoom:function(e,t,n,i){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,xt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:t,noUpdate:i}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&wt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function an(e,t){return new nn(e,t)}var sn=S.extend({options:{position:"topright"},initialize:function(e){p(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var t=this._container=this.onAdd(e),n=this.getPosition(),i=e._controlCorners[n];return xt(t,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(t,i.firstChild):i.appendChild(t),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(mt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),rn=function(e){return new sn(e)};nn.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var e=this._controlCorners={},t="leaflet-",n=this._controlContainer=pt("div",t+"control-container",this._container);function i(i,a){var s=t+i+" "+t+a;e[i+a]=pt("div",s,n)}i("top","left"),i("top","right"),i("bottom","left"),i("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)mt(this._controlCorners[e]);mt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var on=sn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,t,n,i){return n<i?-1:i<n?1:0}},initialize:function(e,t,n){for(var i in p(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,e)this._addLayer(e[i],i);for(i in t)this._addLayer(t[i],i,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return sn.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._map?this._update():this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var t=this._getLayer(r(e));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){xt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(xt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):wt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return wt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=pt("div",e),n=this.options.collapsed;t.setAttribute("aria-haspopup",!0),Ht(t),Vt(t);var i=this._section=pt("section",e+"-list");n&&(this._map.on("click",this.collapse,this),Rt(t,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var a=this._layersLink=pt("a",e+"-toggle",t);a.href="#",a.title="Layers",a.setAttribute("role","button"),Rt(a,{keydown:function(e){13===e.keyCode&&this._expandSafely()},click:function(e){qt(e),this._expandSafely()}},this),n||this.expand(),this._baseLayersList=pt("div",e+"-base",i),this._separator=pt("div",e+"-separator",i),this._overlaysList=pt("div",e+"-overlays",i),t.appendChild(i)},_getLayer:function(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t]&&r(this._layers[t].layer)===e)return this._layers[t]},_addLayer:function(e,t,n){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:t,overlay:n}),this.options.sortLayers&&this._layers.sort(a((function(e,t){return this.options.sortFunction(e.layer,t.layer,e.name,t.name)}),this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ft(this._baseLayersList),ft(this._overlaysList),this._layerControlInputs=[];var e,t,n,i,a=0;for(n=0;n<this._layers.length;n++)i=this._layers[n],this._addItem(i),t=t||i.overlay,e=e||!i.overlay,a+=i.overlay?0:1;return this.options.hideSingleBase&&(e=e&&a>1,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=t&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var t=this._getLayer(r(e.target)),n=t.overlay?"add"===e.type?"overlayadd":"overlayremove":"add"===e.type?"baselayerchange":null;n&&this._map.fire(n,t)},_createRadioElement:function(e,t){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(t?' checked="checked"':"")+"/>",i=document.createElement("div");return i.innerHTML=n,i.firstChild},_addItem:function(e){var t,n=document.createElement("label"),i=this._map.hasLayer(e.layer);e.overlay?((t=document.createElement("input")).type="checkbox",t.className="leaflet-control-layers-selector",t.defaultChecked=i):t=this._createRadioElement("leaflet-base-layers_"+r(this),i),this._layerControlInputs.push(t),t.layerId=r(e.layer),Rt(t,"click",this._onInputClick,this);var a=document.createElement("span");a.innerHTML=" "+e.name;var s=document.createElement("span");return n.appendChild(s),s.appendChild(t),s.appendChild(a),(e.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){if(!this._preventClick){var e,t,n=this._layerControlInputs,i=[],a=[];this._handlingClick=!0;for(var s=n.length-1;s>=0;s--)e=n[s],t=this._getLayer(e.layerId).layer,e.checked?i.push(t):e.checked||a.push(t);for(s=0;s<a.length;s++)this._map.hasLayer(a[s])&&this._map.removeLayer(a[s]);for(s=0;s<i.length;s++)this._map.hasLayer(i[s])||this._map.addLayer(i[s]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var e,t,n=this._layerControlInputs,i=this._map.getZoom(),a=n.length-1;a>=0;a--)e=n[a],t=this._getLayer(e.layerId).layer,e.disabled=void 0!==t.options.minZoom&&i<t.options.minZoom||void 0!==t.options.maxZoom&&i>t.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var e=this._section;this._preventClick=!0,Rt(e,"click",qt),this.expand();var t=this;setTimeout((function(){Bt(e,"click",qt),t._preventClick=!1}))}}),ln=function(e,t,n){return new on(e,t,n)},cn=sn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",n=pt("div",t+" leaflet-bar"),i=this.options;return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,t+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,t+"-out",n,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,t,n,i,a){var s=pt("a",n,i);return s.innerHTML=e,s.href="#",s.title=t,s.setAttribute("role","button"),s.setAttribute("aria-label",t),Ht(s),Rt(s,"click",Gt),Rt(s,"click",a,this),Rt(s,"click",this._refocusOnMap,this),s},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";wt(this._zoomInButton,t),wt(this._zoomOutButton,t),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||e._zoom===e.getMinZoom())&&(xt(this._zoomOutButton,t),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||e._zoom===e.getMaxZoom())&&(xt(this._zoomInButton,t),this._zoomInButton.setAttribute("aria-disabled","true"))}});nn.mergeOptions({zoomControl:!0}),nn.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new cn,this.addControl(this.zoomControl))}));var dn=function(e){return new cn(e)},un=sn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var t="leaflet-control-scale",n=pt("div",t),i=this.options;return this._addScales(i,t+"-line",n),e.on(i.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),n},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,n){e.metric&&(this._mScale=pt("div",t,n)),e.imperial&&(this._iScale=pt("div",t,n))},_update:function(){var e=this._map,t=e.getSize().y/2,n=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(n)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var t=this._getRoundNum(e),n=t<1e3?t+" m":t/1e3+" km";this._updateScale(this._mScale,n,t/e)},_updateImperial:function(e){var t,n,i,a=3.2808399*e;a>5280?(t=a/5280,n=this._getRoundNum(t),this._updateScale(this._iScale,n+" mi",n/t)):(i=this._getRoundNum(a),this._updateScale(this._iScale,i+" ft",i/a))},_updateScale:function(e,t,n){e.style.width=Math.round(this.options.maxWidth*n)+"px",e.innerHTML=t},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),n=e/t;return t*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),hn=function(e){return new un(e)},pn='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',mn=sn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ie.inlineSvg?pn+" ":"")+"Leaflet</a>"},initialize:function(e){p(this,e),this._attributions={}},onAdd:function(e){for(var t in e.attributionControl=this,this._container=pt("div","leaflet-control-attribution"),Ht(this._container),e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),e.on("layeradd",this._addAttribution,this),this._container},onRemove:function(e){e.off("layeradd",this._addAttribution,this)},_addAttribution:function(e){e.layer.getAttribution&&(this.addAttribution(e.layer.getAttribution()),e.layer.once("remove",(function(){this.removeAttribution(e.layer.getAttribution())}),this))},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var n=[];this.options.prefix&&n.push(this.options.prefix),e.length&&n.push(e.join(", ")),this._container.innerHTML=n.join(' <span aria-hidden="true">|</span> ')}}});nn.mergeOptions({attributionControl:!0}),nn.addInitHook((function(){this.options.attributionControl&&(new mn).addTo(this)}));var fn=function(e){return new mn(e)};sn.Layers=on,sn.Zoom=cn,sn.Scale=un,sn.Attribution=mn,rn.layers=ln,rn.zoom=dn,rn.scale=hn,rn.attribution=fn;var yn=S.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});yn.addTo=function(e,t){return e.addHandler(t,this),this};var gn={Events:M},vn=Ie.touch?"touchstart mousedown":"mousedown",xn=C.extend({options:{clickTolerance:3},initialize:function(e,t,n,i){p(this,i),this._element=e,this._dragStartTarget=t||e,this._preventOutline=n},enable:function(){this._enabled||(Rt(this._dragStartTarget,vn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(xn._dragging===this&&this.finishDrag(!0),Bt(this._dragStartTarget,vn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(this._enabled&&(this._moved=!1,!vt(this._element,"leaflet-zoom-anim")))if(e.touches&&1!==e.touches.length)xn._dragging===this&&this.finishDrag();else if(!(xn._dragging||e.shiftKey||1!==e.which&&1!==e.button&&!e.touches)&&(xn._dragging=this,this._preventOutline&&Tt(this._element),Mt(),it(),!this._moving)){this.fire("down");var t=e.touches?e.touches[0]:e,n=Ot(this._element);this._startPoint=new T(t.clientX,t.clientY),this._startPos=St(this._element),this._parentScale=At(n);var i="mousedown"===e.type;Rt(document,i?"mousemove":"touchmove",this._onMove,this),Rt(document,i?"mouseup":"touchend touchcancel",this._onUp,this)}},_onMove:function(e){if(this._enabled)if(e.touches&&e.touches.length>1)this._moved=!0;else{var t=e.touches&&1===e.touches.length?e.touches[0]:e,n=new T(t.clientX,t.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,qt(e),this._moved||(this.fire("dragstart"),this._moved=!0,xt(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),xt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,this._lastEvent=e,this._updatePosition()))}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),Pt(this._element,this._newPos),this.fire("drag",e)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(e){wt(document.body,"leaflet-dragging"),this._lastTarget&&(wt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Bt(document,"mousemove touchmove",this._onMove,this),Bt(document,"mouseup touchend touchcancel",this._onUp,this),Ct(),at();var t=this._moved&&this._moving;this._moving=!1,xn._dragging=!1,t&&this.fire("dragend",{noInertia:e,distance:this._newPos.distanceTo(this._startPos)})}});function wn(e,t,n){var i,a,s,r,o,l,c,d,u,h=[1,4,2,8];for(a=0,c=e.length;a<c;a++)e[a]._code=Ln(e[a],t);for(r=0;r<4;r++){for(d=h[r],i=[],a=0,s=(c=e.length)-1;a<c;s=a++)o=e[a],l=e[s],o._code&d?l._code&d||((u=Tn(l,o,d,t,n))._code=Ln(u,t),i.push(u)):(l._code&d&&((u=Tn(l,o,d,t,n))._code=Ln(u,t),i.push(u)),i.push(o));e=i}return e}function _n(e,t){var n,i,a,s,r,o,l,c,d;if(!e||0===e.length)throw new Error("latlngs not passed");In(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var u=F([0,0]),h=B(e);h.getNorthWest().distanceTo(h.getSouthWest())*h.getNorthEast().distanceTo(h.getNorthWest())<1700&&(u=bn(e));var p=e.length,m=[];for(n=0;n<p;n++){var f=F(e[n]);m.push(t.project(F([f.lat-u.lat,f.lng-u.lng])))}for(o=l=c=0,n=0,i=p-1;n<p;i=n++)a=m[n],s=m[i],r=a.y*s.x-s.y*a.x,l+=(a.x+s.x)*r,c+=(a.y+s.y)*r,o+=3*r;d=0===o?m[0]:[l/o,c/o];var y=t.unproject(A(d));return F([y.lat+u.lat,y.lng+u.lng])}function bn(e){for(var t=0,n=0,i=0,a=0;a<e.length;a++){var s=F(e[a]);t+=s.lat,n+=s.lng,i++}return F([t/i,n/i])}var jn,kn={__proto__:null,clipPolygon:wn,polygonCenter:_n,centroid:bn};function zn(e,t){if(!t||!e.length)return e.slice();var n=t*t;return e=Sn(e=Mn(e,n),n)}function Nn(e,t,n){return Math.sqrt(An(e,t,n,!0))}function Pn(e,t,n){return An(e,t,n)}function Sn(e,t){var n=e.length,i=new(typeof Uint8Array!==void 0+""?Uint8Array:Array)(n);i[0]=i[n-1]=1,En(e,i,t,0,n-1);var a,s=[];for(a=0;a<n;a++)i[a]&&s.push(e[a]);return s}function En(e,t,n,i,a){var s,r,o,l=0;for(r=i+1;r<=a-1;r++)(o=An(e[r],e[i],e[a],!0))>l&&(s=r,l=o);l>n&&(t[s]=1,En(e,t,n,i,s),En(e,t,n,s,a))}function Mn(e,t){for(var n=[e[0]],i=1,a=0,s=e.length;i<s;i++)On(e[i],e[a])>t&&(n.push(e[i]),a=i);return a<s-1&&n.push(e[s-1]),n}function Cn(e,t,n,i,a){var s,r,o,l=i?jn:Ln(e,n),c=Ln(t,n);for(jn=c;;){if(!(l|c))return[e,t];if(l&c)return!1;o=Ln(r=Tn(e,t,s=l||c,n,a),n),s===l?(e=r,l=o):(t=r,c=o)}}function Tn(e,t,n,i,a){var s,r,o=t.x-e.x,l=t.y-e.y,c=i.min,d=i.max;return 8&n?(s=e.x+o*(d.y-e.y)/l,r=d.y):4&n?(s=e.x+o*(c.y-e.y)/l,r=c.y):2&n?(s=d.x,r=e.y+l*(d.x-e.x)/o):1&n&&(s=c.x,r=e.y+l*(c.x-e.x)/o),new T(s,r,a)}function Ln(e,t){var n=0;return e.x<t.min.x?n|=1:e.x>t.max.x&&(n|=2),e.y<t.min.y?n|=4:e.y>t.max.y&&(n|=8),n}function On(e,t){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i}function An(e,t,n,i){var a,s=t.x,r=t.y,o=n.x-s,l=n.y-r,c=o*o+l*l;return c>0&&((a=((e.x-s)*o+(e.y-r)*l)/c)>1?(s=n.x,r=n.y):a>0&&(s+=o*a,r+=l*a)),o=e.x-s,l=e.y-r,i?o*o+l*l:new T(s,r)}function In(e){return!g(e[0])||"object"!==typeof e[0][0]&&"undefined"!==typeof e[0][0]}function Rn(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),In(e)}function Dn(e,t){var n,i,a,s,r,o,l,c;if(!e||0===e.length)throw new Error("latlngs not passed");In(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var d=F([0,0]),u=B(e);u.getNorthWest().distanceTo(u.getSouthWest())*u.getNorthEast().distanceTo(u.getNorthWest())<1700&&(d=bn(e));var h=e.length,p=[];for(n=0;n<h;n++){var m=F(e[n]);p.push(t.project(F([m.lat-d.lat,m.lng-d.lng])))}for(n=0,i=0;n<h-1;n++)i+=p[n].distanceTo(p[n+1])/2;if(0===i)c=p[0];else for(n=0,s=0;n<h-1;n++)if(r=p[n],o=p[n+1],(s+=a=r.distanceTo(o))>i){l=(s-i)/a,c=[o.x-l*(o.x-r.x),o.y-l*(o.y-r.y)];break}var f=t.unproject(A(c));return F([f.lat+d.lat,f.lng+d.lng])}var Bn={__proto__:null,simplify:zn,pointToSegmentDistance:Nn,closestPointOnSegment:Pn,clipSegment:Cn,_getEdgeIntersection:Tn,_getBitCode:Ln,_sqClosestPointOnSegment:An,isFlat:In,_flat:Rn,polylineCenter:Dn},Wn={project:function(e){return new T(e.lng,e.lat)},unproject:function(e){return new W(e.y,e.x)},bounds:new I([-180,-90],[180,90])},Fn={R:6378137,R_MINOR:6356752.314245179,bounds:new I([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(e){var t=Math.PI/180,n=this.R,i=e.lat*t,a=this.R_MINOR/n,s=Math.sqrt(1-a*a),r=s*Math.sin(i),o=Math.tan(Math.PI/4-i/2)/Math.pow((1-r)/(1+r),s/2);return i=-n*Math.log(Math.max(o,1e-10)),new T(e.lng*t*n,i)},unproject:function(e){for(var t,n=180/Math.PI,i=this.R,a=this.R_MINOR/i,s=Math.sqrt(1-a*a),r=Math.exp(-e.y/i),o=Math.PI/2-2*Math.atan(r),l=0,c=.1;l<15&&Math.abs(c)>1e-7;l++)t=s*Math.sin(o),t=Math.pow((1-t)/(1+t),s/2),o+=c=Math.PI/2-2*Math.atan(r*t)-o;return new W(o*n,e.x*n/i)}},Zn={__proto__:null,LonLat:Wn,Mercator:Fn,SphericalMercator:V},Un=n({},U,{code:"EPSG:3395",projection:Fn,transformation:function(){var e=.5/(Math.PI*Fn.R);return q(e,.5,-e,.5)}()}),$n=n({},U,{code:"EPSG:4326",projection:Wn,transformation:q(1/180,1,-1/180,.5)}),Vn=n({},Z,{projection:Wn,transformation:q(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,t){var n=t.lng-e.lng,i=t.lat-e.lat;return Math.sqrt(n*n+i*i)},infinite:!0});Z.Earth=U,Z.EPSG3395=Un,Z.EPSG3857=G,Z.EPSG900913=K,Z.EPSG4326=$n,Z.Simple=Vn;var Hn=C.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[r(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[r(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var t=e.target;if(t.hasLayer(this)){if(this._map=t,this._zoomAnimated=t._zoomAnimated,this.getEvents){var n=this.getEvents();t.on(n,this),this.once("remove",(function(){t.off(n,this)}),this)}this.onAdd(t),this.fire("add"),t.fire("layeradd",{layer:this})}}});nn.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var t=r(e);return this._layers[t]||(this._layers[t]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e)),this},removeLayer:function(e){var t=r(e);return this._layers[t]?(this._loaded&&e.onRemove(this),delete this._layers[t],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return r(e)in this._layers},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},_addLayers:function(e){for(var t=0,n=(e=e?g(e)?e:[e]:[]).length;t<n;t++)this.addLayer(e[t])},_addZoomLimit:function(e){isNaN(e.options.maxZoom)&&isNaN(e.options.minZoom)||(this._zoomBoundLayers[r(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var t=r(e);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,t=-1/0,n=this._getZoomSpan();for(var i in this._zoomBoundLayers){var a=this._zoomBoundLayers[i].options;e=void 0===a.minZoom?e:Math.min(e,a.minZoom),t=void 0===a.maxZoom?t:Math.max(t,a.maxZoom)}this._layersMaxZoom=t===-1/0?void 0:t,this._layersMinZoom=e===1/0?void 0:e,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var qn=Hn.extend({initialize:function(e,t){var n,i;if(p(this,t),this._layers={},e)for(n=0,i=e.length;n<i;n++)this.addLayer(e[n])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){return("number"===typeof e?e:this.getLayerId(e))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var t,n,i=Array.prototype.slice.call(arguments,1);for(t in this._layers)(n=this._layers[t])[e]&&n[e].apply(n,i);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return r(e)}}),Gn=function(e,t){return new qn(e,t)},Kn=qn.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),qn.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),qn.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new D;for(var t in this._layers){var n=this._layers[t];e.extend(n.getBounds?n.getBounds():n.getLatLng())}return e}}),Jn=function(e,t){return new Kn(e,t)},Yn=S.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(e){p(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var n=this._getIconUrl(e);if(!n){if("icon"===e)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(n,t&&"IMG"===t.tagName?t:null);return this._setIconStyles(i,e),(this.options.crossOrigin||""===this.options.crossOrigin)&&(i.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),i},_setIconStyles:function(e,t){var n=this.options,i=n[t+"Size"];"number"===typeof i&&(i=[i,i]);var a=A(i),s=A("shadow"===t&&n.shadowAnchor||n.iconAnchor||a&&a.divideBy(2,!0));e.className="leaflet-marker-"+t+" "+(n.className||""),s&&(e.style.marginLeft=-s.x+"px",e.style.marginTop=-s.y+"px"),a&&(e.style.width=a.x+"px",e.style.height=a.y+"px")},_createImg:function(e,t){return(t=t||document.createElement("img")).src=e,t},_getIconUrl:function(e){return Ie.retina&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}});function Qn(e){return new Yn(e)}var Xn=Yn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return"string"!==typeof Xn.imagePath&&(Xn.imagePath=this._detectIconPath()),(this.options.imagePath||Xn.imagePath)+Yn.prototype._getIconUrl.call(this,e)},_stripUrl:function(e){var t=function(e,t,n){var i=t.exec(e);return i&&i[n]};return(e=t(e,/^url\((['"])?(.+)\1\)$/,2))&&t(e,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var e=pt("div","leaflet-default-icon-path",document.body),t=ht(e,"background-image")||ht(e,"backgroundImage");if(document.body.removeChild(e),t=this._stripUrl(t))return t;var n=document.querySelector('link[href$="leaflet.css"]');return n?n.href.substring(0,n.href.length-11-1):""}}),ei=yn.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new xn(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),xt(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&wt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var t=this._marker,n=t._map,i=this._marker.options.autoPanSpeed,a=this._marker.options.autoPanPadding,s=St(t._icon),r=n.getPixelBounds(),o=n.getPixelOrigin(),l=R(r.min._subtract(o).add(a),r.max._subtract(o).subtract(a));if(!l.contains(s)){var c=A((Math.max(l.max.x,s.x)-l.max.x)/(r.max.x-l.max.x)-(Math.min(l.min.x,s.x)-l.min.x)/(r.min.x-l.min.x),(Math.max(l.max.y,s.y)-l.max.y)/(r.max.y-l.max.y)-(Math.min(l.min.y,s.y)-l.min.y)/(r.min.y-l.min.y)).multiplyBy(i);n.panBy(c,{animate:!1}),this._draggable._newPos._add(c),this._draggable._startPos._add(c),Pt(t._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=z(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(N(this._panRequest),this._panRequest=z(this._adjustPan.bind(this,e)))},_onDrag:function(e){var t=this._marker,n=t._shadow,i=St(t._icon),a=t._map.layerPointToLatLng(i);n&&Pt(n,i),t._latlng=a,e.latlng=a,e.oldLatLng=this._oldLatLng,t.fire("move",e).fire("drag",e)},_onDragEnd:function(e){N(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),ti=Hn.extend({options:{icon:new Xn,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,t){p(this,t),this._latlng=F(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;return this._latlng=F(e),this.update(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=e.icon.createIcon(this._icon),i=!1;n!==this._icon&&(this._icon&&this._removeIcon(),i=!0,e.title&&(n.title=e.title),"IMG"===n.tagName&&(n.alt=e.alt||"")),xt(n,t),e.keyboard&&(n.tabIndex="0",n.setAttribute("role","button")),this._icon=n,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Rt(n,"focus",this._panOnFocus,this);var a=e.icon.createShadow(this._shadow),s=!1;a!==this._shadow&&(this._removeShadow(),s=!0),a&&(xt(a,t),a.alt=""),this._shadow=a,e.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),a&&s&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Bt(this._icon,"focus",this._panOnFocus,this),mt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&mt(this._shadow),this._shadow=null},_setPos:function(e){this._icon&&Pt(this._icon,e),this._shadow&&Pt(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.interactive&&(xt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),ei)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new ei(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;this._icon&&jt(this._icon,e),this._shadow&&jt(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var e=this._map;if(e){var t=this.options.icon.options,n=t.iconSize?A(t.iconSize):A(0,0),i=t.iconAnchor?A(t.iconAnchor):A(0,0);e.panInside(this._latlng,{paddingTopLeft:i,paddingBottomRight:n.subtract(i)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ni(e,t){return new ti(e,t)}var ii=Hn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return p(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&Object.prototype.hasOwnProperty.call(e,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ai=ii.extend({options:{fill:!0,radius:10},initialize:function(e,t){p(this,t),this._latlng=F(e),this._radius=this.options.radius},setLatLng:function(e){var t=this._latlng;return this._latlng=F(e),this.redraw(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;return ii.prototype.setStyle.call(this,e),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,t=this._radiusY||e,n=this._clickTolerance(),i=[e+n,t+n];this._pxBounds=new I(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function si(e,t){return new ai(e,t)}var ri=ai.extend({initialize:function(e,t,i){if("number"===typeof t&&(t=n({},i,{radius:t})),p(this,t),this._latlng=F(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new D(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:ii.prototype.setStyle,_project:function(){var e=this._latlng.lng,t=this._latlng.lat,n=this._map,i=n.options.crs;if(i.distance===U.distance){var a=Math.PI/180,s=this._mRadius/U.R/a,r=n.project([t+s,e]),o=n.project([t-s,e]),l=r.add(o).divideBy(2),c=n.unproject(l).lat,d=Math.acos((Math.cos(s*a)-Math.sin(t*a)*Math.sin(c*a))/(Math.cos(t*a)*Math.cos(c*a)))/a;(isNaN(d)||0===d)&&(d=s/Math.cos(Math.PI/180*t)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(d)?0:l.x-n.project([c,e-d]).x,this._radiusY=l.y-r.y}else{var u=i.unproject(i.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(u).x}this._updateBounds()}});function oi(e,t,n){return new ri(e,t,n)}var li=ii.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,t){p(this,t),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var t,n,i=1/0,a=null,s=An,r=0,o=this._parts.length;r<o;r++)for(var l=this._parts[r],c=1,d=l.length;c<d;c++){var u=s(e,t=l[c-1],n=l[c],!0);u<i&&(i=u,a=s(e,t,n))}return a&&(a.distance=Math.sqrt(i)),a},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Dn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(e,t){return t=t||this._defaultShape(),e=F(e),t.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new D,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return In(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var t=[],n=In(e),i=0,a=e.length;i<a;i++)n?(t[i]=F(e[i]),this._bounds.extend(t[i])):t[i]=this._convertLatLngs(e[i]);return t},_project:function(){var e=new I;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds:function(){var e=this._clickTolerance(),t=new T(e,e);this._rawPxBounds&&(this._pxBounds=new I([this._rawPxBounds.min.subtract(t),this._rawPxBounds.max.add(t)]))},_projectLatlngs:function(e,t,n){var i,a,s=e[0]instanceof W,r=e.length;if(s){for(a=[],i=0;i<r;i++)a[i]=this._map.latLngToLayerPoint(e[i]),n.extend(a[i]);t.push(a)}else for(i=0;i<r;i++)this._projectLatlngs(e[i],t,n)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else{var t,n,i,a,s,r,o,l=this._parts;for(t=0,i=0,a=this._rings.length;t<a;t++)for(n=0,s=(o=this._rings[t]).length;n<s-1;n++)(r=Cn(o[n],o[n+1],e,n,!0))&&(l[i]=l[i]||[],l[i].push(r[0]),r[1]===o[n+1]&&n!==s-2||(l[i].push(r[1]),i++))}},_simplifyPoints:function(){for(var e=this._parts,t=this.options.smoothFactor,n=0,i=e.length;n<i;n++)e[n]=zn(e[n],t)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,t){var n,i,a,s,r,o,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(n=0,s=this._parts.length;n<s;n++)for(i=0,a=(r=(o=this._parts[n]).length)-1;i<r;a=i++)if((t||0!==i)&&Nn(e,o[a],o[i])<=l)return!0;return!1}});function ci(e,t){return new li(e,t)}li._flat=Rn;var di=li.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return _n(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(e){var t=li.prototype._convertLatLngs.call(this,e),n=t.length;return n>=2&&t[0]instanceof W&&t[0].equals(t[n-1])&&t.pop(),t},_setLatLngs:function(e){li.prototype._setLatLngs.call(this,e),In(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return In(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,t=this.options.weight,n=new T(t,t);if(e=new I(e.min.subtract(n),e.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else for(var i,a=0,s=this._rings.length;a<s;a++)(i=wn(this._rings[a],e,!0)).length&&this._parts.push(i)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var t,n,i,a,s,r,o,l,c=!1;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(a=0,o=this._parts.length;a<o;a++)for(s=0,r=(l=(t=this._parts[a]).length)-1;s<l;r=s++)n=t[s],i=t[r],n.y>e.y!==i.y>e.y&&e.x<(i.x-n.x)*(e.y-n.y)/(i.y-n.y)+n.x&&(c=!c);return c||li.prototype._containsPoint.call(this,e,!0)}});function ui(e,t){return new di(e,t)}var hi=Kn.extend({initialize:function(e,t){p(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t,n,i,a=g(e)?e:e.features;if(a){for(t=0,n=a.length;t<n;t++)((i=a[t]).geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var s=this.options;if(s.filter&&!s.filter(e))return this;var r=pi(e,s);return r?(r.feature=wi(e),r.defaultOptions=r.options,this.resetStyle(r),s.onEachFeature&&s.onEachFeature(e,r),this.addLayer(r)):this},resetStyle:function(e){return void 0===e?this.eachLayer(this.resetStyle,this):(e.options=n({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},setStyle:function(e){return this.eachLayer((function(t){this._setLayerStyle(t,e)}),this)},_setLayerStyle:function(e,t){e.setStyle&&("function"===typeof t&&(t=t(e.feature)),e.setStyle(t))}});function pi(e,t){var n,i,a,s,r="Feature"===e.type?e.geometry:e,o=r?r.coordinates:null,l=[],c=t&&t.pointToLayer,d=t&&t.coordsToLatLng||fi;if(!o&&!r)return null;switch(r.type){case"Point":return mi(c,e,n=d(o),t);case"MultiPoint":for(a=0,s=o.length;a<s;a++)n=d(o[a]),l.push(mi(c,e,n,t));return new Kn(l);case"LineString":case"MultiLineString":return i=yi(o,"LineString"===r.type?0:1,d),new li(i,t);case"Polygon":case"MultiPolygon":return i=yi(o,"Polygon"===r.type?1:2,d),new di(i,t);case"GeometryCollection":for(a=0,s=r.geometries.length;a<s;a++){var u=pi({geometry:r.geometries[a],type:"Feature",properties:e.properties},t);u&&l.push(u)}return new Kn(l);case"FeatureCollection":for(a=0,s=r.features.length;a<s;a++){var h=pi(r.features[a],t);h&&l.push(h)}return new Kn(l);default:throw new Error("Invalid GeoJSON object.")}}function mi(e,t,n,i){return e?e(t,n):new ti(n,i&&i.markersInheritOptions&&i)}function fi(e){return new W(e[1],e[0],e[2])}function yi(e,t,n){for(var i,a=[],s=0,r=e.length;s<r;s++)i=t?yi(e[s],t-1,n):(n||fi)(e[s]),a.push(i);return a}function gi(e,t){return void 0!==(e=F(e)).alt?[d(e.lng,t),d(e.lat,t),d(e.alt,t)]:[d(e.lng,t),d(e.lat,t)]}function vi(e,t,n,i){for(var a=[],s=0,r=e.length;s<r;s++)a.push(t?vi(e[s],In(e[s])?0:t-1,n,i):gi(e[s],i));return!t&&n&&a.length>0&&a.push(a[0].slice()),a}function xi(e,t){return e.feature?n({},e.feature,{geometry:t}):wi(t)}function wi(e){return"Feature"===e.type||"FeatureCollection"===e.type?e:{type:"Feature",properties:{},geometry:e}}var _i={toGeoJSON:function(e){return xi(this,{type:"Point",coordinates:gi(this.getLatLng(),e)})}};function bi(e,t){return new hi(e,t)}ti.include(_i),ri.include(_i),ai.include(_i),li.include({toGeoJSON:function(e){var t=!In(this._latlngs);return xi(this,{type:(t?"Multi":"")+"LineString",coordinates:vi(this._latlngs,t?1:0,!1,e)})}}),di.include({toGeoJSON:function(e){var t=!In(this._latlngs),n=t&&!In(this._latlngs[0]),i=vi(this._latlngs,n?2:t?1:0,!0,e);return t||(i=[i]),xi(this,{type:(n?"Multi":"")+"Polygon",coordinates:i})}}),qn.include({toMultiPoint:function(e){var t=[];return this.eachLayer((function(n){t.push(n.toGeoJSON(e).geometry.coordinates)})),xi(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(e){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint(e);var n="GeometryCollection"===t,i=[];return this.eachLayer((function(t){if(t.toGeoJSON){var a=t.toGeoJSON(e);if(n)i.push(a.geometry);else{var s=wi(a);"FeatureCollection"===s.type?i.push.apply(i,s.features):i.push(s)}}})),n?xi(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}});var ji=bi,ki=Hn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,t,n){this._url=e,this._bounds=B(t),p(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(xt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){mt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&yt(this._image),this},bringToBack:function(){return this._map&&gt(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=B(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e="IMG"===this._url.tagName,t=this._image=e?this._url:pt("img");xt(t,"leaflet-image-layer"),this._zoomAnimated&&xt(t,"leaflet-zoom-animated"),this.options.className&&xt(t,this.options.className),t.onselectstart=c,t.onmousemove=c,t.onload=a(this.fire,this,"load"),t.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(t.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e?this._url=t.src:(t.src=this._url,t.alt=this.options.alt)},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;Nt(this._image,n,t)},_reset:function(){var e=this._image,t=new I(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=t.getSize();Pt(e,t.min),e.style.width=n.x+"px",e.style.height=n.y+"px"},_updateOpacity:function(){jt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)},getCenter:function(){return this._bounds.getCenter()}}),zi=function(e,t,n){return new ki(e,t,n)},Ni=ki.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var e="VIDEO"===this._url.tagName,t=this._image=e?this._url:pt("video");if(xt(t,"leaflet-image-layer"),this._zoomAnimated&&xt(t,"leaflet-zoom-animated"),this.options.className&&xt(t,this.options.className),t.onselectstart=c,t.onmousemove=c,t.onloadeddata=a(this.fire,this,"load"),e){for(var n=t.getElementsByTagName("source"),i=[],s=0;s<n.length;s++)i.push(n[s].src);this._url=n.length>0?i:[t.src]}else{g(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(t.style,"objectFit")&&(t.style.objectFit="fill"),t.autoplay=!!this.options.autoplay,t.loop=!!this.options.loop,t.muted=!!this.options.muted,t.playsInline=!!this.options.playsInline;for(var r=0;r<this._url.length;r++){var o=pt("source");o.src=this._url[r],t.appendChild(o)}}}});function Pi(e,t,n){return new Ni(e,t,n)}var Si=ki.extend({_initImage:function(){var e=this._image=this._url;xt(e,"leaflet-image-layer"),this._zoomAnimated&&xt(e,"leaflet-zoom-animated"),this.options.className&&xt(e,this.options.className),e.onselectstart=c,e.onmousemove=c}});function Ei(e,t,n){return new Si(e,t,n)}var Mi=Hn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(e,t){e&&(e instanceof W||g(e))?(this._latlng=F(e),p(this,t)):(p(this,e),this._source=t),this.options.content&&(this._content=this.options.content)},openOn:function(e){return(e=arguments.length?e:this._source._map).hasLayer(this)||e.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(e){return this._map?this.close():(arguments.length?this._source=e:e=this._source,this._prepareOpen(),this.openOn(e._map)),this},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&jt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&jt(this._container,1),this.bringToFront(),this.options.interactive&&(xt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(e){e._fadeAnimated?(jt(this._container,0),this._removeTimeout=setTimeout(a(mt,void 0,this._container),200)):mt(this._container),this.options.interactive&&(wt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=F(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&yt(this._container),this},bringToBack:function(){return this._map&&gt(this._container),this},_prepareOpen:function(e){var t=this._source;if(!t._map)return!1;if(t instanceof Kn){t=null;var n=this._source._layers;for(var i in n)if(n[i]._map){t=n[i];break}if(!t)return!1;this._source=t}if(!e)if(t.getCenter)e=t.getCenter();else if(t.getLatLng)e=t.getLatLng();else{if(!t.getBounds)throw new Error("Unable to get source layer LatLng.");e=t.getBounds().getCenter()}return this.setLatLng(e),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var e=this._contentNode,t="function"===typeof this._content?this._content(this._source||this):this._content;if("string"===typeof t)e.innerHTML=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=A(this.options.offset),n=this._getAnchor();this._zoomAnimated?Pt(this._container,e.add(n)):t=t.add(e).add(n);var i=this._containerBottom=-t.y,a=this._containerLeft=-Math.round(this._containerWidth/2)+t.x;this._container.style.bottom=i+"px",this._container.style.left=a+"px"}},_getAnchor:function(){return[0,0]}});nn.include({_initOverlay:function(e,t,n,i){var a=t;return a instanceof e||(a=new e(i).setContent(t)),n&&a.setLatLng(n),a}}),Hn.include({_initOverlay:function(e,t,n,i){var a=n;return a instanceof e?(p(a,i),a._source=this):(a=t&&!i?t:new e(i,this)).setContent(n),a}});var Ci=Mi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return!(e=arguments.length?e:this._source._map).hasLayer(this)&&e._popup&&e._popup.options.autoClose&&e.removeLayer(e._popup),e._popup=this,Mi.prototype.openOn.call(this,e)},onAdd:function(e){Mi.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ii||this._source.on("preclick",$t))},onRemove:function(e){Mi.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ii||this._source.off("preclick",$t))},getEvents:function(){var e=Mi.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this.close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_initLayout:function(){var e="leaflet-popup",t=this._container=pt("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=pt("div",e+"-content-wrapper",t);if(this._contentNode=pt("div",e+"-content",n),Ht(t),Vt(this._contentNode),Rt(t,"contextmenu",$t),this._tipContainer=pt("div",e+"-tip-container",t),this._tip=pt("div",e+"-tip",this._tipContainer),this.options.closeButton){var i=this._closeButton=pt("a",e+"-close-button",t);i.setAttribute("role","button"),i.setAttribute("aria-label","Close popup"),i.href="#close",i.innerHTML='<span aria-hidden="true">&#215;</span>',Rt(i,"click",(function(e){qt(e),this.close()}),this)}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var n=e.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),t.width=n+1+"px",t.whiteSpace="",t.height="";var i=e.offsetHeight,a=this.options.maxHeight,s="leaflet-popup-scrolled";a&&i>a?(t.height=a+"px",xt(e,s)):wt(e,s),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),n=this._getAnchor();Pt(this._container,t.add(n))},_adjustPan:function(){if(this.options.autoPan)if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning)this._autopanning=!1;else{var e=this._map,t=parseInt(ht(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+t,i=this._containerWidth,a=new T(this._containerLeft,-n-this._containerBottom);a._add(St(this._container));var s=e.layerPointToContainerPoint(a),r=A(this.options.autoPanPadding),o=A(this.options.autoPanPaddingTopLeft||r),l=A(this.options.autoPanPaddingBottomRight||r),c=e.getSize(),d=0,u=0;s.x+i+l.x>c.x&&(d=s.x+i-c.x+l.x),s.x-d-o.x<0&&(d=s.x-o.x),s.y+n+l.y>c.y&&(u=s.y+n-c.y+l.y),s.y-u-o.y<0&&(u=s.y-o.y),(d||u)&&(this.options.keepInView&&(this._autopanning=!0),e.fire("autopanstart").panBy([d,u]))}},_getAnchor:function(){return A(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Ti=function(e,t){return new Ci(e,t)};nn.mergeOptions({closePopupOnClick:!0}),nn.include({openPopup:function(e,t,n){return this._initOverlay(Ci,e,t,n).openOn(this),this},closePopup:function(e){return(e=arguments.length?e:this._popup)&&e.close(),this}}),Hn.include({bindPopup:function(e,t){return this._popup=this._initOverlay(Ci,this._popup,e,t),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e){return this._popup&&(this instanceof Kn||(this._popup._source=this),this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){if(this._popup&&this._map){Gt(e);var t=e.layer||e.target;this._popup._source!==t||t instanceof ii?(this._popup._source=t,this.openPopup(e.latlng)):this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(e.latlng)}},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){13===e.originalEvent.keyCode&&this._openPopup(e)}});var Li=Mi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(e){Mi.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(e){Mi.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var e=Mi.prototype.getEvents.call(this);return this.options.permanent||(e.preclick=this.close),e},_initLayout:function(){var e="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=pt("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+r(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var t,n,i=this._map,a=this._container,s=i.latLngToContainerPoint(i.getCenter()),r=i.layerPointToContainerPoint(e),o=this.options.direction,l=a.offsetWidth,c=a.offsetHeight,d=A(this.options.offset),u=this._getAnchor();"top"===o?(t=l/2,n=c):"bottom"===o?(t=l/2,n=0):"center"===o?(t=l/2,n=c/2):"right"===o?(t=0,n=c/2):"left"===o?(t=l,n=c/2):r.x<s.x?(o="right",t=0,n=c/2):(o="left",t=l+2*(d.x+u.x),n=c/2),e=e.subtract(A(t,n,!0)).add(d).add(u),wt(a,"leaflet-tooltip-right"),wt(a,"leaflet-tooltip-left"),wt(a,"leaflet-tooltip-top"),wt(a,"leaflet-tooltip-bottom"),xt(a,"leaflet-tooltip-"+o),Pt(a,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&jt(this._container,e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(t)},_getAnchor:function(){return A(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Oi=function(e,t){return new Li(e,t)};nn.include({openTooltip:function(e,t,n){return this._initOverlay(Li,e,t,n).openOn(this),this},closeTooltip:function(e){return e.close(),this}}),Hn.include({bindTooltip:function(e,t){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Li,this._tooltip,e,t),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(e||!this._tooltipHandlersAdded){var t=e?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,n.click=this._openTooltip,this._map?this._addFocusListeners():n.add=this._addFocusListeners),this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),this[t](n),this._tooltipHandlersAdded=!e}},openTooltip:function(e){return this._tooltip&&(this instanceof Kn||(this._tooltip._source=this),this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(e){var t="function"===typeof e.getElement&&e.getElement();t&&(Rt(t,"focus",(function(){this._tooltip._source=e,this.openTooltip()}),this),Rt(t,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(e){var t="function"===typeof e.getElement&&e.getElement();t&&t.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(e){if(this._tooltip&&this._map)if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var t=this;this._map.once("moveend",(function(){t._openOnceFlag=!1,t._openTooltip(e)}))}else this._tooltip._source=e.layer||e.target,this.openTooltip(this._tooltip.options.sticky?e.latlng:void 0)},_moveTooltip:function(e){var t,n,i=e.latlng;this._tooltip.options.sticky&&e.originalEvent&&(t=this._map.mouseEventToContainerPoint(e.originalEvent),n=this._map.containerPointToLayerPoint(t),i=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(i)}});var Ai=Yn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var t=e&&"DIV"===e.tagName?e:document.createElement("div"),n=this.options;if(n.html instanceof Element?(ft(t),t.appendChild(n.html)):t.innerHTML=!1!==n.html?n.html:"",n.bgPos){var i=A(n.bgPos);t.style.backgroundPosition=-i.x+"px "+-i.y+"px"}return this._setIconStyles(t,"icon"),t},createShadow:function(){return null}});function Ii(e){return new Ai(e)}Yn.Default=Xn;var Ri=Hn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ie.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){p(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),mt(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(yt(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(gt(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var e=this._clampZoom(this._map.getZoom());e!==this._tileZoom&&(this._tileZoom=e,this._updateLevels()),this._update()}return this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=o(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof T?e:new T(e,e)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var t,n=this.getPane().children,i=-e(-1/0,1/0),a=0,s=n.length;a<s;a++)t=n[a].style.zIndex,n[a]!==this._container&&t&&(i=e(i,+t));isFinite(i)&&(this.options.zIndex=i+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ie.ielt9){jt(this._container,this.options.opacity);var e=+new Date,t=!1,n=!1;for(var i in this._tiles){var a=this._tiles[i];if(a.current&&a.loaded){var s=Math.min(1,(e-a.loaded)/200);jt(a.el,s),s<1?t=!0:(a.active?n=!0:this._onOpaqueTile(a),a.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),t&&(N(this._fadeFrame),this._fadeFrame=z(this._updateOpacity,this))}},_onOpaqueTile:c,_initContainer:function(){this._container||(this._container=pt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,t=this.options.maxZoom;if(void 0!==e){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===e?(this._levels[n].el.style.zIndex=t-Math.abs(e-n),this._onUpdateLevel(n)):(mt(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var i=this._levels[e],a=this._map;return i||((i=this._levels[e]={}).el=pt("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=t,i.origin=a.project(a.unproject(a.getPixelOrigin()),e).round(),i.zoom=e,this._setZoomTransform(i,a.getCenter(),a.getZoom()),c(i.el.offsetWidth),this._onCreateLevel(i)),this._level=i,i}},_onUpdateLevel:c,_onRemoveLevel:c,_onCreateLevel:c,_pruneTiles:function(){if(this._map){var e,t,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(e in this._tiles)(t=this._tiles[e]).retain=t.current;for(e in this._tiles)if((t=this._tiles[e]).current&&!t.active){var i=t.coords;this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}}},_removeTilesAtZoom:function(e){for(var t in this._tiles)this._tiles[t].coords.z===e&&this._removeTile(t)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)mt(this._levels[e].el),this._onRemoveLevel(Number(e)),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,t,n,i){var a=Math.floor(e/2),s=Math.floor(t/2),r=n-1,o=new T(+a,+s);o.z=+r;var l=this._tileCoordsToKey(o),c=this._tiles[l];return c&&c.active?(c.retain=!0,!0):(c&&c.loaded&&(c.retain=!0),r>i&&this._retainParent(a,s,r,i))},_retainChildren:function(e,t,n,i){for(var a=2*e;a<2*e+2;a++)for(var s=2*t;s<2*t+2;s++){var r=new T(a,s);r.z=n+1;var o=this._tileCoordsToKey(r),l=this._tiles[o];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),n+1<i&&this._retainChildren(a,s,n+1,i))}},_resetView:function(e){var t=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var t=this.options;return void 0!==t.minNativeZoom&&e<t.minNativeZoom?t.minNativeZoom:void 0!==t.maxNativeZoom&&t.maxNativeZoom<e?t.maxNativeZoom:e},_setView:function(e,t,n,i){var a=Math.round(t);a=void 0!==this.options.maxZoom&&a>this.options.maxZoom||void 0!==this.options.minZoom&&a<this.options.minZoom?void 0:this._clampZoom(a);var s=this.options.updateWhenZooming&&a!==this._tileZoom;i&&!s||(this._tileZoom=a,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==a&&this._update(e),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(e,t)},_setZoomTransforms:function(e,t){for(var n in this._levels)this._setZoomTransform(this._levels[n],e,t)},_setZoomTransform:function(e,t,n){var i=this._map.getZoomScale(n,e.zoom),a=e.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(t,n)).round();Ie.any3d?Nt(e.el,a,i):Pt(e.el,a)},_resetGrid:function(){var e=this._map,t=e.options.crs,n=this._tileSize=this.getTileSize(),i=this._tileZoom,a=this._map.getPixelWorldBounds(this._tileZoom);a&&(this._globalTileRange=this._pxBoundsToTileRange(a)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,t.wrapLng[0]],i).x/n.x),Math.ceil(e.project([0,t.wrapLng[1]],i).x/n.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([t.wrapLat[0],0],i).y/n.x),Math.ceil(e.project([t.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(e){var t=this._map,n=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),i=t.getZoomScale(n,this._tileZoom),a=t.project(e,this._tileZoom).floor(),s=t.getSize().divideBy(2*i);return new I(a.subtract(s),a.add(s))},_update:function(e){var t=this._map;if(t){var n=this._clampZoom(t.getZoom());if(void 0===e&&(e=t.getCenter()),void 0!==this._tileZoom){var i=this._getTiledPixelBounds(e),a=this._pxBoundsToTileRange(i),s=a.getCenter(),r=[],o=this.options.keepBuffer,l=new I(a.getBottomLeft().subtract([o,-o]),a.getTopRight().add([o,-o]));if(!(isFinite(a.min.x)&&isFinite(a.min.y)&&isFinite(a.max.x)&&isFinite(a.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var c in this._tiles){var d=this._tiles[c].coords;d.z===this._tileZoom&&l.contains(new T(d.x,d.y))||(this._tiles[c].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(e,n);else{for(var u=a.min.y;u<=a.max.y;u++)for(var h=a.min.x;h<=a.max.x;h++){var p=new T(h,u);if(p.z=this._tileZoom,this._isValidTile(p)){var m=this._tiles[this._tileCoordsToKey(p)];m?m.current=!0:r.push(p)}}if(r.sort((function(e,t){return e.distanceTo(s)-t.distanceTo(s)})),0!==r.length){this._loading||(this._loading=!0,this.fire("loading"));var f=document.createDocumentFragment();for(h=0;h<r.length;h++)this._addTile(r[h],f);this._level.el.appendChild(f)}}}}},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var n=this._globalTileRange;if(!t.wrapLng&&(e.x<n.min.x||e.x>n.max.x)||!t.wrapLat&&(e.y<n.min.y||e.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._tileCoordsToBounds(e);return B(this.options.bounds).overlaps(i)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var t=this._map,n=this.getTileSize(),i=e.scaleBy(n),a=i.add(n);return[t.unproject(i,e.z),t.unproject(a,e.z)]},_tileCoordsToBounds:function(e){var t=this._tileCoordsToNwSe(e),n=new D(t[0],t[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var t=e.split(":"),n=new T(+t[0],+t[1]);return n.z=+t[2],n},_removeTile:function(e){var t=this._tiles[e];t&&(mt(t.el),delete this._tiles[e],this.fire("tileunload",{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){xt(e,"leaflet-tile");var t=this.getTileSize();e.style.width=t.x+"px",e.style.height=t.y+"px",e.onselectstart=c,e.onmousemove=c,Ie.ielt9&&this.options.opacity<1&&jt(e,this.options.opacity)},_addTile:function(e,t){var n=this._getTilePos(e),i=this._tileCoordsToKey(e),s=this.createTile(this._wrapCoords(e),a(this._tileReady,this,e));this._initTile(s),this.createTile.length<2&&z(a(this._tileReady,this,e,null,s)),Pt(s,n),this._tiles[i]={el:s,coords:e,current:!0},t.appendChild(s),this.fire("tileloadstart",{tile:s,coords:e})},_tileReady:function(e,t,n){t&&this.fire("tileerror",{error:t,tile:n,coords:e});var i=this._tileCoordsToKey(e);(n=this._tiles[i])&&(n.loaded=+new Date,this._map._fadeAnimated?(jt(n.el,0),N(this._fadeFrame),this._fadeFrame=z(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),t||(xt(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ie.ielt9||!this._map._fadeAnimated?z(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var t=new T(this._wrapX?l(e.x,this._wrapX):e.x,this._wrapY?l(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange:function(e){var t=this.getTileSize();return new I(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}});function Di(e){return new Ri(e)}var Bi=Ri.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(e,t){this._url=e,(t=p(this,t)).detectRetina&&Ie.retina&&t.maxZoom>0?(t.tileSize=Math.floor(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom=Math.min(t.maxZoom,t.minZoom+1)):(t.zoomOffset++,t.maxZoom=Math.max(t.minZoom,t.maxZoom-1)),t.minZoom=Math.max(0,t.minZoom)):t.zoomReverse?t.minZoom=Math.min(t.maxZoom,t.minZoom):t.maxZoom=Math.max(t.minZoom,t.maxZoom),"string"===typeof t.subdomains&&(t.subdomains=t.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(e,t){return this._url===e&&void 0===t&&(t=!0),this._url=e,t||this.redraw(),this},createTile:function(e,t){var n=document.createElement("img");return Rt(n,"load",a(this._tileOnLoad,this,t,n)),Rt(n,"error",a(this._tileOnError,this,t,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"===typeof this.options.referrerPolicy&&(n.referrerPolicy=this.options.referrerPolicy),n.alt="",n.src=this.getTileUrl(e),n},getTileUrl:function(e){var t={r:Ie.retina?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-e.y;this.options.tms&&(t.y=i),t["-y"]=i}return y(this._url,n(t,this.options))},_tileOnLoad:function(e,t){Ie.ielt9?setTimeout(a(e,this,null,t),0):e(null,t)},_tileOnError:function(e,t,n){var i=this.options.errorTileUrl;i&&t.getAttribute("src")!==i&&(t.src=i),e(n,t)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,t=this.options.maxZoom;return this.options.zoomReverse&&(e=t-e),e+this.options.zoomOffset},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var e,t;for(e in this._tiles)if(this._tiles[e].coords.z!==this._tileZoom&&((t=this._tiles[e].el).onload=c,t.onerror=c,!t.complete)){t.src=x;var n=this._tiles[e].coords;mt(t),delete this._tiles[e],this.fire("tileabort",{tile:t,coords:n})}},_removeTile:function(e){var t=this._tiles[e];if(t)return t.el.setAttribute("src",x),Ri.prototype._removeTile.call(this,e)},_tileReady:function(e,t,n){if(this._map&&(!n||n.getAttribute("src")!==x))return Ri.prototype._tileReady.call(this,e,t,n)}});function Wi(e,t){return new Bi(e,t)}var Fi=Bi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,t){this._url=e;var i=n({},this.defaultWmsParams);for(var a in t)a in this.options||(i[a]=t[a]);var s=(t=p(this,t)).detectRetina&&Ie.retina?2:1,r=this.getTileSize();i.width=r.x*s,i.height=r.y*s,this.wmsParams=i},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code,Bi.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._tileCoordsToNwSe(e),n=this._crs,i=R(n.project(t[0]),n.project(t[1])),a=i.min,s=i.max,r=(this._wmsVersion>=1.3&&this._crs===$n?[a.y,a.x,s.y,s.x]:[a.x,a.y,s.x,s.y]).join(","),o=Bi.prototype.getTileUrl.call(this,e);return o+m(this.wmsParams,o,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+r},setParams:function(e,t){return n(this.wmsParams,e),t||this.redraw(),this}});function Zi(e,t){return new Fi(e,t)}Bi.WMS=Fi,Wi.wms=Zi;var Ui=Hn.extend({options:{padding:.1},initialize:function(e){p(this,e),r(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),xt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,t){var n=this._map.getZoomScale(t,this._zoom),i=this._map.getSize().multiplyBy(.5+this.options.padding),a=this._map.project(this._center,t),s=i.multiplyBy(-n).add(a).subtract(this._map._getNewPixelOrigin(e,t));Ie.any3d?Nt(this._container,s,n):Pt(this._container,s)},_reset:function(){for(var e in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,t=this._map.getSize(),n=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new I(n,n.add(t.multiplyBy(1+2*e)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),$i=Ui.extend({options:{tolerance:0},getEvents:function(){var e=Ui.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ui.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");Rt(e,"mousemove",this._onMouseMove,this),Rt(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Rt(e,"mouseout",this._handleMouseOut,this),e._leaflet_disable_events=!0,this._ctx=e.getContext("2d")},_destroyContainer:function(){N(this._redrawRequest),delete this._ctx,mt(this._container),Bt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var e in this._redrawBounds=null,this._layers)this._layers[e]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){Ui.prototype._update.call(this);var e=this._bounds,t=this._container,n=e.getSize(),i=Ie.retina?2:1;Pt(t,e.min),t.width=i*n.x,t.height=i*n.y,t.style.width=n.x+"px",t.style.height=n.y+"px",Ie.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){Ui.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[r(e)]=e;var t=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var t=e._order,n=t.next,i=t.prev;n?n.prev=i:this._drawLast=i,i?i.next=n:this._drawFirst=n,delete e._order,delete this._layers[r(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if("string"===typeof e.options.dashArray){var t,n,i=e.options.dashArray.split(/[, ]+/),a=[];for(n=0;n<i.length;n++){if(t=Number(i[n]),isNaN(t))return;a.push(t)}e.options._dashArray=a}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||z(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var t=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new I,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var t=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var e,t=this._redrawBounds;if(this._ctx.save(),t){var n=t.getSize();this._ctx.beginPath(),this._ctx.rect(t.min.x,t.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var i=this._drawFirst;i;i=i.next)e=i.layer,(!t||e._pxBounds&&e._pxBounds.intersects(t))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,t){if(this._drawing){var n,i,a,s,r=e._parts,o=r.length,l=this._ctx;if(o){for(l.beginPath(),n=0;n<o;n++){for(i=0,a=r[n].length;i<a;i++)s=r[n][i],l[i?"lineTo":"moveTo"](s.x,s.y);t&&l.closePath()}this._fillStroke(l,e)}}},_updateCircle:function(e){if(this._drawing&&!e._empty()){var t=e._point,n=this._ctx,i=Math.max(Math.round(e._radius),1),a=(Math.max(Math.round(e._radiusY),1)||i)/i;1!==a&&(n.save(),n.scale(1,a)),n.beginPath(),n.arc(t.x,t.y/a,i,0,2*Math.PI,!1),1!==a&&n.restore(),this._fillStroke(n,e)}},_fillStroke:function(e,t){var n=t.options;n.fill&&(e.globalAlpha=n.fillOpacity,e.fillStyle=n.fillColor||n.color,e.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(e.setLineDash&&e.setLineDash(t.options&&t.options._dashArray||[]),e.globalAlpha=n.opacity,e.lineWidth=n.weight,e.strokeStyle=n.color,e.lineCap=n.lineCap,e.lineJoin=n.lineJoin,e.stroke())},_onClick:function(e){for(var t,n,i=this._map.mouseEventToLayerPoint(e),a=this._drawFirst;a;a=a.next)(t=a.layer).options.interactive&&t._containsPoint(i)&&("click"!==e.type&&"preclick"!==e.type||!this._map._draggableMoved(t))&&(n=t);this._fireEvent(!!n&&[n],e)},_onMouseMove:function(e){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var t=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,t)}},_handleMouseOut:function(e){var t=this._hoveredLayer;t&&(wt(this._container,"leaflet-interactive"),this._fireEvent([t],e,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,t){if(!this._mouseHoverThrottled){for(var n,i,s=this._drawFirst;s;s=s.next)(n=s.layer).options.interactive&&n._containsPoint(t)&&(i=n);i!==this._hoveredLayer&&(this._handleMouseOut(e),i&&(xt(this._container,"leaflet-interactive"),this._fireEvent([i],e,"mouseover"),this._hoveredLayer=i)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],e),this._mouseHoverThrottled=!0,setTimeout(a((function(){this._mouseHoverThrottled=!1}),this),32)}},_fireEvent:function(e,t,n){this._map._fireDOMEvent(t,n||t.type,e)},_bringToFront:function(e){var t=e._order;if(t){var n=t.next,i=t.prev;n&&(n.prev=i,i?i.next=n:n&&(this._drawFirst=n),t.prev=this._drawLast,this._drawLast.next=t,t.next=null,this._drawLast=t,this._requestRedraw(e))}},_bringToBack:function(e){var t=e._order;if(t){var n=t.next,i=t.prev;i&&(i.next=n,n?n.prev=i:i&&(this._drawLast=i),t.prev=null,t.next=this._drawFirst,this._drawFirst.prev=t,this._drawFirst=t,this._requestRedraw(e))}}});function Vi(e){return Ie.canvas?new $i(e):null}var Hi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch(e){}return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),qi={_initContainer:function(){this._container=pt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ui.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var t=e._container=Hi("shape");xt(t,"leaflet-vml-shape "+(this.options.className||"")),t.coordsize="1 1",e._path=Hi("path"),t.appendChild(e._path),this._updateStyle(e),this._layers[r(e)]=e},_addPath:function(e){var t=e._container;this._container.appendChild(t),e.options.interactive&&e.addInteractiveTarget(t)},_removePath:function(e){var t=e._container;mt(t),e.removeInteractiveTarget(t),delete this._layers[r(e)]},_updateStyle:function(e){var t=e._stroke,n=e._fill,i=e.options,a=e._container;a.stroked=!!i.stroke,a.filled=!!i.fill,i.stroke?(t||(t=e._stroke=Hi("stroke")),a.appendChild(t),t.weight=i.weight+"px",t.color=i.color,t.opacity=i.opacity,i.dashArray?t.dashStyle=g(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):t.dashStyle="",t.endcap=i.lineCap.replace("butt","flat"),t.joinstyle=i.lineJoin):t&&(a.removeChild(t),e._stroke=null),i.fill?(n||(n=e._fill=Hi("fill")),a.appendChild(n),n.color=i.fillColor||i.color,n.opacity=i.fillOpacity):n&&(a.removeChild(n),e._fill=null)},_updateCircle:function(e){var t=e._point.round(),n=Math.round(e._radius),i=Math.round(e._radiusY||n);this._setPath(e,e._empty()?"M0 0":"AL "+t.x+","+t.y+" "+n+","+i+" 0,23592600")},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){yt(e._container)},_bringToBack:function(e){gt(e._container)}},Gi=Ie.vml?Hi:J,Ki=Ui.extend({_initContainer:function(){this._container=Gi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Gi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){mt(this._container),Bt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){Ui.prototype._update.call(this);var e=this._bounds,t=e.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(t)||(this._svgSize=t,n.setAttribute("width",t.x),n.setAttribute("height",t.y)),Pt(n,e.min),n.setAttribute("viewBox",[e.min.x,e.min.y,t.x,t.y].join(" ")),this.fire("update")}},_initPath:function(e){var t=e._path=Gi("path");e.options.className&&xt(t,e.options.className),e.options.interactive&&xt(t,"leaflet-interactive"),this._updateStyle(e),this._layers[r(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){mt(e._path),e.removeInteractiveTarget(e._path),delete this._layers[r(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var t=e._path,n=e.options;t&&(n.stroke?(t.setAttribute("stroke",n.color),t.setAttribute("stroke-opacity",n.opacity),t.setAttribute("stroke-width",n.weight),t.setAttribute("stroke-linecap",n.lineCap),t.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?t.setAttribute("stroke-dasharray",n.dashArray):t.removeAttribute("stroke-dasharray"),n.dashOffset?t.setAttribute("stroke-dashoffset",n.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),n.fill?(t.setAttribute("fill",n.fillColor||n.color),t.setAttribute("fill-opacity",n.fillOpacity),t.setAttribute("fill-rule",n.fillRule||"evenodd")):t.setAttribute("fill","none"))},_updatePoly:function(e,t){this._setPath(e,Y(e._parts,t))},_updateCircle:function(e){var t=e._point,n=Math.max(Math.round(e._radius),1),i="a"+n+","+(Math.max(Math.round(e._radiusY),1)||n)+" 0 1,0 ",a=e._empty()?"M0 0":"M"+(t.x-n)+","+t.y+i+2*n+",0 "+i+2*-n+",0 ";this._setPath(e,a)},_setPath:function(e,t){e._path.setAttribute("d",t)},_bringToFront:function(e){yt(e._path)},_bringToBack:function(e){gt(e._path)}});function Ji(e){return Ie.svg||Ie.vml?new Ki(e):null}Ie.vml&&Ki.include(qi),nn.include({getRenderer:function(e){var t=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return t||(t=this._renderer=this._createRenderer()),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(e){if("overlayPane"===e||void 0===e)return!1;var t=this._paneRenderers[e];return void 0===t&&(t=this._createRenderer({pane:e}),this._paneRenderers[e]=t),t},_createRenderer:function(e){return this.options.preferCanvas&&Vi(e)||Ji(e)}});var Yi=di.extend({initialize:function(e,t){di.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return[(e=B(e)).getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});function Qi(e,t){return new Yi(e,t)}Ki.create=Gi,Ki.pointsToPath=Y,hi.geometryToLayer=pi,hi.coordsToLatLng=fi,hi.coordsToLatLngs=yi,hi.latLngToCoords=gi,hi.latLngsToCoords=vi,hi.getFeature=xi,hi.asFeature=wi,nn.mergeOptions({boxZoom:!0});var Xi=yn.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){Rt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Bt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){mt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||1!==e.which&&1!==e.button)return!1;this._clearDeferredResetState(),this._resetState(),it(),Mt(),this._startPoint=this._map.mouseEventToContainerPoint(e),Rt(document,{contextmenu:Gt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=pt("div","leaflet-zoom-box",this._container),xt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var t=new I(this._point,this._startPoint),n=t.getSize();Pt(this._box,t.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(mt(this._box),wt(this._container,"leaflet-crosshair")),at(),Ct(),Bt(document,{contextmenu:Gt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if((1===e.which||1===e.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var t=new D(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})}},_onKeyDown:function(e){27===e.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});nn.addInitHook("addHandler","boxZoom",Xi),nn.mergeOptions({doubleClickZoom:!0});var ea=yn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,n=t.getZoom(),i=t.options.zoomDelta,a=e.originalEvent.shiftKey?n-i:n+i;"center"===t.options.doubleClickZoom?t.setZoom(a):t.setZoomAround(e.containerPoint,a)}});nn.addInitHook("addHandler","doubleClickZoom",ea),nn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ta=yn.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new xn(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}xt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){wt(this._map._container,"leaflet-grab"),wt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var t=B(this._map.options.maxBounds);this._offsetLimit=R(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var t=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(t),this._prunePositions(t)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,t=Math.round(e/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,a=(i-t+n)%e+t-n,s=(i+t+n)%e-t-n,r=Math.abs(a+n)<Math.abs(s+n)?a:s;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=r},_onDragEnd:function(e){var t=this._map,n=t.options,i=!n.inertia||e.noInertia||this._times.length<2;if(t.fire("dragend",e),i)t.fire("moveend");else{this._prunePositions(+new Date);var a=this._lastPos.subtract(this._positions[0]),s=(this._lastTime-this._times[0])/1e3,r=n.easeLinearity,o=a.multiplyBy(r/s),l=o.distanceTo([0,0]),c=Math.min(n.inertiaMaxSpeed,l),d=o.multiplyBy(c/l),u=c/(n.inertiaDeceleration*r),h=d.multiplyBy(-u/2).round();h.x||h.y?(h=t._limitOffset(h,t.options.maxBounds),z((function(){t.panBy(h,{duration:u,easeLinearity:r,noMoveStart:!0,animate:!0})}))):t.fire("moveend")}}});nn.addInitHook("addHandler","dragging",ta),nn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var na=yn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),Rt(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Bt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,t=document.documentElement,n=e.scrollTop||t.scrollTop,i=e.scrollLeft||t.scrollLeft;this._map._container.focus(),window.scrollTo(i,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var t,n,i=this._panKeys={},a=this.keyCodes;for(t=0,n=a.left.length;t<n;t++)i[a.left[t]]=[-1*e,0];for(t=0,n=a.right.length;t<n;t++)i[a.right[t]]=[e,0];for(t=0,n=a.down.length;t<n;t++)i[a.down[t]]=[0,e];for(t=0,n=a.up.length;t<n;t++)i[a.up[t]]=[0,-1*e]},_setZoomDelta:function(e){var t,n,i=this._zoomKeys={},a=this.keyCodes;for(t=0,n=a.zoomIn.length;t<n;t++)i[a.zoomIn[t]]=e;for(t=0,n=a.zoomOut.length;t<n;t++)i[a.zoomOut[t]]=-e},_addHooks:function(){Rt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Bt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t,n=e.keyCode,i=this._map;if(n in this._panKeys){if(!i._panAnim||!i._panAnim._inProgress)if(t=this._panKeys[n],e.shiftKey&&(t=A(t).multiplyBy(3)),i.options.maxBounds&&(t=i._limitOffset(A(t),i.options.maxBounds)),i.options.worldCopyJump){var a=i.wrapLatLng(i.unproject(i.project(i.getCenter()).add(t)));i.panTo(a)}else i.panBy(t)}else if(n in this._zoomKeys)i.setZoom(i.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!i._popup||!i._popup.options.closeOnEscapeKey)return;i.closePopup()}Gt(e)}}});nn.addInitHook("addHandler","keyboard",na),nn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ia=yn.extend({addHooks:function(){Rt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Bt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var t=Qt(e),n=this._map.options.wheelDebounceTime;this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var i=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),i),Gt(e)},_performZoom:function(){var e=this._map,t=e.getZoom(),n=this._map.options.zoomSnap||0;e._stop();var i=this._delta/(4*this._map.options.wheelPxPerZoomLevel),a=4*Math.log(2/(1+Math.exp(-Math.abs(i))))/Math.LN2,s=n?Math.ceil(a/n)*n:a,r=e._limitZoom(t+(this._delta>0?s:-s))-t;this._delta=0,this._startTime=null,r&&("center"===e.options.scrollWheelZoom?e.setZoom(t+r):e.setZoomAround(this._lastMousePos,t+r))}});nn.addInitHook("addHandler","scrollWheelZoom",ia);var aa=600;nn.mergeOptions({tapHold:Ie.touchNative&&Ie.safari&&Ie.mobile,tapTolerance:15});var sa=yn.extend({addHooks:function(){Rt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Bt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(clearTimeout(this._holdTimeout),1===e.touches.length){var t=e.touches[0];this._startPos=this._newPos=new T(t.clientX,t.clientY),this._holdTimeout=setTimeout(a((function(){this._cancel(),this._isTapValid()&&(Rt(document,"touchend",qt),Rt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",t))}),this),aa),Rt(document,"touchend touchcancel contextmenu",this._cancel,this),Rt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function e(){Bt(document,"touchend",qt),Bt(document,"touchend touchcancel",e)},_cancel:function(){clearTimeout(this._holdTimeout),Bt(document,"touchend touchcancel contextmenu",this._cancel,this),Bt(document,"touchmove",this._onMove,this)},_onMove:function(e){var t=e.touches[0];this._newPos=new T(t.clientX,t.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(e,t){var n=new MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY});n._simulated=!0,t.target.dispatchEvent(n)}});nn.addInitHook("addHandler","tapHold",sa),nn.mergeOptions({touchZoom:Ie.touch,bounceAtZoomLimits:!0});var ra=yn.extend({addHooks:function(){xt(this._map._container,"leaflet-touch-zoom"),Rt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){wt(this._map._container,"leaflet-touch-zoom"),Bt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var t=this._map;if(e.touches&&2===e.touches.length&&!t._animatingZoom&&!this._zooming){var n=t.mouseEventToContainerPoint(e.touches[0]),i=t.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=t.getSize()._divideBy(2),this._startLatLng=t.containerPointToLatLng(this._centerPoint),"center"!==t.options.touchZoom&&(this._pinchStartLatLng=t.containerPointToLatLng(n.add(i)._divideBy(2))),this._startDist=n.distanceTo(i),this._startZoom=t.getZoom(),this._moved=!1,this._zooming=!0,t._stop(),Rt(document,"touchmove",this._onTouchMove,this),Rt(document,"touchend touchcancel",this._onTouchEnd,this),qt(e)}},_onTouchMove:function(e){if(e.touches&&2===e.touches.length&&this._zooming){var t=this._map,n=t.mouseEventToContainerPoint(e.touches[0]),i=t.mouseEventToContainerPoint(e.touches[1]),s=n.distanceTo(i)/this._startDist;if(this._zoom=t.getScaleZoom(s,this._startZoom),!t.options.bounceAtZoomLimits&&(this._zoom<t.getMinZoom()&&s<1||this._zoom>t.getMaxZoom()&&s>1)&&(this._zoom=t._limitZoom(this._zoom)),"center"===t.options.touchZoom){if(this._center=this._startLatLng,1===s)return}else{var r=n._add(i)._divideBy(2)._subtract(this._centerPoint);if(1===s&&0===r.x&&0===r.y)return;this._center=t.unproject(t.project(this._pinchStartLatLng,this._zoom).subtract(r),this._zoom)}this._moved||(t._moveStart(!0,!1),this._moved=!0),N(this._animRequest);var o=a(t._move,t,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=z(o,this,!0),qt(e)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,N(this._animRequest),Bt(document,"touchmove",this._onTouchMove,this),Bt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});nn.addInitHook("addHandler","touchZoom",ra),nn.BoxZoom=Xi,nn.DoubleClickZoom=ea,nn.Drag=ta,nn.Keyboard=na,nn.ScrollWheelZoom=ia,nn.TapHold=sa,nn.TouchZoom=ra,e.Bounds=I,e.Browser=Ie,e.CRS=Z,e.Canvas=$i,e.Circle=ri,e.CircleMarker=ai,e.Class=S,e.Control=sn,e.DivIcon=Ai,e.DivOverlay=Mi,e.DomEvent=en,e.DomUtil=It,e.Draggable=xn,e.Evented=C,e.FeatureGroup=Kn,e.GeoJSON=hi,e.GridLayer=Ri,e.Handler=yn,e.Icon=Yn,e.ImageOverlay=ki,e.LatLng=W,e.LatLngBounds=D,e.Layer=Hn,e.LayerGroup=qn,e.LineUtil=Bn,e.Map=nn,e.Marker=ti,e.Mixin=gn,e.Path=ii,e.Point=T,e.PolyUtil=kn,e.Polygon=di,e.Polyline=li,e.Popup=Ci,e.PosAnimation=tn,e.Projection=Zn,e.Rectangle=Yi,e.Renderer=Ui,e.SVG=Ki,e.SVGOverlay=Si,e.TileLayer=Bi,e.Tooltip=Li,e.Transformation=H,e.Util=P,e.VideoOverlay=Ni,e.bind=a,e.bounds=R,e.canvas=Vi,e.circle=oi,e.circleMarker=si,e.control=rn,e.divIcon=Ii,e.extend=n,e.featureGroup=Jn,e.geoJSON=bi,e.geoJson=ji,e.gridLayer=Di,e.icon=Qn,e.imageOverlay=zi,e.latLng=F,e.latLngBounds=B,e.layerGroup=Gn,e.map=an,e.marker=ni,e.point=A,e.polygon=ui,e.polyline=ci,e.popup=Ti,e.rectangle=Qi,e.setOptions=p,e.stamp=r,e.svg=Ji,e.svgOverlay=Ei,e.tileLayer=Wi,e.tooltip=Oi,e.transformation=q,e.version=t,e.videoOverlay=Pi;var oa=window.L;e.noConflict=function(){return window.L=oa,this},window.L=e}(t)},654:(e,t,n)=>{"use strict";var i=n(950),a=Symbol.for("react.element"),s=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var i,s={},c=null,d=null;for(i in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)r.call(t,i)&&!l.hasOwnProperty(i)&&(s[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===s[i]&&(s[i]=t[i]);return{$$typeof:a,type:e,key:c,ref:d,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},761:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,a=e[i];if(!(0<s(a,t)))break e;e[i]=t,e[n]=a,n=i}}function i(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,a=e.length,r=a>>>1;i<r;){var o=2*(i+1)-1,l=e[o],c=o+1,d=e[c];if(0>s(l,n))c<a&&0>s(d,l)?(e[i]=d,e[c]=n,i=c):(e[i]=l,e[o]=n,i=o);else{if(!(c<a&&0>s(d,n)))break e;e[i]=d,e[c]=n,i=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var r=performance;t.unstable_now=function(){return r.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,p=3,m=!1,f=!1,y=!1,g="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=i(d);null!==t;){if(null===t.callback)a(d);else{if(!(t.startTime<=e))break;a(d),t.sortIndex=t.expirationTime,n(c,t)}t=i(d)}}function _(e){if(y=!1,w(e),!f)if(null!==i(c))f=!0,L(b);else{var t=i(d);null!==t&&O(_,t.startTime-e)}}function b(e,n){f=!1,y&&(y=!1,v(N),N=-1),m=!0;var s=p;try{for(w(n),h=i(c);null!==h&&(!(h.expirationTime>n)||e&&!E());){var r=h.callback;if("function"===typeof r){h.callback=null,p=h.priorityLevel;var o=r(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===i(c)&&a(c),w(n)}else a(c);h=i(c)}if(null!==h)var l=!0;else{var u=i(d);null!==u&&O(_,u.startTime-n),l=!1}return l}finally{h=null,p=s,m=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var j,k=!1,z=null,N=-1,P=5,S=-1;function E(){return!(t.unstable_now()-S<P)}function M(){if(null!==z){var e=t.unstable_now();S=e;var n=!0;try{n=z(!0,e)}finally{n?j():(k=!1,z=null)}}else k=!1}if("function"===typeof x)j=function(){x(M)};else if("undefined"!==typeof MessageChannel){var C=new MessageChannel,T=C.port2;C.port1.onmessage=M,j=function(){T.postMessage(null)}}else j=function(){g(M,0)};function L(e){z=e,k||(k=!0,j())}function O(e,n){N=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||m||(f=!0,L(b))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,a,s){var r=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?r+s:r:s=r,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:a,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>r?(e.sortIndex=s,n(d,e),null===i(c)&&e===i(d)&&(y?(v(N),N=-1):y=!0,O(_,s-r))):(e.sortIndex=o,n(c,e),f||m||(f=!0,L(b))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},950:(e,t,n)=>{"use strict";e.exports=n(49)}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var s=t[i]={exports:{}};return e[i].call(s.exports,s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(950),t=n(352),i=n(414);const a={name:"Tw\xf3j Developer",cash:1e8,reputation:100,reputationHistory:[],projects:[],rtbPower:0,totalPower:0,staff:{lessors:[],developers:[],lawyers:[],envSpecialists:[],lobbyists:[]},illegals:{hasIllegalDatabase:!1,corruptionNetwork:0,intimidationPower:0,forgeryExpertise:0,auditRisk:20,lastAuditTurn:0,totalBribes:0,illegalActionHistory:[]},economicMetrics:{totalInvestment:0,totalRevenue:0,totalExpenses:0,avgROI:0,projectsCost:0,projectsValue:0},audits:{totalAudits:0,passedAudits:0,totalFines:0,lastAuditResult:null},loans:[],companyUpgrades:{}};function s(e,t){var n,i,a,s;switch(t.type){case"UPDATE_CASH":return{...e,cash:e.cash+t.payload};case"ADD_PROJECT":return{...e,projects:[...e.projects,t.payload],totalPower:e.totalPower+t.payload.power};case"UPDATE_PROJECT":return{...e,projects:e.projects.map((e=>e.id===t.payload.id?{...e,...t.payload.changes}:e))};case"SELL_PROJECT":return{...e,cash:e.cash+t.payload.price,projects:e.projects.filter((e=>e.id!==t.payload.projectId)),totalPower:e.totalPower-((null===(n=e.projects.find((e=>e.id===t.payload.projectId)))||void 0===n?void 0:n.power)||0),rtbPower:e.rtbPower-("ready_to_build"===(null===(i=e.projects.find((e=>e.id===t.payload.projectId)))||void 0===i?void 0:i.status)&&(null===(a=e.projects.find((e=>e.id===t.payload.projectId)))||void 0===a?void 0:a.power)||0),economicMetrics:{...e.economicMetrics,totalRevenue:e.economicMetrics.totalRevenue+t.payload.price,projectsValue:e.economicMetrics.projectsValue-((null===(s=e.projects.find((e=>e.id===t.payload.projectId)))||void 0===s?void 0:s.marketValue)||0)}};case"UPDATE_RTB_POWER":return{...e,rtbPower:e.rtbPower+t.payload};case"HIRE_STAFF":const r=t.payload.staffType.endsWith("s")?t.payload.staffType:`${t.payload.staffType}s`,o=e.staff[r]||[];return{...e,cash:e.cash-t.payload.cost,staff:{...e.staff,[r]:[...o,t.payload.staff]},economicMetrics:{...e.economicMetrics,totalExpenses:e.economicMetrics.totalExpenses+t.payload.cost}};case"FIRE_STAFF":const l=t.payload.staffType.endsWith("s")?t.payload.staffType:`${t.payload.staffType}s`;return{...e,cash:e.cash-t.payload.cost,staff:{...e.staff,[l]:(e.staff[l]||[]).filter((e=>e.id!==t.payload.staffId))},economicMetrics:{...e.economicMetrics,totalExpenses:e.economicMetrics.totalExpenses+t.payload.cost}};case"TRAIN_STAFF":const c=t.payload.staffType.endsWith("s")?t.payload.staffType:`${t.payload.staffType}s`;return{...e,cash:e.cash-t.payload.cost,staff:{...e.staff,[c]:(e.staff[c]||[]).map((e=>e.id===t.payload.staffId?{...e,skill:Math.min(10,e.skill+t.payload.skillGain),experience:e.experience+t.payload.experienceGain,training:[...e.training||[],{date:(new Date).toISOString(),type:t.payload.trainingType,cost:t.payload.cost,skillGain:t.payload.skillGain}]}:e))},economicMetrics:{...e.economicMetrics,totalExpenses:e.economicMetrics.totalExpenses+t.payload.cost}};case"UPDATE_STAFF":const d=t.payload.staffType.endsWith("s")?t.payload.staffType:`${t.payload.staffType}s`;return{...e,staff:{...e.staff,[d]:(e.staff[d]||[]).map((e=>e.id===t.payload.staffId?{...e,...t.payload.changes}:e))}};case"ASSIGN_STAFF_TO_PROJECT":return{...e,projects:e.projects.map((e=>e.id===t.payload.projectId?{...e,assignedStaff:{...e.assignedStaff||{},[t.payload.staffType]:t.payload.staffId}}:e)),staff:{...e.staff,[t.payload.staffType+"s"]:(e.staff[t.payload.staffType+"s"]||[]).map((e=>e.id===t.payload.staffId?{...e,assignedProject:t.payload.projectId,assignedSince:(new Date).toISOString()}:e))}};case"ADD_PROJECT_EVENT":return{...e,projects:e.projects.map((e=>e.id===t.payload.projectId?{...e,events:[...e.events,t.payload.event]}:e))};case"UPDATE_REPUTATION":return{...e,reputation:Math.max(0,Math.min(200,e.reputation+t.payload.change)),reputationHistory:[...e.reputationHistory,{date:(new Date).toISOString(),change:t.payload.change,reason:t.payload.reason,turn:t.payload.turn}]};case"USE_ILLEGAL_ACTION":return{...e,illegals:{...e.illegals,corruptionNetwork:t.payload.updateCorruption?Math.min(100,e.illegals.corruptionNetwork+t.payload.corruptionChange):e.illegals.corruptionNetwork,auditRisk:Math.min(100,e.illegals.auditRisk+t.payload.riskIncrease),totalBribes:e.illegals.totalBribes+(t.payload.bribeCost||0),illegalActionHistory:[...e.illegals.illegalActionHistory,{date:(new Date).toISOString(),type:t.payload.actionType,target:t.payload.target,cost:t.payload.bribeCost||0,turn:t.payload.turn}]},cash:e.cash-(t.payload.bribeCost||0),economicMetrics:{...e.economicMetrics,totalExpenses:e.economicMetrics.totalExpenses+(t.payload.bribeCost||0)}};case"TRIGGER_AUDIT":return{...e,illegals:{...e.illegals,auditRisk:Math.max(10,e.illegals.auditRisk-t.payload.riskReduction),lastAuditTurn:t.payload.turn},audits:{...e.audits,totalAudits:e.audits.totalAudits+1,passedAudits:t.payload.passed?e.audits.passedAudits+1:e.audits.passedAudits,totalFines:e.audits.totalFines+(t.payload.fine||0),lastAuditResult:{date:(new Date).toISOString(),turn:t.payload.turn,passed:t.payload.passed,fine:t.payload.fine||0,reputationLoss:t.payload.reputationLoss||0}},cash:e.cash-(t.payload.fine||0),economicMetrics:{...e.economicMetrics,totalExpenses:e.economicMetrics.totalExpenses+(t.payload.fine||0)}};case"UPDATE_PROJECT_MARKET_VALUE":return{...e,projects:e.projects.map((e=>e.id===t.payload.projectId?{...e,marketValue:t.payload.value}:e)),economicMetrics:{...e.economicMetrics,projectsValue:e.projects.reduce(((e,n)=>e+(n.id===t.payload.projectId?t.payload.value:n.marketValue||0)),0)}};case"UPDATE_PROJECT_TOTAL_COST":return{...e,projects:e.projects.map((e=>e.id===t.payload.projectId?{...e,totalCost:e.totalCost+t.payload.cost}:e)),economicMetrics:{...e.economicMetrics,totalInvestment:e.economicMetrics.totalInvestment+t.payload.cost,projectsCost:e.economicMetrics.projectsCost+t.payload.cost}};case"INITIALIZE_PROJECT_FORMAL_PARAMS":return{...e,projects:e.projects.map((e=>e.id===t.payload.projectId?{...e,formalParams:t.payload.params}:e))};case"UPDATE_ILLEGAL_DATABASE":return{...e,illegals:{...e.illegals,hasIllegalDatabase:t.payload.hasIllegalDatabase}};case"UPDATE_ILLEGALS_STATUS":return{...e,illegals:{...e.illegals,...t.payload}};case"ADD_ILLEGAL_HISTORY":return{...e,illegals:{...e.illegals,illegalActionHistory:[...e.illegals.illegalActionHistory,t.payload]}};case"ADD_ILLEGAL_ACTION":return{...e,cash:e.cash-t.payload.cost,illegals:{...e.illegals,auditRisk:Math.min(100,e.illegals.auditRisk+5),totalBribes:e.illegals.totalBribes+t.payload.cost,illegalActionHistory:[...e.illegals.illegalActionHistory,{date:(new Date).toISOString(),type:t.payload.type,target:t.payload.target,cost:t.payload.cost,turn:t.payload.turn,exposed:t.payload.exposed}]},economicMetrics:{...e.economicMetrics,totalExpenses:e.economicMetrics.totalExpenses+t.payload.cost}};case"ADD_LOAN":return{...e,loans:[...e.loans||[],t.payload],cash:e.cash+t.payload.amount};case"UPDATE_LOAN":return{...e,loans:(e.loans||[]).map((e=>e.id===t.payload.id?{...e,...t.payload.changes}:e))};case"REMOVE_LOAN":return{...e,loans:(e.loans||[]).filter((e=>e.id!==t.payload.id))};case"SEND_PROJECT_TO_MARKET":return e.projects.find((e=>e.id===t.payload.projectId))?{...e,projects:e.projects.map((e=>e.id===t.payload.projectId?{...e,isOnMarket:!0,marketPrice:t.payload.price,marketListingDate:(new Date).toISOString(),events:[...e.events,{date:(new Date).toISOString(),text:`Projekt zosta\u0142 wystawiony na rynek za ${t.payload.price.toLocaleString()} PLN`}]}:e))}:e;case"ACCELERATE_PROJECT":return e.projects.find((e=>e.id===t.payload.projectId))?{...e,cash:e.cash-t.payload.cost,projects:e.projects.map((e=>e.id===t.payload.projectId?{...e,progress:Math.min(100,(e.progress||0)+t.payload.progressGain),events:[...e.events,{date:(new Date).toISOString(),text:`Przyspieszono projekt o ${t.payload.progressGain}% za ${t.payload.cost.toLocaleString()} PLN`}]}:e)),economicMetrics:{...e.economicMetrics,totalExpenses:e.economicMetrics.totalExpenses+t.payload.cost,totalInvestment:e.economicMetrics.totalInvestment+t.payload.cost,projectsCost:e.economicMetrics.projectsCost+t.payload.cost}}:e;case"UPDATE_ECONOMIC_METRICS":return{...e,economicMetrics:{...e.economicMetrics,...t.payload}};case"PURCHASE_COMPANY_UPGRADE":return{...e,cash:e.cash-t.payload.cost,companyUpgrades:{...e.companyUpgrades||{},[t.payload.upgradeId]:t.payload.level}};default:return e}}const r=(0,e.createContext)(),o=t=>{let{children:n}=t;const[o,l]=(0,e.useReducer)(s,a);return(0,i.jsx)(r.Provider,{value:{state:o,dispatch:l},children:n})},l=()=>{const t=(0,e.useContext)(r);if(!t)throw new Error("usePlayerContext musi by\u0107 u\u017cywany wewn\u0105trz PlayerProvider");return t},c=[{id:"pracowity",label:"Pracowity",description:"+15% wydajno\u015b\u0107, -10% zm\u0119czenie",effects:{efficiency:.15,energyLoss:-.1}},{id:"kreatywny",label:"Kreatywny",description:"+20% szansa na innowacje",effects:{innovationChance:.2}},{id:"charyzmatyczny",label:"Charyzmatyczny",description:"+15% negocjacje, +10% relacje",effects:{negotiation:.15,relations:.1}},{id:"dokladny",label:"Dok\u0142adny",description:"-30% ryzyko b\u0142\u0119d\xf3w, +10% czas",effects:{errorRisk:-.3,timeNeeded:.1}},{id:"ambitny",label:"Ambitny",description:"+25% praca po godzinach, szybszy rozw\xf3j",effects:{workOvertime:.25,careerGrowth:.15}},{id:"analityczny",label:"Analityczny",description:"+20% rozwi\u0105zywanie problem\xf3w",effects:{problemSolving:.2}},{id:"optymista",label:"Optymista",description:"+15% morale, -10% stres",effects:{moraleGain:.15,stressGain:-.1}},{id:"lojalny",label:"Lojalny",description:"-50% szansa odej\u015bcia, +15% morale przy d\u0142ugim sta\u017cu",effects:{leaveChance:-.5,longTermMorale:.15}}],d=[{id:"perfekcjonista",label:"Perfekcjonista",description:"+30% jako\u015b\u0107, +20% czas",effects:{quality:.3,timeNeeded:.2}},{id:"indywidualista",label:"Indywidualista",description:"+10% solo, -15% zesp\xf3\u0142",effects:{soloWork:.1,teamWork:-.15}},{id:"ryzykant",label:"Ryzykant",description:"+25% szansa przyspieszenia, +15% b\u0142\u0119dy",effects:{speedBoost:.25,errorRisk:.15}},{id:"tradycjonalista",label:"Tradycjonalista",description:"-20% adaptacja do zmian, +15% standardowe procedury",effects:{adaptability:-.2,standardProcedures:.15}}],u=[{id:"konfliktowy",label:"Konfliktowy",description:"-20% relacje, ryzyko spor\xf3w",effects:{relations:-.2,conflictRisk:.3}},{id:"prokrastynator",label:"Prokrastynator",description:"+25% op\xf3\u017anienia, -15% wydajno\u015b\u0107",effects:{delayRisk:.25,efficiency:-.15}},{id:"wypalony",label:"Wypalony",description:"-25% wydajno\u015b\u0107, -20% morale",effects:{efficiency:-.25,morale:-.2}},{id:"chaotyczny",label:"Chaotyczny",description:"-15% organizacja, +10% kreatywno\u015b\u0107",effects:{organization:-.15,creativity:.1}},{id:"pesymista",label:"Pesymista",description:"-15% morale zespo\u0142u, cz\u0119stsze zg\u0142aszanie problem\xf3w",effects:{teamMorale:-.15,problemReporting:.2}},{id:"niecierpliwy",label:"Niecierpliwy",description:"-20% zadania d\u0142ugoterminowe, +10% kr\xf3tkie zadania",effects:{longTasks:-.2,shortTasks:.1}}],h=e=>{let t=.05;if(e.morale<50&&(t+=.05),e.energy<40&&(t+=.07),e.traits&&e.traits.includes("konfliktowy")&&(t+=.03),e.traits&&e.traits.includes("wypalony")&&(t+=.05),Math.random()>t)return null;const n=[{id:"conflict",title:"Konflikt w zespole",description:`${e.name} popad\u0142 w konflikt z innym cz\u0142onkiem zespo\u0142u.`,severity:"negative",effects:{morale:-10,relations:-15}},{id:"innovation",title:"Innowacyjny pomys\u0142",description:`${e.name} zaproponowa\u0142 innowacyjne rozwi\u0105zanie problemu.`,severity:"positive",effects:{morale:15,skill:.2}},{id:"burnout",title:"Oznaki wypalenia",description:`${e.name} wykazuje oznaki wypalenia zawodowego.`,severity:"negative",effects:{energy:-20,morale:-15}},{id:"training_success",title:"Udane szkolenie",description:`${e.name} zdoby\u0142 nowe umiej\u0119tno\u015bci podczas szkolenia.`,severity:"positive",effects:{skill:.5,experience:100,morale:10}},{id:"job_offer",title:"Oferta od konkurencji",description:`${e.name} otrzyma\u0142 ofert\u0119 pracy od konkurencji.`,severity:"neutral",effects:{leaveRisk:.3}}],i=n[Math.floor(Math.random()*n.length)];return{...i,uniqueId:`${i.id}_${Date.now()}`,date:(new Date).toISOString()}},p=e=>{switch(e){case"land_acquisition":return"Pozyskiwanie grunt\xf3w (Greenfield)";case"environmental_decision":return"Decyzja \u015brodowiskowa (EIA/D\u015aU)";case"zoning_conditions":return"Warunki zabudowy (MPZP/WZ)";case"grid_connection":return"Warunki przy\u0142\u0105czenia (WP)";case"ready_to_build":return"Gotowy do budowy (RTB)";case"construction":return"Budowa (COD-1)";case"operating":return"Operacyjny (COD)";default:return e}},m=function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])switch(e){case"developer":return"dewelopera";case"lawyer":return"prawnika";case"envSpecialist":return"specjalist\u0119 \u015brodowiskowego";case"lobbyist":return"lobbyst\u0119";case"lessor":return"dzier\u017cawc\u0119";default:return e}else switch(e){case"developer":return"deweloper";case"lawyer":return"prawnik";case"envSpecialist":return"specjalista \u015brodowiskowy";case"lobbyist":return"lobbysta";case"lessor":return"dzier\u017cawca";default:return e}},f=e=>{switch(e){case"junior":return"pocz\u0105tkuj\u0105cego";case"mid":return"do\u015bwiadczonego";case"senior":return"eksperta";default:return e}},y=e=>{switch(e){case"aggressive":return"Agresywna";case"balanced":return"Zr\xf3wnowa\u017cona";case"conservative":return"Konserwatywna";default:return e}},g=(e,t)=>e.rtbPower>1.5*t?`Silny lider, posiada ${e.rtbPower.toLocaleString()} MW mocy RTB. Unikaj bezpo\u015bredniej konkurencji.`:e.rtbPower>t?`Nieznacznie wyprzedza Ci\u0119 z moc\u0105 ${e.rtbPower.toLocaleString()} MW. Mo\u017cliwe do nadrobienia.`:e.rtbPower>.7*t?`Blisko za Tob\u0105 z moc\u0105 ${e.rtbPower.toLocaleString()} MW. Pilnuj przewagi.`:`S\u0142abszy konkurent z moc\u0105 ${e.rtbPower.toLocaleString()} MW. Koncentruje si\u0119 na regionach ${e.strongRegions.slice(0,2).join(", ")}.`,v=()=>{const t=(0,e.useCallback)((e=>{if(e>=100)return 1;return 1+.075*Math.max(0,(100-e)/20)}),[]),n=(0,e.useCallback)((e=>{if(e>=100)return 1;return 1+.05*Math.max(0,(100-e)/20)}),[]),i=(0,e.useCallback)(((e,t)=>{if(e.useIllegalMethods){let e=1.4;return t.illegals.corruptionNetwork>0&&(e+=t.illegals.corruptionNetwork/100*.3),e}return 1}),[]),a=(0,e.useCallback)(((e,t)=>{const n=e.illegals.auditRisk/100,i=t.turn-e.illegals.lastAuditTurn,a=Math.min(.2,.05*Math.floor(i/10)),s=e.reputation<50?.1:0,r=e.projects.filter((e=>e.useIllegalMethods)).length,o=n+a+s+Math.min(.3,.03*r);return Math.random()<o}),[]),s=(0,e.useCallback)(((e,t,n)=>{const i=e.projects.filter((e=>e.useIllegalMethods)).length,a=e.illegals.illegalActionHistory.length,s=Math.max(.1,1-.1*i-.05*a);if(Math.random()<s)n({type:"TRIGGER_AUDIT",payload:{turn:t.turn,passed:!0,riskReduction:10,fine:0,reputationLoss:0}});else{const s=5e4*i+.5*e.illegals.totalBribes,r=10+5*i+2*a;n({type:"TRIGGER_AUDIT",payload:{turn:t.turn,passed:!1,riskReduction:5,fine:s,reputationLoss:r}}),n({type:"UPDATE_REPUTATION",payload:{change:-r,reason:"Nieudany audyt kontrolny",turn:t.turn}})}}),[]),r=(0,e.useCallback)(((e,t,r)=>{if(!e||!e.projects)return;const o={land_acquisition:1.5,zoning_conditions:1.2,environmental_decision:1.3,grid_connection:1.2,building_permit:1.1,construction:1};e.projects.forEach((a=>{var s,l,c,d,u,h;if("ready_to_build"===a.status||"operational"===a.status)return;let m=.5*(o[a.status]||1);const f=a.assignedStaff||{};let y=2.5;switch(a.status){case"land_acquisition":let t=0;if(a.county){const n=e.counties.find((e=>e.voivodeship===a.county.voivodeship&&e.id===a.county.id));if(n&&n.leasePools&&n.leasePools[a.technology]){(n.leasePools[a.technology].lessors||[]).forEach((n=>{var i;const s=null===(i=e.staff.lessors)||void 0===i?void 0:i.find((e=>e.id===n));if(s){var r;let e=s.skill/5;const n=(null===(r=s.specialization)||void 0===r?void 0:r.toLowerCase())||"";("PV"===a.technology&&n.includes("fotowoltaika")||"WF"===a.technology&&n.includes("wiatrowe")||"BESS"===a.technology&&n.includes("magazyn")||a.technology.includes("+")&&n.includes("hybrydowe"))&&(e*=1.5),t+=e}}))}}y+=t,y*=1.5;break;case"environmental_decision":const n=f.developer?null===(s=e.staff.developers)||void 0===s?void 0:s.find((e=>e.id===f.developer)):null;n?y+=n.skill/5:y*=.3;const i=f.envSpecialist?null===(l=e.staff.envSpecialists)||void 0===l?void 0:l.find((e=>e.id===f.envSpecialist)):null;i&&(y+=i.skill/5,"environmental"===i.specialization&&(y*=1.5));break;case"zoning_conditions":const r=f.developer?null===(c=e.staff.developers)||void 0===c?void 0:c.find((e=>e.id===f.developer)):null;r?y+=r.skill/5:y*=.3,y*=1.2;break;case"grid_connection":const o=f.developer?null===(d=e.staff.developers)||void 0===d?void 0:d.find((e=>e.id===f.developer)):null;o?y+=o.skill/5:y*=.3;const p=f.lobbyist?null===(u=e.staff.lobbyists)||void 0===u?void 0:u.find((e=>e.id===f.lobbyist)):null,m=f.lawyer?null===(h=e.staff.lawyers)||void 0===h?void 0:h.find((e=>e.id===f.lawyer)):null;p&&(y+=p.skill/4),m&&(y+=m.skill/5)}y*=1/n(e.reputation);y*=i(a,e),y*=1.5,m+=y,r({type:"UPDATE_PROJECT",payload:{id:a.id,changes:{progress:Math.min(100,a.progress+m)}}}),m>=100&&a.progress<100&&(r({type:"SET_NOTIFICATION",payload:{text:`Projekt ${a.name} uko\u0144czy\u0142 etap ${p(a.status)}! Mo\u017cesz teraz przej\u015b\u0107 do nast\u0119pnego etapu.`,type:"success"}}),r({type:"ADD_PROJECT_EVENT",payload:{projectId:a.id,event:{turn:t.turn,text:`Uko\u0144czono etap: ${p(a.status)}`}}}),a.useIllegalMethods||r({type:"UPDATE_REPUTATION",payload:{change:5,reason:`Uko\u0144czenie etapu ${p(a.status)} legalnie`,turn:t.turn}}));const g={land_acquisition:.15,environmental_decision:.35,zoning_conditions:.55,grid_connection:.85,ready_to_build:1},v=15e4*a.power*((g[a.status]||.1)+a.progress/100*(g["land_acquisition"===a.status?"environmental_decision":a.status]-g[a.status]));r({type:"UPDATE_PROJECT_MARKET_VALUE",payload:{projectId:a.id,value:v}}),a.useIllegalMethods&&Math.random()<.1&&r({type:"UPDATE_REPUTATION",payload:{change:-10,reason:`Wykrycie nielegalnych dzia\u0142a\u0144 w projekcie ${a.name}`,turn:t.turn}})})),a(e,t)&&s(e,t,r)}),[n,i,a,s]),o=(0,e.useCallback)(((e,t,n)=>{if(!e||!t)return;if(t.day%2!==0)return;Object.keys(e.staff||{}).forEach((i=>{(e.staff[i]||[]).forEach((a=>{var s;if(Math.random()<.05){const e=h(a);if(e&&(n({type:"ADD_EVENT",payload:{id:Date.now()+Math.random(),type:"staff_event",title:e.title,description:e.description,severity:e.severity,staffId:a.id,staffName:a.name,staffType:i,turn:t.turn,expires:t.turn+5}}),e.effects&&n({type:"UPDATE_STAFF",payload:{staffType:i,staffId:a.id,changes:{morale:Math.max(0,Math.min(100,a.morale+(e.effects.morale||0))),energy:Math.max(0,Math.min(100,a.energy+(e.effects.energy||0))),skill:Math.max(0,Math.min(10,a.skill+(e.effects.skill||0))),experience:Math.max(0,a.experience+(e.effects.experience||0))}}}),"positive"===e.severity||"negative"===e.severity)){const i="positive"===e.severity?2:-2;n({type:"UPDATE_REPUTATION",payload:{change:i,reason:e.title,turn:t.turn}})}}let r=10;r*=[1,1.1,1.2,1.35][(null===(s=e.companyUpgrades)||void 0===s?void 0:s.training_program)||0],n({type:"UPDATE_STAFF",payload:{staffType:i,staffId:a.id,changes:{experience:a.experience+r}}}),l(a,i,n)}))}))}),[]),l=(e,t,n)=>{const i={junior:{min:0,max:3e3,next:"mid"},mid:{min:3001,max:8e3,next:"senior"},senior:{min:8001,max:1/0,next:null}},a=e.level;if(e.experience>i[a].max&&i[a].next){const s=i[a].next;if(n({type:"UPDATE_STAFF",payload:{staffType:t,staffId:e.id,changes:{level:s,historia:[...e.historia||[],{data:(new Date).toISOString(),typ:"awans",opis:`Awansowa\u0142 na pozycj\u0119 ${f(s)}`}]}}}),"mid"===s){const i=Math.max(1,Math.floor(3*Math.random())+1);n({type:"UPDATE_STAFF",payload:{staffType:t,staffId:e.id,changes:{skill:Math.min(10,e.skill+i)}}})}else if("senior"===s){const i=Math.max(2,Math.floor(3*Math.random())+2);n({type:"UPDATE_STAFF",payload:{staffType:t,staffId:e.id,changes:{skill:Math.min(10,e.skill+i)}}})}}};return{updateProjects:r,generateStaffEvents:o,generateEconomicEvents:(0,e.useCallback)(((e,t,n)=>{if(t.turn%5===0&&Math.random()<.3){const e=[{id:"energy_price_rise",title:"Wzrost cen energii",description:"Ceny energii na rynku wzros\u0142y o 15%, zwi\u0119kszaj\u0105c potencjaln\u0105 warto\u015b\u0107 projekt\xf3w OZE.",severity:"positive",effect:{type:"market_price_modifier",technology:"all",value:1.15,duration:10}},{id:"energy_price_drop",title:"Spadek cen energii",description:"Ceny energii na rynku spad\u0142y o 10%, obni\u017caj\u0105c warto\u015b\u0107 projekt\xf3w OZE.",severity:"negative",effect:{type:"market_price_modifier",technology:"all",value:.9,duration:8}},{id:"pv_boom",title:"Boom na fotowoltaik\u0119",description:"Zwi\u0119kszony popyt na projekty fotowoltaiczne zwi\u0119kszy\u0142 ich warto\u015b\u0107 rynkow\u0105 o 20%.",severity:"positive",effect:{type:"market_price_modifier",technology:"PV",value:1.2,duration:12}},{id:"wind_regulations",title:"Nowe regulacje dla farm wiatrowych",description:"Nowe regulacje u\u0142atwiaj\u0105 rozw\xf3j projekt\xf3w wiatrowych, zwi\u0119kszaj\u0105c ich warto\u015b\u0107 o 15%.",severity:"positive",effect:{type:"market_price_modifier",technology:"WF",value:1.15,duration:15}},{id:"regulatory_changes",title:"Zmiany regulacyjne",description:"Zmiany w przepisach spowodowa\u0142y op\xf3\u017anienia w procesach administracyjnych.",severity:"negative",effect:{type:"project_speed",value:.85,duration:8}}],i=e[Math.floor(Math.random()*e.length)];playerDispatch({type:"ADD_EVENT",payload:{id:Date.now()+Math.random(),type:"economic_event",title:i.title,description:i.description,severity:i.severity,turn:t.turn,expires:t.turn+i.effect.duration,effect:i.effect}}),"market_price_modifier"===i.effect.type&&("all"===i.effect.technology?n({type:"UPDATE_MARKET_PRICE_MODIFIERS",payload:{PV:i.effect.value,WF:i.effect.value,BESS:i.effect.value}}):n({type:"UPDATE_MARKET_PRICE_MODIFIERS",payload:{[i.effect.technology]:i.effect.value}}))}}),[]),generateProjectEvents:(0,e.useCallback)(((e,t,n,i)=>{e&&t&&t.day%3===0&&e.projects.forEach((e=>{if(Math.random()<.3){const a=Math.random()<.5;let s={id:`proj_event_${Date.now()}_${Math.random()}`,type:"project_event",projectId:e.id,title:"",description:"",severity:a?"positive":"negative",turn:t.turn,expires:t.turn+Math.floor(6*Math.random())+3,effects:{}};switch(e.status){case"land_acquisition":if(a){const i=[{title:"Wsparcie lokalnej spo\u0142eczno\u015bci",description:`Mieszka\u0144cy gminy wyrazili poparcie dla projektu ${e.name}, co przyspiesza proces pozyskiwania grunt\xf3w.`,progressBonus:Math.floor(10*Math.random())+5,reputationChange:2},{title:"Spadek cen dzier\u017cawy",description:`W\u0142a\u015bciciele grunt\xf3w obni\u017cyli stawki dzier\u017cawy dla projektu ${e.name} o 15%.`,costModifier:.85,progressBonus:Math.floor(5*Math.random())+3},{title:"Preferencyjne warunki dzier\u017cawy",description:`Uda\u0142o si\u0119 wynegocjowa\u0107 korzystniejsze warunki umowy dla projektu ${e.name}.`,costModifier:.9,progressBonus:Math.floor(7*Math.random())+4}],a=i[Math.floor(Math.random()*i.length)];if(s={...s,...a},a.progressBonus&&n({type:"UPDATE_PROJECT",payload:{id:e.id,changes:{progress:Math.min(100,e.progress+a.progressBonus)}}}),a.costModifier&&e.etapCosts){const t=Math.round(e.etapCosts.land_acquisition*a.costModifier);n({type:"UPDATE_PROJECT_STAGE_COST",payload:{projectId:e.id,stage:"land_acquisition",cost:t}})}a.reputationChange&&n({type:"UPDATE_REPUTATION",payload:{change:a.reputationChange,reason:a.title,turn:t.turn}})}else{const t=[{title:"Konflikt o granice dzia\u0142ek",description:`Odkryto nie\u015bcis\u0142o\u015bci w dokumentacji grunt\xf3w dla projektu ${e.name}, co op\xf3\u017ania proces.`,progressPenalty:Math.floor(8*Math.random())+3},{title:"Wzrost oczekiwa\u0144 cenowych",description:`W\u0142a\u015bciciele grunt\xf3w \u017c\u0105daj\u0105 wy\u017cszych stawek dzier\u017cawy dla projektu ${e.name}.`,costModifier:1.2,progressPenalty:Math.floor(5*Math.random())+2},{title:"Problemy z dost\u0119pem do terenu",description:`Trudno\u015bci z dost\u0119pem do dzia\u0142ek op\xf3\u017aniaj\u0105 analizy terenowe dla projektu ${e.name}.`,progressPenalty:Math.floor(10*Math.random())+5}],i=t[Math.floor(Math.random()*t.length)];if(s={...s,...i},i.progressPenalty&&n({type:"UPDATE_PROJECT",payload:{id:e.id,changes:{progress:Math.max(0,e.progress-i.progressPenalty)}}}),i.costModifier&&e.etapCosts){const t=Math.round(e.etapCosts.land_acquisition*i.costModifier);n({type:"UPDATE_PROJECT_STAGE_COST",payload:{projectId:e.id,stage:"land_acquisition",cost:t}})}}break;case"environmental_decision":if(a){const i=[{title:"Pozytywna opinia \u015brodowiskowa",description:`Projekt ${e.name} otrzyma\u0142 pozytywn\u0105 opini\u0119 od lokalnych organizacji ekologicznych.`,progressBonus:Math.floor(12*Math.random())+8,reputationChange:3},{title:"Przyspieszona procedura \u015brodowiskowa",description:`Urz\u0105d zastosowa\u0142 tryb przyspieszony dla projektu ${e.name} ze wzgl\u0119du na jego znaczenie.`,progressBonus:Math.floor(15*Math.random())+10},{title:"Korzystne warunki \u015brodowiskowe",description:`Analizy wykaza\u0142y wyj\u0105tkowo korzystne warunki \u015brodowiskowe dla projektu ${e.name}.`,progressBonus:Math.floor(10*Math.random())+5,costModifier:.9}],a=i[Math.floor(Math.random()*i.length)];if(s={...s,...a},a.progressBonus&&n({type:"UPDATE_PROJECT",payload:{id:e.id,changes:{progress:Math.min(100,e.progress+a.progressBonus)}}}),a.costModifier&&e.etapCosts){const t=Math.round(e.etapCosts.environmental_decision*a.costModifier);n({type:"UPDATE_PROJECT_STAGE_COST",payload:{projectId:e.id,stage:"environmental_decision",cost:t}})}a.reputationChange&&n({type:"UPDATE_REPUTATION",payload:{change:a.reputationChange,reason:a.title,turn:t.turn}})}else{const i=[{title:"Protesty ekolog\xf3w",description:`Lokalne organizacje ekologiczne protestuj\u0105 przeciwko projektowi ${e.name}.`,progressPenalty:Math.floor(12*Math.random())+8,reputationChange:-2},{title:"Dodatkowe badania \u015brodowiskowe",description:`Urz\u0105d wymaga przeprowadzenia dodatkowych bada\u0144 dla projektu ${e.name}.`,progressPenalty:Math.floor(8*Math.random())+5,costModifier:1.15},{title:"Odkrycie chronionego gatunku",description:`Na terenie projektu ${e.name} odkryto chroniony gatunek, co komplikuje proces.`,progressPenalty:Math.floor(15*Math.random())+10,costModifier:1.2,reputationChange:-1}],a=i[Math.floor(Math.random()*i.length)];if(s={...s,...a},a.progressPenalty&&n({type:"UPDATE_PROJECT",payload:{id:e.id,changes:{progress:Math.max(0,e.progress-a.progressPenalty)}}}),a.costModifier&&e.etapCosts){const t=Math.round(e.etapCosts.environmental_decision*a.costModifier);n({type:"UPDATE_PROJECT_STAGE_COST",payload:{projectId:e.id,stage:"environmental_decision",cost:t}})}a.reputationChange&&n({type:"UPDATE_REPUTATION",payload:{change:a.reputationChange,reason:a.title,turn:t.turn}})}break;case"zoning_conditions":case"grid_connection":if(a){const i=[{title:"Przychylne w\u0142adze lokalne",description:`W\u0142adze lokalne wspieraj\u0105 projekt ${e.name}, co przyspiesza proces wydawania pozwole\u0144.`,progressBonus:Math.floor(15*Math.random())+10,reputationChange:2},{title:"Szybkie uzgodnienia sieciowe",description:`Operator przy\u0142\u0105czy przyzna\u0142 priorytet dla projektu ${e.name}.`,progressBonus:Math.floor(20*Math.random())+15},{title:"Wsparcie techniczne",description:`Eksperci bran\u017cowi zaoferowali wsparcie dla projektu ${e.name}.`,progressBonus:Math.floor(10*Math.random())+8,costModifier:.85}],a=i[Math.floor(Math.random()*i.length)];if(s={...s,...a},a.progressBonus&&n({type:"UPDATE_PROJECT",payload:{id:e.id,changes:{progress:Math.min(100,e.progress+a.progressBonus)}}}),a.costModifier&&e.etapCosts){const t=e.status,i=Math.round(e.etapCosts[t]*a.costModifier);n({type:"UPDATE_PROJECT_STAGE_COST",payload:{projectId:e.id,stage:t,cost:i}})}a.reputationChange&&n({type:"UPDATE_REPUTATION",payload:{change:a.reputationChange,reason:a.title,turn:t.turn}})}else{const i=[{title:"Op\xf3\u017anienia administracyjne",description:`Biurokracja spowalnia proces wydawania pozwole\u0144 dla projektu ${e.name}.`,progressPenalty:Math.floor(15*Math.random())+10},{title:"Problemy z przy\u0142\u0105czeniem",description:`Operator sieci zg\u0142asza trudno\u015bci z przy\u0142\u0105czeniem projektu ${e.name}.`,progressPenalty:Math.floor(20*Math.random())+15,costModifier:1.2},{title:"Protesty mieszka\u0144c\xf3w",description:`Lokalna spo\u0142eczno\u015b\u0107 protestuje przeciwko projektowi ${e.name}.`,progressPenalty:Math.floor(25*Math.random())+15,reputationChange:-3}],a=i[Math.floor(Math.random()*i.length)];if(s={...s,...a},a.progressPenalty&&n({type:"UPDATE_PROJECT",payload:{id:e.id,changes:{progress:Math.max(0,e.progress-a.progressPenalty)}}}),a.costModifier&&e.etapCosts){const t=e.status,i=Math.round(e.etapCosts[t]*a.costModifier);n({type:"UPDATE_PROJECT_STAGE_COST",payload:{projectId:e.id,stage:t,cost:i}})}a.reputationChange&&n({type:"UPDATE_REPUTATION",payload:{change:a.reputationChange,reason:a.title,turn:t.turn}})}break;default:return}n({type:"ADD_EVENT",payload:s}),i({type:"SET_NOTIFICATION",payload:{text:`${s.title}: ${s.description}`,type:"positive"===s.severity?"success":"warning"}}),n({type:"ADD_PROJECT_EVENT",payload:{projectId:e.id,event:{turn:t.turn,text:`${s.title}: ${s.description}`}}})}}))}),[]),getReputationCostMultiplier:t,getReputationTimeMultiplier:n,getIllegalActionMultiplier:i,shouldTriggerAudit:a,performAudit:s}};class x{constructor(e,t,n,i){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.id=e||Date.now()+Math.random(),this.name=t,this.description=n,this.duration=i,this.image=a,this.startDate=null,this.expiryDate=null}activate(e){this.startDate=new Date(e);const t=new Date(e);return t.setDate(t.getDate()+this.duration),this.expiryDate=t,this}isExpired(e){return!!this.expiryDate&&e>this.expiryDate}getEffect(){return{}}}class w extends x{constructor(e,t,n,i,a){super(e,t,n,i,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null),this.type="economic",this.effects=a}getEffect(){return this.effects}}class _ extends x{constructor(e,t,n,i,a){super(e,t,n,i,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null),this.type="political",this.effects=a}getEffect(){return this.effects}}class b extends x{constructor(e,t,n,i,a){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;super(e,t,n,i,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null),this.type="social",this.effects=a,this.region=s}getEffect(){const e={...this.effects};return this.region&&(e.regionalEffect={region:this.region,...e.regionalEffect}),e}}class j extends x{constructor(e,t,n,i,a){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;super(e,t,n,i,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null),this.type="environmental",this.effects=a,this.region=s}getEffect(){const e={...this.effects};return this.region&&(e.regionalEffect={region:this.region,...e.regionalEffect}),e}}class k extends x{constructor(e,t,n,i,a){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;super(e,t,n,i,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null),this.type="technological",this.effects=a,this.technology=s}getEffect(){const e={...this.effects};return this.technology&&(e.technologyEffect={technology:this.technology,...e.technologyEffect}),e}}const z=[new w("econ_1","Wzrost cen pr\u0105du na rynku","Ceny energii elektrycznej na rynku wzros\u0142y o 15%, zwi\u0119kszaj\u0105c atrakcyjno\u015b\u0107 projekt\xf3w OZE.",30,{marketModifier:1.15,permitTimeModifier:1}),new w("econ_2","Spadek cen pr\u0105du na rynku","Ceny energii elektrycznej na rynku spad\u0142y o 10%, zmniejszaj\u0105c op\u0142acalno\u015b\u0107 projekt\xf3w OZE.",21,{marketModifier:.9,permitTimeModifier:1}),new w("econ_3","Wzrost st\xf3p procentowych","NBP podni\xf3s\u0142 stopy procentowe, co utrudnia finansowanie projekt\xf3w i zwi\u0119ksza koszty kredyt\xf3w.",60,{buildCostModifier:1.1,marketModifier:.95}),new w("econ_4","Kryzys na rynku surowc\xf3w","Globalny kryzys na rynku surowc\xf3w zwi\u0119ksza koszty budowy farm PV i wiatrowych.",45,{buildCostModifier:1.2,marketModifier:1.05}),new w("econ_5","Nowe fundusze UE dla OZE","Unia Europejska uruchomi\u0142a nowe fundusze na rozw\xf3j OZE, co zwi\u0119ksza warto\u015b\u0107 projekt\xf3w.",90,{marketModifier:1.2,buildCostModifier:.95,reputationChange:5}),new w("eco_6","Dotacje dla hybryd PV+BESS","Rz\u0105d wprowadzi\u0142 program dotacji pokrywaj\u0105cy 30% koszt\xf3w magazyn\xf3w energii w projektach hybrydowych.",120,{marketModifier:1.2,permitTimeModifier:.9,technologyEffect:{technology:"BESS",marketModifier:1.3}}),new w("eco_7","Ulgi podatkowe dla inwestor\xf3w OZE","Wprowadzono 50% odliczenia VAT dla firm inwestuj\u0105cych w projekty energetyki odnawialnej.",180,{marketModifier:1.15,permitTimeModifier:.85}),new w("eco_8","Aukcje CPPA","Wprowadzono system d\u0142ugoterminowych kontrakt\xf3w dla przemys\u0142u, umo\u017cliwiaj\u0105cych stabilne finansowanie projekt\xf3w OZE.",150,{marketModifier:1.25}),new w("eco_9",'Program "Prosument 3.0"',"Nowy program rz\u0105dowy oferuje dotacje do 60% dla mikroinstalacji fotowoltaicznych.",90,{technologyEffect:{technology:"PV",marketModifier:1.2}}),new w("eco_10","C\u0142a na komponenty","Wprowadzono 20% c\u0142o na panele fotowoltaiczne z Chin, podnosz\u0105c koszty inwestycji.",120,{technologyEffect:{technology:"PV",marketModifier:.85,buildCostModifier:1.2},severity:"negative"})],N=[new _("pol_1","Nowelizacja ustawy o OZE","Sejm przyj\u0105\u0142 nowelizacj\u0119 ustawy o OZE, kt\xf3ra upraszcza procedury administracyjne.",120,{permitTimeModifier:.8,reputationChange:3}),new _("pol_2","Zaostrzenie wymaga\u0144 \u015brodowiskowych","Nowe przepisy zaostrzaj\u0105 wymagania dotycz\u0105ce ocen oddzia\u0142ywania na \u015brodowisko.",90,{permitTimeModifier:1.3,reputationChange:-2}),new _("pol_3","Reforma systemu aukcyjnego","Rz\u0105d zreformowa\u0142 system aukcyjny OZE, wprowadzaj\u0105c korzystniejsze zasady dla inwestor\xf3w.",180,{marketModifier:1.1,permitTimeModifier:.9,reputationChange:5}),new _("pol_4","Ograniczenie dotacji dla OZE","Rz\u0105d ograniczy\u0142 dotacje dla nowych projekt\xf3w OZE, co zmniejsza ich op\u0142acalno\u015b\u0107.",150,{marketModifier:.85,reputationChange:-3}),new _("pol_5","Nowe cele klimatyczne","Polska przyj\u0119\u0142a ambitniejsze cele klimatyczne, zwi\u0119kszaj\u0105c zapotrzebowanie na OZE.",210,{marketModifier:1.15,reputationChange:7}),new _("pol_6",'Ustawa "Fast-track"',"Sejm przyj\u0105\u0142 ustaw\u0119 znacz\u0105co skracaj\u0105c\u0105 proces pozwole\u0144 dla projekt\xf3w OZE z 5 do 2 lat.",365,{permitTimeModifier:.6,reputationChange:5}),new _("pol_7","Krajowy Plan Modernizacji Sieci","Rz\u0105d przeznaczy\u0142 10 mld z\u0142 na rozbudow\u0119 infrastruktury przesy\u0142owej, zwi\u0119kszaj\u0105c mo\u017cliwo\u015bci przy\u0142\u0105czeniowe.",240,{permitTimeModifier:.75,buildCostModifier:.9}),new _("pol_8","Strategia wodorowa","Przyj\u0119to strategi\u0119 rozwoju wodoru z OZE z celem 2 GW mocy do 2030 roku.",180,{marketModifier:1.15}),new _("pol_9","Zmiana ustawy odleg\u0142o\u015bciowej","Wprowadzono zakaz budowy wiatrak\xf3w w promieniu 1 km od zabudowa\u0144, co utrudnia rozw\xf3j energetyki wiatrowej.",300,{technologyEffect:{technology:"WF",marketModifier:.7,permitTimeModifier:1.5},severity:"negative"}),new _("pol_10","Op\xf3\u017anienie offshore","Brak ustawy o morskiej energetyce wiatrowej wstrzymuje projekty o \u0142\u0105cznej mocy 10 GW.",150,{technologyEffect:{technology:"WF",marketModifier:.8},severity:"negative"})],P=[new b("soc_1","Protesty przeciwko farmom wiatrowym","W wielu regionach kraju nasili\u0142y si\u0119 protesty lokalnych spo\u0142eczno\u015bci przeciwko farmom wiatrowym.",60,{permitTimeModifier:1.2,reputationChange:-3}),new b("soc_2","Wzrost poparcia dla OZE","Badania pokazuj\u0105 rekordowy wzrost poparcia spo\u0142ecznego dla energetyki odnawialnej.",90,{permitTimeModifier:.9,reputationChange:4}),new b("soc_3","Lokalna kampania przeciwko PV","W wojew\xf3dztwie ma\u0142opolskim rozwin\u0119\u0142a si\u0119 kampania przeciwko wielkoobszarowym farmom PV.",45,{regionalEffect:{permitTimeModifier:1.3}},"ma\u0142opolskie"),new b("soc_4","Program edukacyjny o OZE","Ministerstwo Klimatu uruchomi\u0142o og\xf3lnopolski program edukacyjny na temat korzy\u015bci z OZE.",120,{permitTimeModifier:.95,reputationChange:2}),new b("soc_5","Konflikt o turbiny przy wybrze\u017cu","Nasili\u0142 si\u0119 konflikt mi\u0119dzy rybakami a inwestorami farm wiatrowych na Ba\u0142tyku.",75,{regionalEffect:{permitTimeModifier:1.4}},"pomorskie"),new b("soc_6","Subsydia dla mieszka\u0144c\xf3w",'Program "Energia dla Spo\u0142eczno\u015bci" oferuje darmowe instalacje PV w zamian za zgod\u0119 na farmy wiatrowe.',120,{permitTimeModifier:.8,reputationChange:5}),new b("soc_7","Nowe miejsca pracy","Budowa farmy wiatrowej 50 MW stworzy\u0142a 100 sta\u0142ych miejsc pracy w regionie.",90,{reputationChange:3,technologyEffect:{technology:"WF",marketModifier:1.1}},"zachodniopomorskie"),new b("soc_8","Programy edukacyjne OZE",'Warsztaty "Zielona Gmina" w szko\u0142ach, finansowane przez deweloper\xf3w, zwi\u0119kszaj\u0105 spo\u0142eczn\u0105 akceptacj\u0119 projekt\xf3w.',150,{permitTimeModifier:.9,reputationChange:2}),new b("soc_9","Protesty NIMBY","Blokada budowy farmy wiatrowej przez mieszka\u0144c\xf3w gminy wzbudzi\u0142a obawy inwestor\xf3w.",60,{permitTimeModifier:1.3,reputationChange:-4,technologyEffect:{technology:"WF",marketModifier:.9}},"ma\u0142opolskie"),new b("soc_10","Bunt spo\u0142eczno\u015bci","Mieszka\u0144cy blokuj\u0105 wjazd ci\u0119\u017car\xf3wek na plac budowy farmy fotowoltaicznej.",45,{buildCostModifier:1.2,permitTimeModifier:1.4,reputationChange:-3},"podkarpackie")],S=[new j("env_1","Rekordowo s\u0142oneczne lato","Tegoroczne lato przynios\u0142o rekordow\u0105 liczb\u0119 dni s\u0142onecznych, co zwi\u0119ksza wydajno\u015b\u0107 PV.",90,{technologyEffect:{technology:"PV",marketModifier:1.1}}),new j("env_2","Silne wiatry na p\xf3\u0142nocy","Na p\xf3\u0142nocy Polski utrzymuj\u0105 si\u0119 wyj\u0105tkowo silne wiatry, zwi\u0119kszaj\u0105c potencja\u0142 farm wiatrowych.",60,{regionalEffect:{marketModifier:1.15},technologyEffect:{technology:"WF",marketModifier:1.1}},"pomorskie"),new j("env_3","Susze w centralnej Polsce","D\u0142ugotrwa\u0142e susze w centralnej Polsce powoduj\u0105 konflikty o wykorzystanie grunt\xf3w.",75,{regionalEffect:{permitTimeModifier:1.2}},"mazowieckie"),new j("env_4","Odkrycie cennego gatunku ptak\xf3w","W wojew\xf3dztwie podlaskim odkryto rzadki gatunek ptak\xf3w, co komplikuje projekty OZE.",120,{regionalEffect:{permitTimeModifier:1.5}},"podlaskie"),new j("env_5","Wysoki poziom zanieczyszczenia powietrza","Zim\u0105 odnotowano rekordowo wysokie poziomy zanieczyszczenia powietrza, co zwi\u0119ksza poparcie dla OZE.",60,{permitTimeModifier:.9,reputationChange:3}),new j("env_6","Korytarze bior\xf3\u017cnorodno\u015bci","Wsp\xf3\u0142projekty z ekologami, w tym tworzenie pasiek przy farmach PV, zwi\u0119kszaj\u0105 akceptacj\u0119 \u015brodowiskow\u0105.",120,{permitTimeModifier:.85,reputationChange:3,technologyEffect:{technology:"PV",buildCostModifier:1.05}}),new j("env_7","Ekstremalne warunki pogodowe","Gradobicie uszkodzi\u0142o znaczn\u0105 cz\u0119\u015b\u0107 paneli fotowoltaicznych w centralnej Polsce.",45,{buildCostModifier:1.2,technologyEffect:{technology:"PV",marketModifier:.9}},"\u0142\xf3dzkie"),new j("env_8","\u015amiertelno\u015b\u0107 ptak\xf3w","Aktywi\u015bci zaskar\u017cyli dewelopera za zabijanie chronionych gatunk\xf3w ptak\xf3w przez turbiny wiatrowe.",90,{permitTimeModifier:1.3,reputationChange:-3,technologyEffect:{technology:"WF",marketModifier:.85}},"warmi\u0144sko-mazurskie"),new j("env_9","Odkrycie cennego gatunku","W wojew\xf3dztwie lubelskim odkryto rzadki gatunek ro\u015blin, co komplikuje projekty OZE w regionie.",150,{regionalEffect:{permitTimeModifier:1.4}},"lubelskie"),new j("env_10","Degradacja \u015brodowiska","Wycinka 50 ha lasu pod farm\u0119 PV wywo\u0142a\u0142a skandal ekologiczny.",75,{permitTimeModifier:1.5,reputationChange:-5,technologyEffect:{technology:"PV",marketModifier:.8}})],E=[new k("tech_1","Prze\u0142om w wydajno\u015bci paneli PV","Naukowcy opracowali now\u0105 technologi\u0119 zwi\u0119kszaj\u0105c\u0105 wydajno\u015b\u0107 paneli fotowoltaicznych o 25%.",150,{technologyEffect:{technology:"PV",buildCostModifier:.9,marketModifier:1.15}},"PV"),new k("tech_2","Nowa generacja turbin wiatrowych","Na rynek wesz\u0142a nowa generacja turbin wiatrowych o lepszej wydajno\u015bci i ni\u017cszej emisji ha\u0142asu.",180,{technologyEffect:{technology:"WF",buildCostModifier:.85,marketModifier:1.2}},"WF"),new k("tech_3","Innowacje w magazynach energii","Prze\u0142omowe innowacje w technologii magazyn\xf3w energii zwi\u0119kszaj\u0105 ich op\u0142acalno\u015b\u0107.",120,{technologyEffect:{technology:"BESS",buildCostModifier:.8,marketModifier:1.3}},"BESS"),new k("tech_4","Problemy jako\u015bciowe z chi\u0144skimi panelami","Wykryto problemy jako\u015bciowe w panelach fotowoltaicznych importowanych z Chin.",90,{technologyEffect:{technology:"PV",buildCostModifier:1.15,marketModifier:.9}},"PV"),new k("tech_5","Nowy system prognozowania wiatru","Opracowano nowy system prognozowania wiatru, zwi\u0119kszaj\u0105cy efektywno\u015b\u0107 farm wiatrowych.",100,{technologyEffect:{technology:"WF",marketModifier:1.1}},"WF"),new k("tech_6","Innowacyjne trackery PV","Nowe systemy \u015bledzenia s\u0142o\u0144ca zwi\u0119kszaj\u0105 wydajno\u015b\u0107 paneli fotowoltaicznych o 25%.",180,{technologyEffect:{technology:"PV",buildCostModifier:.85,marketModifier:1.2}}),new k("tech_7","Hybrydyzacja OZE","Po\u0142\u0105czenie PV z wiatrem redukuje LCOE o 18%, zwi\u0119kszaj\u0105c op\u0142acalno\u015b\u0107 projekt\xf3w.",150,{buildCostModifier:.9,marketModifier:1.15}),new k("tech_8","Optymalizacja BESS","Nowe algorytmy zarz\u0105dzania zmniejszaj\u0105 straty energii w magazynach o 12%.",120,{technologyEffect:{technology:"BESS",marketModifier:1.25}}),new k("tech_9","Partnerstwo z Google","Wdro\u017cenie AI do prognozowania produkcji energii zwi\u0119ksza efektywno\u015b\u0107 zarz\u0105dzania farmami.",90,{marketModifier:1.1}),new k("tech_10","Awaria technologii","Magazyn BESS eksplodowa\u0142 z powodu b\u0142\u0119d\xf3w projektowych, wywo\u0142uj\u0105c obawy inwestor\xf3w.",60,{technologyEffect:{technology:"BESS",marketModifier:.75,buildCostModifier:1.3},severity:"negative"})];class M extends x{constructor(e,t,n,i,a,s){let r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;super(e,t,n,i,arguments.length>7&&void 0!==arguments[7]?arguments[7]:null),this.type="local",this.effects=a,this.region=s,this.county=r}getEffect(){const e={...this.effects};return this.region&&(e.regionalEffect={region:this.region,...e.regionalEffect}),this.county&&(e.countyEffect={region:this.region,county:this.county,...e.countyEffect}),e}}const C=[new M("local_1","Modernizacja infrastruktury","Deweloperzy finansuj\u0105 remont dr\xf3g dojazdowych w gminie, zwi\u0119kszaj\u0105c przychylno\u015b\u0107 mieszka\u0144c\xf3w.",90,{permitTimeModifier:.8,reputationChange:3},"ma\u0142opolskie","krakowski"),new M("local_2","Wzrost przychod\xf3w gminy","Dodatkowe 500 000 z\u0142/rok z podatk\xf3w od farmy 20 MW zwi\u0119kszy\u0142o poparcie lokalnych w\u0142adz.",120,{permitTimeModifier:.7,reputationChange:4},"mazowieckie","p\u0142ocki"),new M("local_3","Projekty spo\u0142eczne","Budowa \u015bwietlicy i si\u0142owni plenerowej w zamian za zgod\u0119 na inwestycj\u0119 OZE.",180,{permitTimeModifier:.75,reputationChange:5},"podlaskie","bia\u0142ostocki"),new M("local_4","Klastry energii","Gminy \u0142\u0105cz\u0105 si\u0119 w lokalny system energetyczny, zwi\u0119kszaj\u0105c mo\u017cliwo\u015bci przy\u0142\u0105czeniowe.",150,{permitTimeModifier:.85,buildCostModifier:.9},"\u015bl\u0105skie","cz\u0119stochowski"),new M("local_5","Konflikty o grunty","W\u0142a\u015bciciele ziemi \u017c\u0105daj\u0105 podwy\u017cek czynszu o 300%, co utrudnia pozyskiwanie grunt\xf3w.",60,{buildCostModifier:1.3,permitTimeModifier:1.2},"wielkopolskie","pozna\u0144ski"),new M("local_6","Brak przy\u0142\u0105czy","Operator odmawia pod\u0142\u0105czenia farmy z powodu przeci\u0105\u017cenia sieci w regionie.",90,{permitTimeModifier:1.5},"\u0142\xf3dzkie","\u0142\xf3dzki wschodni"),new M("local_7","Spadek warto\u015bci nieruchomo\u015bci","Domy w pobli\u017cu farmy wiatrowej straci\u0142y 20% warto\u015bci, wywo\u0142uj\u0105c protesty mieszka\u0144c\xf3w.",75,{permitTimeModifier:1.3,reputationChange:-4},"pomorskie","s\u0142upski")];class T extends x{constructor(e,t,n,i,a){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;super(e,t,n,i,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null),this.type="project",this.effects=a,this.technology=s}getEffect(){const e={...this.effects};return this.technology&&(e.technologyEffect={technology:this.technology,...e.technologyEffect}),e}}const L=[new T("proj_1","Finansowanie z UE","Uzyskano grant 15 mln z\u0142 z Funduszu Sp\xf3jno\u015bci na budow\u0119 magazynu energii.",90,{buildCostModifier:.7,technologyEffect:{marketModifier:1.2}},"BESS"),new T("proj_2","Digital Twin","Cyfrowy model farmy zmniejsza ryzyko awarii o 40%, zwi\u0119kszaj\u0105c warto\u015b\u0107 projektu.",120,{marketModifier:1.15},"PV"),new T("proj_3","Certyfikat ESG","Uzyskanie ratingu AA+ przyci\u0105ga inwestor\xf3w i zwi\u0119ksza warto\u015b\u0107 projektu.",150,{marketModifier:1.2,reputationChange:3}),new T("proj_4","Recykling na miejscu","Mobilne zak\u0142ady przetwarzania zu\u017cytych paneli zwi\u0119kszaj\u0105 ekologiczno\u015b\u0107 projektu.",180,{marketModifier:1.1,reputationChange:4},"PV"),new T("proj_5","Op\xf3\u017anienie pozwole\u0144","Decyzja \u015brodowiskowa przeci\u0105ga si\u0119 o 18 miesi\u0119cy z powodu protest\xf3w ekolog\xf3w.",90,{permitTimeModifier:1.6}),new T("proj_6","Bank wycofuje finansowanie","Podwy\u017cka st\xf3p procentowych spowodowa\u0142a wycofanie si\u0119 banku z finansowania projektu.",60,{marketModifier:.8,buildCostModifier:1.2}),new T("proj_7","Wzrost sk\u0142adek ubezpieczeniowych","Po huraganie koszt polisy dla farm PV wzr\xf3s\u0142 o 200%.",120,{buildCostModifier:1.15},"PV")],O=[...z,...N,...P,...S,...E,...C,...L],A=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=[...O];if(e&&(t=t.filter((t=>t.type===e))),0===t.length)return null;return t[Math.floor(Math.random()*t.length)]},I=(e,t)=>{const n=[];return Object.entries({economic:.2,political:.15,social:.18,environmental:.17,technological:.14,local:.25,project:.2}).forEach((t=>{let[i,a]=t;if(Math.random()<a){const t=A(i);t&&n.push(t.activate(e))}})),n},R={turn:1,day:1,currentScreen:"map",selectedRegion:null,selectedProject:null,selectedCounty:null,notification:null,gameSpeed:1,competitors:[{id:"competitor1",name:"GreenPower Polska",power:8e3,rtbPower:2e3,growth:1.1,strongRegions:["mazowieckie","wielkopolskie","slaskie"],strategy:"aggressive",reputation:70,description:"Najwi\u0119kszy deweloper OZE w Polsce, agresywnie rozwijaj\u0105cy sw\xf3j portfel projekt\xf3w. Koncentruje si\u0119 na du\u017cych farmach fotowoltaicznych i wiatrowych w centralnej i zachodniej Polsce.",focusTechnologies:["PV","WF"],foundedYear:2010},{id:"competitor2",name:"SolarTech",power:5e3,rtbPower:1500,growth:1.2,strongRegions:["malopolskie","podkarpackie","lubelskie"],strategy:"balanced",reputation:65,description:"Firma specjalizuj\u0105ca si\u0119 w projektach fotowoltaicznych, z rosn\u0105cym zainteresowaniem magazynami energii. Dzia\u0142a g\u0142\xf3wnie w po\u0142udniowo-wschodniej Polsce.",focusTechnologies:["PV","BESS"],foundedYear:2015},{id:"competitor3",name:"WindForce",power:6e3,rtbPower:1800,growth:1.15,strongRegions:["pomorskie","zachodniopomorskie","warminsko-mazurskie"],strategy:"conservative",reputation:80,description:"Do\u015bwiadczony deweloper farm wiatrowych z siln\u0105 pozycj\u0105 w p\xf3\u0142nocnej Polsce. Znany z wysokiej jako\u015bci projekt\xf3w i dobrych relacji z lokalnymi spo\u0142eczno\u015bciami.",focusTechnologies:["WF"],foundedYear:2008},{id:"competitor4",name:"EnergyStorage Systems",power:3e3,rtbPower:900,growth:1.25,strongRegions:["lodzkie","mazowieckie","slaskie"],strategy:"aggressive",reputation:60,description:"Nowy, szybko rozwijaj\u0105cy si\u0119 gracz specjalizuj\u0105cy si\u0119 w magazynach energii. Agresywnie pozyskuje lokalizacje w pobli\u017cu du\u017cych o\u015brodk\xf3w przemys\u0142owych i w\u0119z\u0142\xf3w energetycznych.",focusTechnologies:["BESS","PV"],foundedYear:2018},{id:"competitor5",name:"EcoEnergy",power:4500,rtbPower:1200,growth:1.05,strongRegions:["wielkopolskie","lubuskie","dolnoslaskie"],strategy:"conservative",reputation:75,description:"Stabilna firma z d\u0142ug\u0105 histori\u0105 na rynku OZE, dzia\u0142aj\u0105ca g\u0142\xf3wnie w zachodniej Polsce. Ostro\u017cnie podchodzi do nowych projekt\xf3w, ale ma solidny portfel aktyw\xf3w.",focusTechnologies:["PV","WF"],foundedYear:2005}],marketProjects:[],marketHistory:[],marketPriceModifiers:{PV:1,WF:1,BESS:1},parallelProcessing:{enabled:!0,maxParallelTasks:3},gameDate:new Date(2025,0,1),lastDateUpdate:new Date,gameGoals:{rtbPowerTarget:25e3,cashTarget:1e10,currentRtbPower:0,isWon:!1,winReason:null,startYear:2025},countySettings:{showCounties:!0,filterByPotential:!1,minSolarPotential:0,minWindPotential:0,maxLocalOpposition:100},globalEvents:{currentEvents:[],eventProbabilities:{economic:.25,political:.2,social:.25,environmental:.2,technological:.2,local:.3,project:.25}}};function D(e,t){switch(t.type){case"SET_SCREEN":return{...e,currentScreen:t.payload};case"SELECT_REGION":return{...e,selectedRegion:t.payload,selectedCounty:null};case"SELECT_PROJECT":return{...e,selectedProject:t.payload};case"SELECT_COUNTY":return{...e,selectedCounty:{voivodeshipId:t.payload.voivodeshipId,countyId:t.payload.countyId}};case"SET_NOTIFICATION":return{...e,notification:t.payload};case"SET_GAME_SPEED":return{...e,gameSpeed:t.payload};case"NEXT_DAY":const n=e.gameSpeed,i=((e,t)=>{const n=new Date(e);return n.setDate(n.getDate()+t),n})(e.gameDate,n),a=e.globalEvents.currentEvents.filter((e=>!e.isExpired(i)));return{...e,day:e.day+1,turn:e.day%2===1?e.turn+1:e.turn,gameDate:i,lastDateUpdate:new Date,globalEvents:{...e.globalEvents,currentEvents:a}};case"UPDATE_MARKET_PROJECTS":return{...e,marketProjects:t.payload};case"ADD_MARKET_TRANSACTION":return{...e,marketHistory:[...e.marketHistory,t.payload],marketProjects:e.marketProjects.filter((e=>e.id!==t.payload.projectId))};case"UPDATE_MARKET_PRICE_MODIFIERS":return{...e,marketPriceModifiers:{...e.marketPriceModifiers,...t.payload}};case"SET_PARALLEL_PROCESSING":return{...e,parallelProcessing:{...e.parallelProcessing,...t.payload}};case"UPDATE_GAME_GOALS":return{...e,gameGoals:{...e.gameGoals,...t.payload}};case"SET_WIN_CONDITION":return{...e,gameGoals:{...e.gameGoals,isWon:!0,winReason:t.payload}};case"ADD_GLOBAL_EVENT":return{...e,globalEvents:{...e.globalEvents,currentEvents:[...e.globalEvents.currentEvents,t.payload]}};case"ADD_GLOBAL_EVENTS":return{...e,globalEvents:{...e.globalEvents,currentEvents:[...e.globalEvents.currentEvents,...t.payload]}};case"REMOVE_GLOBAL_EVENT":return{...e,globalEvents:{...e.globalEvents,currentEvents:e.globalEvents.currentEvents.filter((e=>e.id!==t.payload))}};case"UPDATE_EVENT_PROBABILITIES":return{...e,globalEvents:{...e.globalEvents,eventProbabilities:{...e.globalEvents.eventProbabilities,...t.payload}}};default:return e}}const B=(0,e.createContext)(),W=t=>{let{children:n}=t;const[a,s]=(0,e.useReducer)(D,R),{updateProjects:r,generateStaffEvents:o}=v(),l=function(e){s({type:"SET_NOTIFICATION",payload:{text:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info"}}),setTimeout((()=>{s({type:"SET_NOTIFICATION",payload:null})}),5e3)},c=()=>{a.gameGoals.currentRtbPower>=a.gameGoals.rtbPowerTarget&&!a.gameGoals.isWon&&(s({type:"SET_WIN_CONDITION",payload:"rtb_power"}),l("Gratulacje! Osi\u0105gn\u0105\u0142e\u015b cel 25 GW mocy w projektach Ready-to-Build. Jeste\u015b liderem polskiego rynku OZE!","win")),a.gameGoals.cash>=a.gameGoals.cashTarget&&!a.gameGoals.isWon&&(s({type:"SET_WIN_CONDITION",payload:"cash"}),l("Gratulacje! Zgromadzi\u0142e\u015b 10 miliard\xf3w z\u0142otych! Jeste\u015b finansowym gigantem polskiego rynku OZE!","win"))};return(0,i.jsx)(B.Provider,{value:{state:a,dispatch:s,showNotification:l,nextDay:()=>{const e=Math.floor(3*Math.random())+1;let t=[];for(let n=0;n<e;n++){const e=I(a.gameDate,a.globalEvents.eventProbabilities);t=[...t,...e]}if(t&&t.length>0){s({type:"ADD_GLOBAL_EVENTS",payload:t});t.slice(0,3).forEach((e=>{l(`Nowe wydarzenie: ${e.name} - ${e.description.substring(0,100)}${e.description.length>100?"...":""}`,"event")})),t.length>3&&l(`\u0141\u0105cznie wygenerowano ${t.length} nowych wydarze\u0144. Sprawd\u017a zak\u0142adk\u0119 Wydarzenia.`,"info")}s({type:"NEXT_DAY"}),window.dispatchEvent(new CustomEvent("next-game-day")),c()},checkGameGoals:c,calculateEventsEffect:e=>{if(!a.globalEvents.currentEvents||0===a.globalEvents.currentEvents.length)return 1;let t=1;return a.globalEvents.currentEvents.forEach((n=>{const i=n.getEffect();i[e]&&(t*=i[e]),i.regionalEffect&&i.regionalEffect[e]&&(t*=i.regionalEffect[e]),i.technologyEffect&&i.technologyEffect[e]&&(t*=i.technologyEffect[e])})),t}},children:n})},F=()=>{const t=(0,e.useContext)(B);if(!t)throw new Error("useGameContext musi by\u0107 u\u017cywany wewn\u0105trz GameProvider");return t},Z=(0,e.createContext)(),U={events:[{id:"initial-event-1",type:"economic_event",title:"Pocz\u0105tek dzia\u0142alno\u015bci",description:"Rozpoczynasz swoj\u0105 przygod\u0119 w sektorze OZE. Powodzenia!",severity:"positive",turn:1,expires:10},{id:"initial-event-2",type:"staff_event",title:"Zatrudnienie pierwszych pracownik\xf3w",description:"Czas zbudowa\u0107 zesp\xf3\u0142, kt\xf3ry b\u0119dzie realizowa\u0142 Twoje projekty.",severity:"info",turn:1,expires:8},{id:"initial-event-3",type:"project_event",title:"Rynek OZE w Polsce",description:"Rynek OZE w Polsce dynamicznie si\u0119 rozwija. To dobry moment na inwestycje.",severity:"info",turn:1,expires:12}],filters:{type:"all",severity:"all",staffId:null,projectId:null}};function $(e,t){switch(t.type){case"ADD_EVENT":return{...e,events:[...e.events,t.payload]};case"REMOVE_EVENT":return{...e,events:e.events.filter((e=>e.id!==t.payload))};case"CLEAR_EXPIRED_EVENTS":return{...e,events:e.events.filter((e=>!e.expires||e.expires>t.payload.currentTurn))};case"SET_FILTER":return{...e,filters:{...e.filters,[t.payload.filterType]:t.payload.value}};case"CLEAR_FILTERS":return{...e,filters:{type:"all",severity:"all",staffId:null,projectId:null}};default:return e}}function V(t){let{children:n}=t;const[a,s]=(0,e.useReducer)($,U);return(0,i.jsx)(Z.Provider,{value:{state:a,dispatch:s},children:n})}function H(){const t=(0,e.useContext)(Z);if(!t)throw new Error("useEventsContext must be used within an EventsProvider");return t}const q=[{id:"dolnoslaskie",name:"Dolno\u015bl\u0105skie",gridCapacity:500,solarConditions:70,windConditions:60,socialAcceptance:60,environmentalComplexity:1.2,adminEfficiency:.9,availableLand:12e3,landPriceMultiplier:1.1,projects:[],protests:[],dominantPlayer:null,isOPRO:!1},{id:"kujawsko-pomorskie",name:"Kujawsko-Pomorskie",gridCapacity:400,solarConditions:65,windConditions:75,socialAcceptance:50,environmentalComplexity:1,adminEfficiency:1,availableLand:15e3,landPriceMultiplier:.9,projects:[],protests:[],dominantPlayer:null,isOPRO:!0},{id:"lubelskie",name:"Lubelskie",gridCapacity:380,solarConditions:75,windConditions:55,socialAcceptance:65,environmentalComplexity:.9,adminEfficiency:1.1,availableLand:18e3,landPriceMultiplier:.8,projects:[],protests:[],dominantPlayer:null,isOPRO:!1},{id:"lubuskie",name:"Lubuskie",gridCapacity:320,solarConditions:65,windConditions:70,socialAcceptance:55,environmentalComplexity:.8,adminEfficiency:1,availableLand:13e3,landPriceMultiplier:.9,projects:[],protests:[],dominantPlayer:null,isOPRO:!1},{id:"lodzkie",name:"\u0141\xf3dzkie",gridCapacity:450,solarConditions:70,windConditions:65,socialAcceptance:60,environmentalComplexity:1,adminEfficiency:1,availableLand:14e3,landPriceMultiplier:1,projects:[],protests:[],dominantPlayer:null,isOPRO:!0},{id:"malopolskie",name:"Ma\u0142opolskie",gridCapacity:420,solarConditions:65,windConditions:50,socialAcceptance:55,environmentalComplexity:1.3,adminEfficiency:.9,availableLand:9e3,landPriceMultiplier:1.3,projects:[],protests:[],dominantPlayer:null,isOPRO:!1},{id:"mazowieckie",name:"Mazowieckie",gridCapacity:550,solarConditions:70,windConditions:65,socialAcceptance:65,environmentalComplexity:1,adminEfficiency:.8,availableLand:2e4,landPriceMultiplier:1.2,projects:[],protests:[],dominantPlayer:null,isOPRO:!0},{id:"opolskie",name:"Opolskie",gridCapacity:300,solarConditions:65,windConditions:60,socialAcceptance:60,environmentalComplexity:1,adminEfficiency:1.1,availableLand:8e3,landPriceMultiplier:.9,projects:[],protests:[],dominantPlayer:null,isOPRO:!1},{id:"podkarpackie",name:"Podkarpackie",gridCapacity:340,solarConditions:70,windConditions:50,socialAcceptance:60,environmentalComplexity:1.2,adminEfficiency:1,availableLand:12e3,landPriceMultiplier:.8,projects:[],protests:[],dominantPlayer:null,isOPRO:!1},{id:"podlaskie",name:"Podlaskie",gridCapacity:320,solarConditions:65,windConditions:60,socialAcceptance:55,environmentalComplexity:1.1,adminEfficiency:1,availableLand:16e3,landPriceMultiplier:.7,projects:[],protests:[],dominantPlayer:null,isOPRO:!1},{id:"pomorskie",name:"Pomorskie",gridCapacity:430,solarConditions:60,windConditions:85,socialAcceptance:70,environmentalComplexity:1.1,adminEfficiency:.9,availableLand:13e3,landPriceMultiplier:1.1,projects:[],protests:[],dominantPlayer:null,isOPRO:!0},{id:"slaskie",name:"\u015al\u0105skie",gridCapacity:520,solarConditions:65,windConditions:55,socialAcceptance:50,environmentalComplexity:1.4,adminEfficiency:.8,availableLand:7e3,landPriceMultiplier:1.2,projects:[],protests:[],dominantPlayer:null,isOPRO:!1},{id:"swietokrzyskie",name:"\u015awi\u0119tokrzyskie",gridCapacity:310,solarConditions:70,windConditions:55,socialAcceptance:60,environmentalComplexity:1,adminEfficiency:1.1,availableLand:1e4,landPriceMultiplier:.8,projects:[],protests:[],dominantPlayer:null,isOPRO:!1},{id:"warminsko-mazurskie",name:"Warmi\u0144sko-Mazurskie",gridCapacity:350,solarConditions:60,windConditions:75,socialAcceptance:65,environmentalComplexity:1.2,adminEfficiency:1,availableLand:17e3,landPriceMultiplier:.8,projects:[],protests:[],dominantPlayer:null,isOPRO:!0},{id:"wielkopolskie",name:"Wielkopolskie",gridCapacity:480,solarConditions:65,windConditions:70,socialAcceptance:60,environmentalComplexity:1,adminEfficiency:.9,availableLand:19e3,landPriceMultiplier:1,projects:[],protests:[],dominantPlayer:null,isOPRO:!0},{id:"zachodniopomorskie",name:"Zachodniopomorskie",gridCapacity:400,solarConditions:60,windConditions:90,socialAcceptance:70,environmentalComplexity:1,adminEfficiency:1,availableLand:15e3,landPriceMultiplier:.9,projects:[],protests:[],dominantPlayer:null,isOPRO:!0}],G=(0,e.createContext)();function K(e,t){switch(t.type){case"UPDATE_REGION":return e.map((e=>e.id===t.payload.id?{...e,...t.payload.changes}:e));case"ADD_PROJECT_TO_REGION":return e.map((e=>e.id===t.payload.regionId?{...e,projects:[...e.projects,t.payload.project],availableLand:Math.max(0,e.availableLand-t.payload.project.size)}:e));case"UPDATE_REGIONAL_CONDITIONS":return e.map((e=>{const t=Math.floor(5*Math.random())-2,n=Math.floor(5*Math.random())-2,i=Math.floor(3*Math.random())-1;return{...e,solarConditions:Math.min(100,Math.max(0,e.solarConditions+t)),windConditions:Math.min(100,Math.max(0,e.windConditions+n)),socialAcceptance:Math.min(100,Math.max(0,e.socialAcceptance+i))}}));default:return e}}const J=t=>{let{children:n}=t;const[a,s]=(0,e.useReducer)(K,q);return(0,i.jsx)(G.Provider,{value:{state:a,dispatch:s},children:n})},Y=()=>{const t=(0,e.useContext)(G);if(!t)throw new Error("useRegionsContext must be used within a RegionsProvider");return t},Q={dolnoslaskie:[{id:"wroclawski",name:"Wroc\u0142awski",capital:"Wroc\u0142aw",population:64e4,area:2930,solarPotential:75,windPotential:60,availableLand:1800,gridCapacity:120,environmentalRestrictions:45,administrativeEfficiency:70,localOpposition:35,propertyPrices:1.8,projects:[],events:[],isNatura2000:!1,isProtectedLandscape:!1,powerLines:{hv:!0,mv:!0}},{id:"jeleniogorski",name:"Jeleniog\xf3rski",capital:"Jelenia G\xf3ra",population:12e4,area:1880,solarPotential:65,windPotential:85,availableLand:1200,gridCapacity:80,environmentalRestrictions:75,administrativeEfficiency:65,localOpposition:45,propertyPrices:1.2,projects:[],events:[],isNatura2000:!0,isProtectedLandscape:!0,powerLines:{hv:!0,mv:!0}},{id:"walbrzyski",name:"Wa\u0142brzyski",capital:"Wa\u0142brzych",population:17e4,area:1650,solarPotential:60,windPotential:70,availableLand:900,gridCapacity:70,environmentalRestrictions:65,administrativeEfficiency:60,localOpposition:50,propertyPrices:.9,projects:[],events:[],isNatura2000:!1,isProtectedLandscape:!0,powerLines:{hv:!0,mv:!0}}],mazowieckie:[{id:"warszawski",name:"Warszawski",capital:"Warszawa",population:18e5,area:3200,solarPotential:70,windPotential:55,availableLand:1300,gridCapacity:250,environmentalRestrictions:50,administrativeEfficiency:80,localOpposition:40,propertyPrices:3.2,projects:[],events:[],isNatura2000:!1,isProtectedLandscape:!1,powerLines:{hv:!0,mv:!0}},{id:"radomski",name:"Radomski",capital:"Radom",population:25e4,area:2500,solarPotential:75,windPotential:60,availableLand:2100,gridCapacity:90,environmentalRestrictions:35,administrativeEfficiency:65,localOpposition:30,propertyPrices:.8,projects:[],events:[],isNatura2000:!1,isProtectedLandscape:!1,powerLines:{hv:!0,mv:!0}},{id:"plocki",name:"P\u0142ocki",capital:"P\u0142ock",population:17e4,area:1800,solarPotential:65,windPotential:70,availableLand:1900,gridCapacity:110,environmentalRestrictions:40,administrativeEfficiency:60,localOpposition:25,propertyPrices:.9,projects:[],events:[],isNatura2000:!1,isProtectedLandscape:!1,powerLines:{hv:!0,mv:!0}}],wielkopolskie:[{id:"poznanski",name:"Pozna\u0144ski",capital:"Pozna\u0144",population:54e4,area:2800,solarPotential:65,windPotential:80,availableLand:2200,gridCapacity:150,environmentalRestrictions:40,administrativeEfficiency:75,localOpposition:30,propertyPrices:2.1,projects:[],events:[],isNatura2000:!1,isProtectedLandscape:!1,powerLines:{hv:!0,mv:!0}},{id:"kaliski",name:"Kaliski",capital:"Kalisz",population:16e4,area:2100,solarPotential:70,windPotential:65,availableLand:1800,gridCapacity:85,environmentalRestrictions:35,administrativeEfficiency:70,localOpposition:25,propertyPrices:1.1,projects:[],events:[],isNatura2000:!1,isProtectedLandscape:!1,powerLines:{hv:!0,mv:!0}}],malopolskie:[{id:"krakowski",name:"Krakowski",capital:"Krak\xf3w",population:76e4,area:2300,solarPotential:65,windPotential:40,availableLand:1100,gridCapacity:130,environmentalRestrictions:70,administrativeEfficiency:75,localOpposition:55,propertyPrices:2.5,projects:[],events:[],isNatura2000:!1,isProtectedLandscape:!0,powerLines:{hv:!0,mv:!0}},{id:"tarnowski",name:"Tarnowski",capital:"Tarn\xf3w",population:15e4,area:1900,solarPotential:70,windPotential:45,availableLand:1500,gridCapacity:70,environmentalRestrictions:55,administrativeEfficiency:65,localOpposition:40,propertyPrices:1,projects:[],events:[],isNatura2000:!1,isProtectedLandscape:!1,powerLines:{hv:!0,mv:!0}}],pomorskie:[{id:"gdanski",name:"Gda\u0144ski",capital:"Gda\u0144sk",population:47e4,area:2200,solarPotential:60,windPotential:95,availableLand:1400,gridCapacity:160,environmentalRestrictions:60,administrativeEfficiency:75,localOpposition:35,propertyPrices:2.3,projects:[],events:[],isNatura2000:!0,isProtectedLandscape:!0,powerLines:{hv:!0,mv:!0}},{id:"slupski",name:"S\u0142upski",capital:"S\u0142upsk",population:12e4,area:2500,solarPotential:55,windPotential:100,availableLand:2e3,gridCapacity:120,environmentalRestrictions:55,administrativeEfficiency:60,localOpposition:30,propertyPrices:.9,projects:[],events:[],isNatura2000:!0,isProtectedLandscape:!0,powerLines:{hv:!0,mv:!0}}]},X=(0,e.createContext)(),ee=(()=>{const e=[];return Object.keys(Q).forEach((t=>{Q[t].forEach((n=>{e.push({...n,voivodeship:t})}))})),e})();function te(e,t){switch(t.type){case"UPDATE_COUNTY":return e.map((e=>e.id===t.payload.id&&e.voivodeship===t.payload.voivodeship?{...e,...t.payload.changes}:e));case"ADD_PROJECT_TO_COUNTY":return e.map((e=>e.id===t.payload.countyId&&e.voivodeship===t.payload.voivodeship?{...e,projects:[...e.projects,t.payload.project],availableLand:Math.max(0,e.availableLand-t.payload.project.size)}:e));case"REMOVE_PROJECT_FROM_COUNTY":return e.map((e=>e.id===t.payload.countyId&&e.voivodeship===t.payload.voivodeship?{...e,projects:e.projects.filter((e=>e.id!==t.payload.projectId)),availableLand:e.availableLand+t.payload.projectSize}:e));case"ADD_EVENT_TO_COUNTY":return e.map((e=>e.id===t.payload.countyId&&e.voivodeship===t.payload.voivodeship?{...e,events:[...e.events,t.payload.event]}:e));case"REMOVE_EVENT_FROM_COUNTY":return e.map((e=>e.id===t.payload.countyId&&e.voivodeship===t.payload.voivodeship?{...e,events:e.events.filter((e=>e.id!==t.payload.eventId))}:e));case"UPDATE_COUNTY_PARAMETERS":return e.map((e=>e.id===t.payload.countyId&&e.voivodeship===t.payload.voivodeship?{...e,...t.payload.parameters}:e));case"UPDATE_ALL_COUNTIES":return e.map((e=>{const t=5*Math.random()-2.5,n=5*Math.random()-2.5,i=3*Math.random()-1.5,a=(.1*Math.random()-.05)*e.propertyPrices;return{...e,solarPotential:Math.max(0,Math.min(100,e.solarPotential+t)),windPotential:Math.max(0,Math.min(100,e.windPotential+n)),localOpposition:Math.max(0,Math.min(100,e.localOpposition+i)),propertyPrices:Math.max(.5,e.propertyPrices+a)}}));default:return e}}const ne=t=>{let{children:n}=t;const[a,s]=(0,e.useReducer)(te,ee);return(0,i.jsx)(X.Provider,{value:{state:a,dispatch:s},children:n})},ie=()=>{const t=(0,e.useContext)(X);if(!t)throw new Error("useCountyContext musi by\u0107 u\u017cywany wewn\u0105trz CountyProvider");return t},ae=()=>{const{state:t,dispatch:n}=l(),{state:i,dispatch:a}=F(),s=v();return(0,e.useEffect)((()=>{const e=()=>{const{updateProjects:e,generateStaffEvents:r,generateEconomicEvents:o,generateProjectEvents:l}=s;e&&e(t,i,n,a),r&&r(t,i,n),o&&o(t,i,a),l&&l(t,i,n,a)};return window.addEventListener("next-game-day",e),()=>{window.removeEventListener("next-game-day",e)}}),[t,i,n,a,s]),null},se=e=>{let{children:t}=e;return(0,i.jsx)(V,{children:(0,i.jsx)(o,{children:(0,i.jsx)(J,{children:(0,i.jsx)(ne,{children:(0,i.jsxs)(W,{children:[(0,i.jsx)(ae,{}),t]})})})})})};var re={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const oe=(t,n)=>{const i=(0,e.forwardRef)(((i,a)=>{let{color:s="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:c="",children:d,...u}=i;return(0,e.createElement)("svg",{ref:a,...re,width:r,height:r,stroke:s,strokeWidth:l?24*Number(o)/Number(r):o,className:["lucide",`lucide-${h=t,h.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()}`,c].join(" "),...u},[...n.map((t=>{let[n,i]=t;return(0,e.createElement)(n,i)})),...Array.isArray(d)?d:[d]]);var h}));return i.displayName=`${t}`,i},le=oe("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),ce=oe("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]),de=oe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),ue=oe("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]),he=oe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),pe=oe("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]),me=oe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),fe=oe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),ye=oe("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),ge=oe("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),ve=t=>{let{text:n,type:a="info",onClose:s,autoClose:r=!0,duration:o=5e3}=t;(0,e.useEffect)((()=>{if(r){const e=setTimeout((()=>{s()}),o);return()=>clearTimeout(e)}}),[r,o,s]);return(0,i.jsxs)("div",{className:(()=>{const e="notification flex items-center";switch(a){case"win":case"success":return`${e} bg-green-500 text-white`;case"error":return`${e} bg-red-500 text-white`;case"warning":return`${e} bg-yellow-500 text-black`;default:return`${e} bg-blue-500 text-white`}})(),children:[(0,i.jsx)("div",{className:"mr-4",children:n}),(0,i.jsx)("button",{className:"ml-4 px-2 py-1 rounded bg-opacity-20 bg-black hover:bg-opacity-30 transition-all",onClick:s,children:"\u2715"})]})},xe=e=>{let{icon:t,screenName:n,label:a,currentScreen:s,onClick:r}=e;const o=s===n;return(0,i.jsxs)("button",{onClick:r,className:"nav-button flex items-center px-3 py-1 rounded text-white "+(o?"active":""),children:[(0,i.jsx)("span",{className:"mr-1",children:t})," ",a]})},we=e=>{let{children:t}=e;const{state:n,dispatch:a,nextDay:s}=F(),{state:r}=l();return(0,i.jsxs)("div",{className:"app-container",children:[(0,i.jsx)("header",{className:"app-header",children:(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold",children:"OZE Developer Manager"}),(0,i.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)(le,{className:"h-4 w-4"}),(0,i.jsxs)("span",{className:"text-sm",children:[(o=n.gameDate,o?o.toLocaleDateString("pl-PL",{year:"numeric",month:"long",day:"numeric"}):"")," ",(0,i.jsxs)("span",{className:"text-xs text-gray-500",children:["(Dzie\u0144: ",n.day,")"]})]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)(ce,{className:"h-4 w-4"}),(0,i.jsxs)("span",{className:"text-sm",children:[r.cash.toLocaleString()," PLN"]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)(de,{className:"h-4 w-4"}),(0,i.jsxs)("span",{className:"text-sm",children:["Reputacja: ",r.reputation,"/200"]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)(ue,{className:"h-4 w-4"}),(0,i.jsxs)("span",{className:"text-sm",children:["Moc RTB: ",r.rtbPower.toLocaleString()," MW"]})]}),(0,i.jsxs)("div",{className:"speed-control ml-4",children:[(0,i.jsx)("button",{onClick:()=>a({type:"SET_GAME_SPEED",payload:1}),className:"speed-button "+(1===n.gameSpeed?"active":""),title:"1 dzie\u0144",children:"1x"}),(0,i.jsx)("button",{onClick:()=>a({type:"SET_GAME_SPEED",payload:3}),className:"speed-button "+(3===n.gameSpeed?"active":""),title:"3 dni",children:"3x"}),(0,i.jsx)("button",{onClick:()=>a({type:"SET_GAME_SPEED",payload:5}),className:"speed-button "+(5===n.gameSpeed?"active":""),title:"5 dni",children:"5x"}),(0,i.jsx)("button",{onClick:()=>a({type:"SET_GAME_SPEED",payload:10}),className:"speed-button "+(10===n.gameSpeed?"active":""),title:"10 dni",children:"10x"})]}),(0,i.jsxs)("button",{onClick:s,className:"btn btn-primary px-3 py-1 flex items-center gap-1 text-white rounded",title:`Przejd\u017a do nast\u0119pnego dnia (+${n.gameSpeed} ${1===n.gameSpeed?"dzie\u0144":"dni"})`,children:[(0,i.jsx)(he,{className:"h-4 w-4"}),n.gameSpeed>1?`+${n.gameSpeed} dni`:"Nast\u0119pny dzie\u0144"]})]})]})}),(0,i.jsx)("nav",{className:"app-nav",children:(0,i.jsxs)("div",{className:"flex gap-4",children:[(0,i.jsx)(xe,{icon:(0,i.jsx)(pe,{className:"h-4 w-4"}),screenName:"map",label:"Mapa Polski",currentScreen:n.currentScreen,onClick:()=>a({type:"SET_SCREEN",payload:"map"})}),(0,i.jsx)(xe,{icon:(0,i.jsx)(me,{className:"h-4 w-4"}),screenName:"company",label:"Zarz\u0105dzanie Sp\xf3\u0142k\u0105",currentScreen:n.currentScreen,onClick:()=>a({type:"SET_SCREEN",payload:"company"})}),(0,i.jsx)(xe,{icon:(0,i.jsx)(fe,{className:"h-4 w-4"}),screenName:"events",label:"Wydarzenia",currentScreen:n.currentScreen,onClick:()=>a({type:"SET_SCREEN",payload:"events"})}),(0,i.jsx)(xe,{icon:(0,i.jsx)(ye,{className:"h-4 w-4"}),screenName:"competitors",label:"Konkurencja",currentScreen:n.currentScreen,onClick:()=>a({type:"SET_SCREEN",payload:"competitors"})}),(0,i.jsx)(xe,{icon:(0,i.jsx)(ge,{className:"h-4 w-4"}),screenName:"market",label:"Gie\u0142da Projekt\xf3w",currentScreen:n.currentScreen,onClick:()=>a({type:"SET_SCREEN",payload:"market"})}),(0,i.jsx)(xe,{icon:(0,i.jsx)(de,{className:"h-4 w-4"}),screenName:"hr",label:"Zarz\u0105dzanie Zasobami Ludzkimi",currentScreen:n.currentScreen,onClick:()=>a({type:"SET_SCREEN",payload:"hr"})})]})}),(0,i.jsx)("main",{className:"flex flex-1 overflow-auto",children:t}),n.notification&&(0,i.jsx)(ve,{text:n.notification.text,type:n.notification.type,onClose:()=>a({type:"SET_NOTIFICATION",payload:null})})]});var o},_e={PV:{name:"Fotowoltaika",shortName:"PV",icon:"Sun",color:"yellow",stages:{land_acquisition:{time:{min:1,max:3},costPerMW:{min:1e4,max:1e4},description:"Pozyskiwanie grunt\xf3w pod instalacje fotowoltaiczne"},environmental_decision:{time:{min:4,max:8},costPerMW:{min:15e3,max:25e3},description:"Uzyskanie decyzji \u015brodowiskowej dla instalacji PV"},zoning_conditions:{time:{min:2,max:4},costPerMW:{min:3e4,max:4e4},description:"Uzyskanie warunk\xf3w zabudowy dla instalacji PV"},grid_connection:{time:{min:3,max:6},costPerMW:{min:12e4,max:15e4},description:"Przy\u0142\u0105czenie do sieci instalacji fotowoltaicznej"},construction:{time:{min:6,max:10},costPerMW:{min:25e5,max:35e5},description:"Budowa instalacji fotowoltaicznej"}},marketPrices:{greenfield:{min:15e3,max:25e3,currency:"PLN"},development:{min:5e4,max:8e4,currency:"EUR"},rtb:{min:61e4,max:61e4,currency:"PLN"},cod:{min:8e5,max:12e5,currency:"EUR"}},specificRisks:[{name:"Problemy z sieci\u0105",probability:.25,impact:"grid_connection_delay",description:"Ograniczenia w przy\u0142\u0105czeniu do sieci"},{name:"Zmiany w systemie wsparcia",probability:.15,impact:"financial_impact",description:"Zmiany w aukcjach OZE"}]},WF:{name:"Farmy Wiatrowe",shortName:"WF",icon:"Wind",color:"blue",stages:{land_acquisition:{time:{min:7,max:12},costPerMW:{min:1e4,max:1e4},description:"Pozyskiwanie grunt\xf3w pod farmy wiatrowe"},environmental_decision:{time:{min:12,max:20},costPerMW:{min:15e3,max:25e3},description:"Uzyskanie decyzji \u015brodowiskowej dla farm wiatrowych"},zoning_conditions:{time:{min:10,max:16},costPerMW:{min:3e4,max:4e4},description:"Uzyskanie warunk\xf3w zabudowy dla farm wiatrowych"},grid_connection:{time:{min:12,max:24},costPerMW:{min:12e4,max:15e4},description:"Przy\u0142\u0105czenie do sieci farm wiatrowych"},construction:{time:{min:18,max:30},costPerMW:{min:4e6,max:6e6},description:"Budowa farm wiatrowych"}},marketPrices:{greenfield:{min:2e5,max:7e5,currency:"PLN"},development:{min:25e4,max:35e4,currency:"PLN"},rtb:{min:4e5,max:4e5,currency:"PLN"},cod:{min:15e5,max:2e6,currency:"EUR"}},specificRisks:[{name:"Protesty ekologiczne",probability:.35,impact:"environmental_decision_delay",description:"Protesty organizacji ekologicznych"},{name:"Zasada 10H",probability:.2,impact:"land_limitation",description:"Ograniczenia lokalizacji turbin"}]},BESS:{name:"Magazyny Energii",shortName:"BESS",icon:"Battery",color:"green",stages:{land_acquisition:{time:{min:4,max:8},costPerMW:{min:1e4,max:1e4},description:"Pozyskiwanie grunt\xf3w pod magazyny energii"},environmental_decision:{time:{min:6,max:12},costPerMW:{min:15e3,max:25e3},description:"Uzyskanie decyzji \u015brodowiskowej dla magazyn\xf3w energii"},zoning_conditions:{time:{min:4,max:10},costPerMW:{min:3e4,max:4e4},description:"Uzyskanie warunk\xf3w zabudowy dla magazyn\xf3w energii"},grid_connection:{time:{min:10,max:18},costPerMW:{min:12e4,max:15e4},description:"Przy\u0142\u0105czenie do sieci magazyn\xf3w energii"},construction:{time:{min:12,max:18},costPerMW:{min:28e5,max:36e5},description:"Budowa magazyn\xf3w energii"}},marketPrices:{greenfield:{min:5e4,max:1e5,currency:"PLN"},development:{min:15e4,max:25e4,currency:"PLN"},rtb:{min:18e5,max:18e5,currency:"PLN"},cod:{min:3e6,max:45e5,currency:"PLN"}},specificRisks:[{name:"Regulacje bezpiecze\u0144stwa",probability:.3,impact:"additional_costs",description:"Dodatkowe wymagania bezpiecze\u0144stwa"},{name:"Problemy z \u0142a\u0144cuchem dostaw",probability:.25,impact:"construction_delay",description:"Op\xf3\u017anienia w dostawie komponent\xf3w"}]}},be={"PV+BESS":{name:"Fotowoltaika z Magazynem",shortName:"PV+BESS",icon:"SunBattery",color:"teal",components:["PV","BESS"],componentWeights:{PV:.7,BESS:.3}},"WF+BESS":{name:"Wiatrowa z Magazynem",shortName:"WF+BESS",icon:"WindBattery",color:"indigo",components:["WF","BESS"],componentWeights:{WF:.7,BESS:.3}},"PV+WF":{name:"Fotowoltaika i Wiatrowa",shortName:"PV+WF",icon:"SunWind",color:"green",components:["PV","WF"],componentWeights:{PV:.5,WF:.5}},"PV+WF+BESS":{name:"Kompleksowy System OZE",shortName:"PV+WF+BESS",icon:"SunWindBattery",color:"purple",components:["PV","WF","BESS"],componentWeights:{PV:.4,WF:.4,BESS:.2}}};function je(e,t,n){const i={PV:15e4,WF:2e5,BESS:25e4,"PV+BESS":18e4,"WF+BESS":23e4,"PV+WF":19e4,"PV+WF+BESS":22e4}[e]||a50000,a={land_acquisition:.15,environmental_decision:.35,zoning_conditions:.55,grid_connection:.85,ready_to_build:1}[n]||.1;return Math.round(t*i*a)}const ke=()=>{const{state:t,dispatch:n}=l(),{state:i,dispatch:a}=Y(),{state:s,dispatch:r}=ie(),{state:o,dispatch:c,showNotification:d}=F(),{dispatch:u}=H(),h=(0,e.useCallback)((e=>{let t=0;return s.forEach((n=>{n.leasePools&&Object.values(n.leasePools).forEach((n=>{n.lessors&&n.lessors.includes(e)&&t++}))})),t}),[s]),m=(0,e.useCallback)((()=>{const e=t.staff.lessors;if(0===e.length)return null;const n=e.map((e=>({lessor:e,countyCount:h(e.id)})));return n.sort(((e,t)=>e.countyCount-t.countyCount)),n[0].lessor}),[t.staff.lessors,h]),f=(0,e.useCallback)(((e,t)=>{if(!e||!e.specialization)return!1;const n=e.specialization.toLowerCase();if("PV"===t&&n.includes("fotowoltaika"))return!0;if("WF"===t&&n.includes("wiatrowe"))return!0;if("BESS"===t&&n.includes("magazyn"))return!0;if(t.includes("+")&&n.includes("hybrydowe")){t.split("+");if("PV+BESS"===t&&n.includes("pv+bess"))return!0;if("WF+BESS"===t&&n.includes("fw+bess"))return!0;if("PV+WF"===t&&n.includes("pv+wf"))return!0;if("PV+WF+BESS"===t&&n.includes("pv+wf+bess"))return!0}return!1}),[]),y=(0,e.useCallback)(((e,t,n)=>{const i=s.find((n=>n.voivodeship===e&&n.id===t));if(!i)return!1;if(!i.leasePools)return r({type:"UPDATE_COUNTY",payload:{id:t,voivodeship:e,changes:{leasePools:{PV:{lessors:[],projects:[]},WF:{lessors:[],projects:[]},BESS:{lessors:[],projects:[]},"PV+BESS":{lessors:[],projects:[]},"WF+BESS":{lessors:[],projects:[]},"PV+WF":{lessors:[],projects:[]},"PV+WF+BESS":{lessors:[],projects:[]}}}}}),!0;if(!i.leasePools[n]){const a={...i.leasePools};a[n]={lessors:[],projects:[]},r({type:"UPDATE_COUNTY",payload:{id:t,voivodeship:e,changes:{leasePools:a}}})}return!0}),[s,r]),g=(0,e.useCallback)(((e,t,n,i)=>{const a=s.find((e=>e.voivodeship===t&&e.id===n));if(!a||!a.leasePools||!a.leasePools[i])return!1;if(a.leasePools[i].lessors.includes(e))return!0;const o={...a.leasePools};return o[i]={...o[i],lessors:[...o[i].lessors,e]},r({type:"UPDATE_COUNTY",payload:{id:n,voivodeship:t,changes:{leasePools:o}}}),!0}),[s,r]),v=(0,e.useCallback)(((e,t,n)=>{const i=s.find((n=>n.voivodeship===e&&n.id===t));return!!(i&&i.leasePools&&i.leasePools[n])&&i.leasePools[n].lessors.length>0}),[s]),x=(0,e.useCallback)(((e,n,i)=>{const a=s.find((t=>t.voivodeship===e&&t.id===n));if(!a||!a.leasePools||!a.leasePools[i])return null;if(0===a.leasePools[i].lessors.length)return null;const r=a.leasePools[i].lessors[0];return t.staff.lessors.find((e=>e.id===r))}),[s,t.staff.lessors]),w=(0,e.useCallback)((function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"PV",c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!i.find((t=>t.id===e)))return null;if(0===t.staff.lessors.length)return d("Potrzebujesz zatrudni\u0107 przynajmniej jednego dzier\u017cawc\u0119, aby rozpocz\u0105\u0107 projekt!","error"),null;if(!c)return d("Wybierz powiat, w kt\xf3rym chcesz rozpocz\u0105\u0107 projekt!","error"),null;if(!y(e,c,l))return d("Nie uda\u0142o si\u0119 zainicjowa\u0107 puli dzier\u017cawy dla powiatu!","error"),null;if(!v(e,c,l)){const t=m();if(!t)return d("Wszyscy twoi dzier\u017cawcy obs\u0142uguj\u0105 ju\u017c maksymaln\u0105 liczb\u0119 powiat\xf3w (5). Zatrudnij wi\u0119cej dzier\u017cawc\xf3w!","error"),null;if(!g(t.id,e,c,l))return d("Nie uda\u0142o si\u0119 przypisa\u0107 dzier\u017cawcy do puli dzier\u017cawy!","error"),null;f(t,l)||d(`Dzier\u017cawca ${t.name} nie ma specjalizacji pasuj\u0105cej do technologii ${l}. Efektywno\u015b\u0107 dzier\u017cawy b\u0119dzie ni\u017csza.`,"warning")}x(e,c,l);const u=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.includes("+");let a,s,r=[];if(i){if(s=be[e],!s)return null;if(r=s.components.map((e=>_e[e])),r.some((e=>!e)))return null}else if(a=_e[e],!a)return null;const o=n.size||Math.floor(30+50*Math.random());let l;if(i)l="PV+BESS"===e?Math.floor(o*(1.2+.6*Math.random())):"WF+BESS"===e?Math.floor(o*(.6+.3*Math.random())):"PV+WF"===e?Math.floor(o*(.8+.4*Math.random())):Math.floor(o*(1+.5*Math.random()));else switch(e){case"PV":l=Math.floor(o*(1+.5*Math.random()));break;case"WF":l=Math.floor(o*(.5+.3*Math.random()));break;case"BESS":l=Math.floor(o*(2+1*Math.random()));break;default:l=Math.floor(o*(1.2+.8*Math.random()))}const c=Date.now()+Math.floor(1e3*Math.random()),d=i?`${s.shortName} ${t.slice(0,3).toUpperCase()}${Math.floor(100*Math.random())}`:`${a.shortName} ${t.slice(0,3).toUpperCase()}${Math.floor(100*Math.random())}`;let u={},h={};if(i){u=s.components.reduce(((e,t)=>{const n=_e[t],i=s.componentWeights[t];return Object.entries(n.stages).forEach((t=>{let[n,a]=t;e[n]||(e[n]={time:{min:0,max:0},costPerMW:{min:0,max:0},description:`${s.name}: ${a.description}`}),e[n].time.min+=a.time.min*i,e[n].time.max+=a.time.max*i,e[n].costPerMW.min+=a.costPerMW.min*i,e[n].costPerMW.max+=a.costPerMW.max*i})),e}),{});const e=s.components.reduce(((e,t)=>{const n=_e[t],i=s.componentWeights[t];return Object.entries(n.marketPrices).forEach((t=>{let[n,a]=t;e[n]||(e[n]={min:0,max:0,currency:a.currency}),e[n].min+=a.min*i,e[n].max+=a.max*i})),e}),{}),t=1.1+.1*Math.random();Object.keys(e).forEach((n=>{h[n]={min:Math.round(e[n].min*t),max:Math.round(e[n].max*t),currency:e[n].currency}}))}else u=a.stages,h=a.marketPrices;const p={};return Object.entries(u).forEach((e=>{let[t,n]=e;const i=n.costPerMW.min,a=n.costPerMW.max,s=i+Math.random()*(a-i);p[t]=Math.round(s*l)})),{id:c,name:d,technology:e,isHybrid:i,hybridComponents:i?s.components:[e],region:t,size:o,power:l,status:"land_acquisition",statusIndex:0,progress:0,turn:n.turn||1,etapCosts:p,marketValue:je(e,l,"land_acquisition"),totalCost:0,events:[],assignedStaff:{},specialRisks:i?s.components.flatMap((e=>_e[e].specificRisks||[])):a.specificRisks||[]}}(l,e,{turn:o.turn,countyId:c}),h=s.find((t=>t.voivodeship===e&&t.id===c));if(!h)return d("Nie znaleziono powiatu!","error"),null;if(h.availableLand<u.size)return d(`W tym powiecie nie ma wystarczaj\u0105cej ilo\u015bci grunt\xf3w na projekt o mocy ${u.power} MW!`,"error"),null;if(h.gridCapacity<u.power)return d(`W tym powiecie nie ma wystarczaj\u0105cej mocy przy\u0142\u0105czeniowej dla projektu o mocy ${u.power} MW!`,"error"),null;u.county={id:h.id,name:h.name,voivodeship:h.voivodeship},u.technology=l,l.includes("+")?(u.isHybrid=!0,u.hybridComponents=l.split("+")):(u.isHybrid=!1,u.hybridComponents=[l]),l.includes("PV")?u.productionFactor=h.solarPotential/100:l.includes("WF")?u.productionFactor=h.windPotential/100:"BESS"===l&&(u.productionFactor=1);const p=1+h.environmentalRestrictions/100*.5;u.environmentalDelayFactor=p;const w=1+h.localOpposition/100*.3;u.oppositionDelayFactor=w;const _=2-h.administrativeEfficiency/100;u.administrationEfficiencyFactor=_,u.totalDelayFactor=(p+w+_)/3;const b=Math.floor(10*Math.random())+1,j=Math.min(b*(500+500*Math.random()),7e3),k=Math.max(1e4-j,3e3)*h.propertyPrices,z=Math.round(k*u.size);u.etapCosts.land_acquisition=z,u.leaseDetails={baseRate:1e4,adjustedRate:k,distanceToTransformer:b,hasIndexationClause:Math.random()<.7,securityDeposit:Math.floor((3e4+2e4*Math.random())*u.power)},u.assignedStaff={},u.etapPaid={land_acquisition:!1,environmental_decision:!1,zoning_conditions:!1,grid_connection:!1,construction:!1},n({type:"ADD_PROJECT",payload:u}),a({type:"ADD_PROJECT_TO_REGION",payload:{regionId:e,project:{id:u.id,name:u.name,power:u.power,status:u.status,technology:u.technology}}}),r({type:"ADD_PROJECT_TO_COUNTY",payload:{countyId:c,voivodeship:e,project:{id:u.id,name:u.name,size:u.size,power:u.power,technology:u.technology}}});const N=s.find((t=>t.voivodeship===e&&t.id===c));if(N&&N.leasePools&&N.leasePools[l]){const t={...N.leasePools};t[l]={...t[l],projects:[...t[l].projects,u.id]},r({type:"UPDATE_COUNTY",payload:{id:c,voivodeship:e,changes:{leasePools:t}}})}return d(`Rozpocz\u0119to nowy projekt ${u.name} w powiecie ${h.name}`,"success"),u}),[t,i,s,o,n,a,r,d,m,f,y,v,g,x]),_=(0,e.useCallback)((e=>{var i;const a=t.projects.find((t=>t.id===e));if(!a||"ready_to_build"===a.status)return!1;const s=["land_acquisition","environmental_decision","zoning_conditions","grid_connection","ready_to_build"],r=s.indexOf(a.status),l=s[r+1];if(0===r){if(0===t.staff.developers.length)return d("Potrzebujesz zatrudni\u0107 przynajmniej jednego developera, aby przej\u015b\u0107 do kolejnych etap\xf3w!","error"),!1;const i=[...t.staff.developers].sort(((e,t)=>t.skill-e.skill))[0];n({type:"UPDATE_PROJECT",payload:{id:e,changes:{assignedStaff:{...a.assignedStaff||{},developer:i.id}}}}),d(`Developer ${i.name} zosta\u0142 przypisany do projektu.`,"info")}let u=0;const h=a.power;switch(l){case"environmental_decision":u=Math.max(15e3+Math.floor(1e4*Math.random()),15e3*h)+1e4+3e4+5e3;break;case"zoning_conditions":u=Math.max(3e4,3e4*h);break;case"grid_connection":u=Math.max(12e4,12e4*h)+Math.min(3e4*h,3e6);break;case"ready_to_build":u=12e4+15e4*2}const m="land_acquisition"===a.status?a.etapCosts.land_acquisition:0;let f=0;"land_acquisition"===a.status&&null!==(i=a.leaseDetails)&&void 0!==i&&i.securityDeposit&&(f=a.leaseDetails.securityDeposit);const y=u+m+f;if(t.cash<y)return d(`Nie masz wystarczaj\u0105cych \u015brodk\xf3w! Potrzebujesz ${y.toLocaleString()} PLN.`,"error"),!1;n({type:"UPDATE_PROJECT",payload:{id:e,changes:{status:l,statusIndex:r+1,progress:0,etapPaid:{...a.etapPaid,[l]:!0,land_acquisition:!0},totalCost:a.totalCost+y,events:[...a.events,{turn:o.turn,text:`Rozpocz\u0119to etap: ${p(l)}${m>0?` i op\u0142acono dzier\u017caw\u0119 (${m.toLocaleString()} PLN)`:""}`}]}}}),n({type:"UPDATE_CASH",payload:-y}),n({type:"UPDATE_PROJECT_TOTAL_COST",payload:{projectId:a.id,cost:y}}),"ready_to_build"===l&&(n({type:"UPDATE_RTB_POWER",payload:a.power}),c({type:"UPDATE_GAME_GOALS",payload:{currentRtbPower:o.gameGoals.currentRtbPower+a.power}}),a.useIllegalMethods||(n({type:"UPDATE_REPUTATION",payload:{change:10,reason:`Uko\u0144czenie projektu ${a.name} zgodnie z przepisami`,turn:o.turn}}),d(`Wzrost reputacji (+10) za uko\u0144czenie projektu ${a.name} zgodnie z przepisami.`,"success")));let g=`Projekt ${a.name} przeszed\u0142 do etapu ${p(l)}!`;return m>0&&(g+=` Op\u0142acono dzier\u017caw\u0119: ${m.toLocaleString()} PLN.`),f>0&&(g+=` Wp\u0142acono kaucj\u0119: ${f.toLocaleString()} PLN.`),d(g,"success"),!0}),[t,o,n,c,d]),b=(0,e.useCallback)((function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const a=t.projects.find((t=>t.id===e));if(!a)return d("Nie znaleziono projektu","error"),!1;if("ready_to_build"===a.status)return d("Projekt jest ju\u017c gotowy do budowy","warning"),!1;let s=0,r=0;switch(a.status){case"land_acquisition":s=i||Math.round(5e3*a.size),r=Math.min(50,Math.round(s/(5e3*a.size)*50));break;case"environmental_decision":s=i||Math.max(5e4,1e4*a.power),r=Math.min(40,Math.round(s/(1e4*a.power)*40));break;case"zoning_conditions":s=i||Math.max(3e4,7e3*a.power),r=Math.min(35,Math.round(s/(7e3*a.power)*35));break;case"grid_connection":s=i||Math.max(8e4,15e3*a.power),r=Math.min(30,Math.round(s/(15e3*a.power)*30))}return t.cash<s?(d(`Niewystarczaj\u0105ca ilo\u015b\u0107 got\xf3wki. Potrzebujesz ${s.toLocaleString()} PLN.`,"error"),!1):(n({type:"UPDATE_PROJECT",payload:{id:e,changes:{progress:Math.min(100,(a.progress||0)+r),events:[...a.events,{turn:o.turn,text:`Przyspieszono projekt o ${r}% za ${s.toLocaleString()} PLN`}]}}}),n({type:"UPDATE_CASH",payload:-s}),n({type:"UPDATE_PROJECT_TOTAL_COST",payload:{projectId:a.id,cost:s}}),d(`Przyspieszono projekt ${a.name} o ${r}%!`,"success"),!0)}),[t,o,n]),j=(0,e.useCallback)((function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const a=t.projects.find((t=>t.id===e));if(!a)return d("Nie znaleziono projektu","error"),!1;if("ready_to_build"!==a.status)return d("Tylko projekty gotowe do budowy mog\u0105 by\u0107 wystawione na rynek","warning"),!1;const s=15e4*a.power,r=i||s;return n({type:"SEND_PROJECT_TO_MARKET",payload:{projectId:e,price:r}}),d(`Projekt "${a.name}" zosta\u0142 wystawiony na rynek za ${r.toLocaleString()} PLN`,"success"),!0}),[t,n,d]),k=(0,e.useCallback)((function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bribery";const a=t.projects.find((t=>t.id===e));if(!a)return d("Nie znaleziono projektu","error"),!1;if(t.reputation<120)return d("Niewystarczaj\u0105ca reputacja do wykonania nielegalnych dzia\u0142a\u0144","error"),!1;const s={bribery:{cost:Math.round(25e3*a.power),progressGain:25,reputationLoss:10,riskOfExposure:.3},forgery:{cost:Math.round(15e3*a.power),progressGain:15,reputationLoss:15,riskOfExposure:.4},intimidation:{cost:Math.round(1e4*a.power),progressGain:10,reputationLoss:20,riskOfExposure:.5}},r=s[i]||s.bribery;if(t.cash<r.cost)return d("Niewystarczaj\u0105ca ilo\u015b\u0107 got\xf3wki","error"),!1;const l=Math.random()<r.riskOfExposure;return n({type:"UPDATE_PROJECT",payload:{id:e,changes:{progress:Math.min(100,(a.progress||0)+r.progressGain),useIllegalMethods:!0,events:[...a.events,{turn:o.turn,text:`U\u017cyto nielegalnych metod (${i}) do przyspieszenia projektu o ${r.progressGain}%`,isIllegal:!0}]}}}),n({type:"UPDATE_CASH",payload:-r.cost}),l&&n({type:"UPDATE_REPUTATION",payload:{change:-r.reputationLoss,reason:`Wykryto nielegalne dzia\u0142ania w projekcie ${a.name}`}}),n({type:"ADD_ILLEGAL_ACTION",payload:{type:i,target:a.name,cost:r.cost,turn:o.turn,exposed:l}}),l?d(`Twoje nielegalne dzia\u0142ania zosta\u0142y wykryte! Strata reputacji: ${r.reputationLoss}`,"error"):d(`U\u017cyto nielegalnych metod do przyspieszenia projektu o ${r.progressGain}%`,"success"),!0}),[t,o,n,d]);return{projects:t.projects,startNewProject:w,advanceProject:_,accelerateProject:b,sendProjectToMarket:j,applyIllegalMethod:k,translateStage:p}},ze=e=>{let{children:t,title:n,className:a="",headerAction:s=null,footer:r=null,...o}=e;return(0,i.jsxs)("div",{className:`bg-white p-4 rounded shadow ${a}`,...o,children:[n&&(0,i.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,i.jsx)("h3",{className:"font-bold text-lg",children:n}),s]}),(0,i.jsx)("div",{className:"card-content",children:t}),r&&(0,i.jsx)("div",{className:"card-footer mt-4 pt-3 border-t border-gray-200",children:r})]})},Ne=e=>{let{children:t,variant:n="primary",size:a="medium",onClick:s,className:r="",disabled:o=!1,...l}=e;return(0,i.jsx)("button",{className:`${{primary:"bg-blue-700 hover:bg-blue-800 text-white",success:"bg-green-500 hover:bg-green-600 text-white",danger:"bg-red-500 hover:bg-red-600 text-white",warning:"bg-yellow-500 hover:bg-yellow-600 text-black",info:"bg-blue-500 hover:bg-blue-600 text-white",secondary:"bg-gray-200 hover:bg-gray-300 text-gray-800"}[n]} ${{small:"px-2 py-1 text-xs",medium:"px-3 py-1",large:"px-4 py-2 text-lg"}[a]} rounded font-medium transition-colors ${o?"opacity-50 cursor-not-allowed":""} ${r}`,onClick:s,disabled:o,...l,children:t})},Pe=e=>{let{value:t=0,status:n="medium",showPercent:a=!1,className:s="",...r}=e;const o=Math.min(100,Math.max(0,t)),l=`progress-${n}`;return(0,i.jsxs)("div",{className:`relative ${s}`,...r,children:[(0,i.jsx)("div",{className:"progress-bar-container",children:(0,i.jsx)("div",{className:`progress-bar-fill ${l}`,style:{width:`${o}%`}})}),a&&(0,i.jsxs)("div",{className:"text-xs font-medium text-gray-700 text-right mt-1",children:[o,"%"]})]})},Se=oe("Battery",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]]),Ee=oe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Me=e=>e>=75?"#22c55e":e>=50?"#3b82f6":e>=25?"#f59e0b":"#ef4444",Ce=e=>{switch(e){case"land_acquisition":return"Pozyskiwanie grunt\xf3w";case"environmental_decision":return"Decyzja \u015brodowiskowa";case"zoning_conditions":return"Warunki zabudowy";case"grid_connection":return"Przy\u0142\u0105czenie do sieci";case"construction":return"Budowa";case"ready_to_build":return"Gotowy do budowy";default:return e}},Te=e=>{switch(e){case"land_acquisition":return"blue";case"environmental_decision":return"yellow";case"zoning_conditions":return"orange";case"grid_connection":return"purple";case"construction":return"red";case"ready_to_build":return"green";default:return"gray"}},Le=e=>{switch(e){case"PV":return"Fotowoltaika";case"WF":return"Farma Wiatrowa";case"BESS":return"Magazyn Energii";default:return e}},Oe=t=>{let{region:n,onStartProject:a}=t;const[s,r]=(0,e.useState)("PV"),{state:o}=H(),l=Array.isArray(null===o||void 0===o?void 0:o.events)?o.events:[],c=e.useMemo((()=>n&&n.id?l.filter((e=>e.regionId===n.id)):[]),[l,n]);return(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-xl font-bold mb-4",children:n.name}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,i.jsxs)("div",{className:"bg-gray-100 p-3 rounded",children:[(0,i.jsx)("div",{className:"text-sm text-gray-500",children:"Dost\u0119pne moce przy\u0142\u0105czeniowe"}),(0,i.jsxs)("div",{className:"text-xl font-bold",children:[n.gridCapacity," MW"]})]}),(0,i.jsxs)("div",{className:"bg-gray-100 p-3 rounded",children:[(0,i.jsx)("div",{className:"text-sm text-gray-500",children:"Dost\u0119pne grunty"}),(0,i.jsxs)("div",{className:"text-xl font-bold",children:[n.availableLand.toLocaleString()," ha"]})]}),(0,i.jsxs)("div",{className:"bg-gray-100 p-3 rounded",children:[(0,i.jsx)("div",{className:"text-sm text-gray-500",children:"Nas\u0142onecznienie"}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsxs)("div",{className:"text-xl font-bold mr-2",children:[n.solarConditions,"/100"]}),(0,i.jsx)("div",{className:"h-4 w-4 rounded-full",style:{backgroundColor:Me(n.solarConditions)}})]})]}),(0,i.jsxs)("div",{className:"bg-gray-100 p-3 rounded",children:[(0,i.jsx)("div",{className:"text-sm text-gray-500",children:"Warunki wiatrowe"}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsxs)("div",{className:"text-xl font-bold mr-2",children:[n.windConditions,"/100"]}),(0,i.jsx)("div",{className:"h-4 w-4 rounded-full",style:{backgroundColor:Me(n.windConditions)}})]})]}),(0,i.jsxs)("div",{className:"bg-gray-100 p-3 rounded",children:[(0,i.jsx)("div",{className:"text-sm text-gray-500",children:"Akceptacja spo\u0142eczna"}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsxs)("div",{className:"text-xl font-bold mr-2",children:[n.socialAcceptance,"/100"]}),(0,i.jsx)("div",{className:"h-4 w-4 rounded-full",style:{backgroundColor:Me(n.socialAcceptance)}})]})]}),(0,i.jsxs)("div",{className:"bg-gray-100 p-3 rounded",children:[(0,i.jsx)("div",{className:"text-sm text-gray-500",children:"Z\u0142o\u017cono\u015b\u0107 \u015brodowiskowa"}),(0,i.jsxs)("div",{className:"text-xl font-bold",children:[n.environmentalComplexity.toFixed(1),"x",(0,i.jsx)("span",{className:"text-sm font-normal text-gray-500 ml-1",children:n.environmentalComplexity>1?"(trudniejsza)":"(\u0142atwiejsza)"})]})]})]}),(0,i.jsx)(ze,{title:"Wydarzenia w regionie",className:"mb-4",children:c&&c.length>0?(0,i.jsx)("div",{className:"space-y-2",children:c.map((e=>(0,i.jsxs)("div",{className:"p-3 rounded text-sm "+("positive"===e.severity?"bg-green-100 text-green-800":"negative"===e.severity?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"),children:[(0,i.jsx)("div",{className:"font-bold",children:e.title}),(0,i.jsx)("div",{children:e.description})]},e.id)))}):(0,i.jsx)("p",{className:"text-gray-500",children:"Brak aktywnych wydarze\u0144 w tym regionie"})}),(0,i.jsx)(ze,{title:"Projekty w regionie",className:"mb-4",children:n.projects&&n.projects.length>0?(0,i.jsx)("div",{className:"max-h-40 overflow-y-auto",children:(0,i.jsxs)("table",{className:"min-w-full",children:[(0,i.jsx)("thead",{className:"bg-gray-100",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"text-left p-2 text-xs",children:"Nazwa"}),(0,i.jsx)("th",{className:"text-center p-2 text-xs",children:"Moc"}),(0,i.jsx)("th",{className:"text-center p-2 text-xs",children:"Status"}),(0,i.jsx)("th",{className:"text-center p-2 text-xs",children:"Post\u0119p"})]})}),(0,i.jsx)("tbody",{className:"divide-y divide-gray-200",children:n.projects.map((e=>(0,i.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,i.jsx)("td",{className:"p-2 text-xs",children:e.name}),(0,i.jsxs)("td",{className:"text-center p-2 text-xs",children:[e.power," MW"]}),(0,i.jsx)("td",{className:"text-center p-2 text-xs",children:Ce(e.status)}),(0,i.jsx)("td",{className:"p-2",children:(0,i.jsx)(Pe,{value:e.progress,color:Te(e.status),height:"2"})})]},e.id)))})]})}):(0,i.jsx)("p",{className:"text-gray-500",children:"Brak projekt\xf3w w tym regionie"})}),(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsxs)("div",{className:"flex mb-4",children:[(0,i.jsxs)("button",{onClick:()=>r("PV"),className:"px-3 py-1 rounded flex items-center "+("PV"===s?"bg-yellow-500 text-white":"bg-gray-200"),children:[(0,i.jsx)(ge,{className:"h-4 w-4 mr-1"})," Fotowoltaika"]}),(0,i.jsxs)("button",{onClick:()=>r("WF"),className:"px-3 py-1 rounded ml-2 flex items-center "+("WF"===s?"bg-blue-500 text-white":"bg-gray-200"),children:[(0,i.jsx)(ue,{className:"h-4 w-4 mr-1"})," Farma Wiatrowa"]}),(0,i.jsxs)("button",{onClick:()=>r("BESS"),className:"px-3 py-1 rounded ml-2 flex items-center "+("BESS"===s?"bg-purple-500 text-white":"bg-gray-200"),children:[(0,i.jsx)(Se,{className:"h-4 w-4 mr-1"})," Magazyn Energii"]})]}),(0,i.jsxs)(Ne,{onClick:()=>a(s),variant:"success",className:"w-full py-2 font-bold flex items-center justify-center",children:[(0,i.jsx)("div",{className:"mr-2",children:"+"}),"Rozpocznij nowy projekt ",Le(s)]}),(0,i.jsxs)("div",{className:"p-3 bg-blue-50 rounded text-sm",children:[(0,i.jsxs)("div",{className:"font-bold flex items-center",children:[(0,i.jsx)(Ee,{className:"h-4 w-4 mr-1"}),"Informacje o kosztach:"]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Koszt pozyskania gruntu:"})," ~",Math.floor(4e5*n.landPriceMultiplier).toLocaleString()," ","PLN/ha"]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Szacowana rentowno\u015b\u0107:"})," ",(Math.max(n.solarConditions,n.windConditions)/60*100).toFixed(1),"% \u015bredniej"]}),n.isOPRO&&(0,i.jsx)("div",{className:"text-green-700 font-medium mt-1",children:"Obszar Przyspieszonego Rozwoju OZE: +40% szybko\u015bci procedur"})]})]})]})},Ae=e=>{let{voivodeshipId:t}=e;const{state:n,dispatch:a}=ie(),{state:s,dispatch:r}=F(),o=((e,t)=>e.filter((e=>e.voivodeship===t)))(n,t),l=e=>{var n,i;return(null===(n=s.selectedCounty)||void 0===n?void 0:n.voivodeshipId)===t&&(null===(i=s.selectedCounty)||void 0===i?void 0:i.countyId)===e};return t&&0!==o.length?(0,i.jsxs)("div",{className:"bg-white rounded shadow p-4",children:[(0,i.jsx)("h3",{className:"font-bold text-lg mb-3",children:"Powiaty w wojew\xf3dztwie"}),(0,i.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:o.map((e=>(0,i.jsxs)("div",{onClick:()=>{return n=e.id,void r({type:"SELECT_COUNTY",payload:{voivodeshipId:t,countyId:n}});var n},className:`\n              cursor-pointer p-3 rounded \n              border-2 \n              ${l(e.id)?"border-blue-500":"border-gray-200"}\n              hover:bg-gray-50 transition-colors\n            `,children:[(0,i.jsxs)("div",{className:"flex justify-between items-start",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"font-medium",children:e.name}),(0,i.jsxs)("div",{className:"text-sm text-gray-600",children:[e.capital," \u2022 ",e.population.toLocaleString()," mieszka\u0144c\xf3w"]})]}),(0,i.jsxs)("div",{className:"text-sm text-gray-500",children:[e.projects.length," projekty"]})]}),(0,i.jsxs)("div",{className:"mt-2 grid grid-cols-2 gap-2",children:[(0,i.jsxs)("div",{className:"flex items-center text-sm",children:[(0,i.jsx)("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:Me(e.solarPotential)}}),(0,i.jsxs)("span",{children:["S\u0142o\u0144ce: ",e.solarPotential,"/100"]})]}),(0,i.jsxs)("div",{className:"flex items-center text-sm",children:[(0,i.jsx)("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:Me(e.windPotential)}}),(0,i.jsxs)("span",{children:["Wiatr: ",e.windPotential,"/100"]})]})]}),(0,i.jsxs)("div",{className:"mt-1 text-sm flex justify-between",children:[(0,i.jsxs)("span",{children:["Grunty: ",e.availableLand," ha"]}),(0,i.jsxs)("span",{children:["Moc przy\u0142\u0105czeniowa: ",e.gridCapacity," MW"]})]}),e.events.length>0&&(0,i.jsxs)("div",{className:"mt-2 text-xs bg-red-100 text-red-800 px-2 py-1 rounded flex items-center",children:[(0,i.jsx)("span",{className:"w-2 h-2 bg-red-500 rounded-full mr-2 animate-pulse"}),(0,i.jsxs)("span",{children:[e.events.length," aktywnych wydarze\u0144"]})]})]},e.id)))})]}):(0,i.jsx)(ze,{title:"Powiaty",children:(0,i.jsx)("p",{className:"text-gray-500",children:"Wybierz wojew\xf3dztwo, aby zobaczy\u0107 powiaty."})})},Ie=e=>{let{voivodeshipId:t,countyId:n,onStartProject:a}=e;const{state:s}=ie(),{state:r,dispatch:o}=F(),l=((e,t,n)=>e.find((e=>e.voivodeship===t&&e.id===n))||null)(s,t,n);if(!l)return(0,i.jsx)(ze,{title:"Powiat",children:(0,i.jsx)("p",{className:"text-gray-500",children:"Nie znaleziono wybranego powiatu."})});const c=e=>{a(e,n)};return(0,i.jsx)(ze,{title:`Powiat ${l.name}`,children:(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,i.jsx)("div",{className:"text-sm text-gray-500",children:"Stolica"}),(0,i.jsx)("div",{className:"font-bold",children:l.capital})]}),(0,i.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,i.jsx)("div",{className:"text-sm text-gray-500",children:"Populacja"}),(0,i.jsx)("div",{className:"font-bold",children:l.population.toLocaleString()})]}),(0,i.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,i.jsx)("div",{className:"text-sm text-gray-500",children:"Powierzchnia"}),(0,i.jsxs)("div",{className:"font-bold",children:[l.area," km\xb2"]})]}),(0,i.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,i.jsx)("div",{className:"text-sm text-gray-500",children:"Ceny grunt\xf3w"}),(0,i.jsxs)("div",{className:"font-bold",children:[l.propertyPrices.toFixed(2),"x \u015brednia"]})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"bg-blue-50 p-3 rounded",children:[(0,i.jsx)("div",{className:"text-sm text-gray-500",children:"Dost\u0119pne grunty"}),(0,i.jsxs)("div",{className:"font-bold",children:[l.availableLand," ha"]})]}),(0,i.jsxs)("div",{className:"bg-blue-50 p-3 rounded",children:[(0,i.jsx)("div",{className:"text-sm text-gray-500",children:"Moc przy\u0142\u0105czeniowa"}),(0,i.jsxs)("div",{className:"font-bold",children:[l.gridCapacity," MW"]})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,i.jsx)("span",{className:"text-sm",children:"Potencja\u0142 s\u0142oneczny"}),(0,i.jsxs)("span",{className:"text-sm font-bold",children:[l.solarPotential,"/100"]})]}),(0,i.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,i.jsx)("div",{className:"h-2 rounded-full",style:{width:`${l.solarPotential}%`,backgroundColor:Me(l.solarPotential)}})})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,i.jsx)("span",{className:"text-sm",children:"Potencja\u0142 wiatrowy"}),(0,i.jsxs)("span",{className:"text-sm font-bold",children:[l.windPotential,"/100"]})]}),(0,i.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,i.jsx)("div",{className:"h-2 rounded-full",style:{width:`${l.windPotential}%`,backgroundColor:Me(l.windPotential)}})})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,i.jsx)("span",{className:"text-sm",children:"Ograniczenia \u015brodowiskowe"}),(0,i.jsxs)("span",{className:"text-sm font-bold",children:[l.environmentalRestrictions,"/100"]})]}),(0,i.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,i.jsx)("div",{className:"h-2 rounded-full",style:{width:`${l.environmentalRestrictions}%`,backgroundColor:Me(100-l.environmentalRestrictions)}})})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,i.jsx)("span",{className:"text-sm",children:"Lokalna opozycja"}),(0,i.jsxs)("span",{className:"text-sm font-bold",children:[l.localOpposition,"/100"]})]}),(0,i.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,i.jsx)("div",{className:"h-2 rounded-full",style:{width:`${l.localOpposition}%`,backgroundColor:Me(100-l.localOpposition)}})})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,i.jsx)("span",{className:"text-sm",children:"Efektywno\u015b\u0107 administracji"}),(0,i.jsxs)("span",{className:"text-sm font-bold",children:[l.administrativeEfficiency,"/100"]})]}),(0,i.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,i.jsx)("div",{className:"h-2 rounded-full",style:{width:`${l.administrativeEfficiency}%`,backgroundColor:Me(l.administrativeEfficiency)}})})]})]}),(0,i.jsxs)("div",{className:"flex space-x-4",children:[(0,i.jsx)("div",{className:"text-xs px-2 py-1 rounded "+(l.powerLines.hv?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:l.powerLines.hv?"Linie WN dost\u0119pne":"Brak linii WN"}),(0,i.jsx)("div",{className:"text-xs px-2 py-1 rounded "+(l.powerLines.mv?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:l.powerLines.mv?"Linie SN dost\u0119pne":"Brak linii SN"}),(0,i.jsx)("div",{className:"text-xs px-2 py-1 rounded "+(l.isNatura2000?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:l.isNatura2000?"Obszar Natura 2000":"Bez Natura 2000"})]}),(0,i.jsxs)("div",{className:"pt-3 border-t",children:[(0,i.jsx)("div",{className:"text-sm font-medium mb-2",children:"Rozpocznij nowy projekt:"}),(0,i.jsxs)("div",{className:"flex space-x-2",children:[(0,i.jsx)("button",{onClick:()=>c("PV"),className:"px-3 py-2 bg-yellow-500 text-white rounded hover:bg-yellow-600 flex-1",children:"Fotowoltaika"}),(0,i.jsx)("button",{onClick:()=>c("WF"),className:"px-3 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 flex-1",children:"Farma Wiatrowa"})]})]}),l.projects.length>0&&(0,i.jsxs)("div",{className:"pt-3 border-t",children:[(0,i.jsx)("div",{className:"text-sm font-medium mb-2",children:"Aktywne projekty:"}),(0,i.jsx)("div",{className:"space-y-2",children:l.projects.map((e=>(0,i.jsxs)("div",{className:"p-2 bg-gray-50 rounded text-sm",children:[(0,i.jsx)("div",{className:"font-medium",children:e.name}),(0,i.jsxs)("div",{className:"text-gray-600",children:[e.technology," \u2022 ",e.power," MW"]})]},e.id)))})]}),l.events.length>0&&(0,i.jsxs)("div",{className:"pt-3 border-t",children:[(0,i.jsx)("div",{className:"text-sm font-medium mb-2",children:"Aktywne wydarzenia:"}),(0,i.jsx)("div",{className:"space-y-2",children:l.events.map((e=>(0,i.jsxs)("div",{className:"p-2 rounded text-sm "+("positive"===e.severity?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:[(0,i.jsx)("div",{className:"font-medium",children:e.title}),(0,i.jsx)("div",{children:e.description})]},e.id)))})]})]})})};const Re=(0,e.createContext)(null),De=Re.Provider;function Be(){const t=(0,e.useContext)(Re);if(null==t)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}var We=n(527),Fe=n.n(We);function Ze(){return Ze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ze.apply(this,arguments)}function Ue(t,n){let{bounds:i,boundsOptions:a,center:s,children:r,className:o,id:l,placeholder:c,style:d,whenReady:u,zoom:h,...p}=t;const[m]=(0,e.useState)({className:o,id:l,style:d}),[f,y]=(0,e.useState)(null);(0,e.useImperativeHandle)(n,(()=>f?.map??null),[f]);const g=(0,e.useCallback)((e=>{if(null!==e&&null===f){const t=new We.Map(e,p);null!=s&&null!=h?t.setView(s,h):null!=i&&t.fitBounds(i,a),null!=u&&t.whenReady(u),y(function(e){return Object.freeze({__version:1,map:e})}(t))}}),[]);(0,e.useEffect)((()=>()=>{f?.map.remove()}),[f]);const v=f?e.createElement(De,{value:f},r):c??null;return e.createElement("div",Ze({},m,{ref:g}),v)}const $e=(0,e.forwardRef)(Ue);n(119);function Ve(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function He(t,n){return null==n?function(n,i){const a=(0,e.useRef)();return a.current||(a.current=t(n,i)),a}:function(i,a){const s=(0,e.useRef)();s.current||(s.current=t(i,a));const r=(0,e.useRef)(i),{instance:o}=s.current;return(0,e.useEffect)((function(){r.current!==i&&(n(o,i,r.current),r.current=i)}),[o,i,a]),s}}function qe(t,n){const i=(0,e.useRef)();(0,e.useEffect)((function(){return null!=n&&t.instance.on(n),i.current=n,function(){null!=i.current&&t.instance.off(i.current),i.current=null}}),[t,n])}function Ge(e,t){const n=e.pane??t.pane;return n?{...e,pane:n}:e}function Ke(t,n){(0,e.useEffect)((function(){return(n.layerContainer??n.map).addLayer(t.instance),function(){n.layerContainer?.removeLayer(t.instance),n.map.removeLayer(t.instance)}}),[n,t])}function Je(t){return function(n){const i=Be(),a=t(Ge(n,i),i);return function(t,n){const i=(0,e.useRef)(n);(0,e.useEffect)((function(){n!==i.current&&null!=t.attributionControl&&(null!=i.current&&t.attributionControl.removeAttribution(i.current),null!=n&&t.attributionControl.addAttribution(n)),i.current=n}),[t,n])}(i.map,n.attribution),qe(a.current,n.eventHandlers),Ke(a.current,i),a}}function Ye(t){return function(n){const i=Be(),a=t(Ge(n,i),i);return qe(a.current,n.eventHandlers),Ke(a.current,i),function(t,n){const i=(0,e.useRef)();(0,e.useEffect)((function(){if(n.pathOptions!==i.current){const e=n.pathOptions??{};t.instance.setStyle(e),i.current=e}}),[t,n])}(a.current,n),a}}const Qe=function(t){function n(n,i){const{instance:a}=t(n).current;return(0,e.useImperativeHandle)(i,(()=>a)),null}return(0,e.forwardRef)(n)}(Je(He((function(e,t){let{url:n,...i}=e;return Ve(new We.TileLayer(n,Ge(i,t)),t)}),(function(e,t,n){!function(e,t,n){const{opacity:i,zIndex:a}=t;null!=i&&i!==n.opacity&&e.setOpacity(i),null!=a&&a!==n.zIndex&&e.setZIndex(a)}(e,t,n);const{url:i}=t;null!=i&&i!==n.url&&e.setUrl(i)}))));const Xe=function(t,n){return function(t){function n(n,i){const{instance:a,context:s}=t(n).current;return(0,e.useImperativeHandle)(i,(()=>a)),null==n.children?null:e.createElement(De,{value:s},n.children)}return(0,e.forwardRef)(n)}(Ye(He(t,n)))}((function(e,t){let{data:n,...i}=e;const a=new We.GeoJSON(n,i);return Ve(a,(s=t,r={overlayContainer:a},Object.freeze({...s,...r})));var s,r}),(function(e,t,n){t.style!==n.style&&(null==t.style?e.resetStyle():e.setStyle(t.style))}));delete Fe().Icon.Default.prototype._getIconUrl,Fe().Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const et=t=>{let{regions:n,selectedRegionId:a,onSelectRegion:s,projects:r=[]}=t;const{state:o}=l(),{showNotification:c}=F(),[d,u]=(0,e.useState)(null),[h,m]=(0,e.useState)([]),[f,y]=(0,e.useState)(null),[g,v]=(0,e.useState)(null),[x,w]=(0,e.useState)(!0),[_,b]=(0,e.useState)(null);(0,e.useEffect)((()=>{(async()=>{try{w(!0);const e=`${window.location.origin}/oze-developer-manager/wojewodztwa-medium.geojson`;console.log("Pr\xf3ba pobrania GeoJSON z URL:",e);const t=await fetch(e);if(!t.ok)throw new Error(`Nie uda\u0142o si\u0119 za\u0142adowa\u0107 pliku GeoJSON (status: ${t.status})`);const n=await t.json();if(console.log("Dane GeoJSON za\u0142adowane pomy\u015blnie:",n),!n.type||"FeatureCollection"!==n.type||!Array.isArray(n.features))throw console.error("Nieprawid\u0142owa struktura GeoJSON:",n),new Error("Nieprawid\u0142owa struktura pliku GeoJSON");v(n),w(!1)}catch(e){console.error("B\u0142\u0105d \u0142adowania GeoJSON:",e);try{console.log("Tworzenie uproszczonej wersji mapy Polski...");const e=P();v(e),w(!1),c("U\u017cywamy uproszczonej mapy Polski","warning")}catch(t){console.error("B\u0142\u0105d tworzenia uproszczonej mapy:",t),b(e.message),w(!1),c("B\u0142\u0105d \u0142adowania mapy: "+e.message,"error")}}})()}),[c]),(0,e.useEffect)((()=>{if(d){const e=o.projects.filter((e=>e.location&&e.location.voivodeship===d));if(m(e),s){const e=null===n||void 0===n?void 0:n.find((e=>e.name===d));e&&s(e.id)}}else m([])}),[d,o.projects,n,s]);const j=e=>{const t=e.properties.nazwa,n=(e=>o.projects.filter((t=>t.location&&t.location.voivodeship===e)).length)(t);let i;return i=0===n?"#e0e0e0":n<3?"#81c784":n<6?"#4caf50":n<10?"#2e7d32":"#1b5e20",{weight:d===t?3:1,opacity:1,color:"white",dashArray:"",fillOpacity:.7,fillColor:i}},k={weight:3,color:"#666",dashArray:"",fillOpacity:.8},z=e=>{const t=e.target;t.setStyle(k),t.bindTooltip(t.feature.properties.nazwa,{permanent:!1,direction:"center",className:"voivodeship-tooltip"}).openTooltip()},N=e=>{const t=e.target;t.feature.properties.nazwa;t.setStyle(j(t.feature)),t.closeTooltip()},P=()=>({type:"FeatureCollection",features:[{type:"Feature",properties:{nazwa:"mazowieckie"},geometry:{type:"Polygon",coordinates:[[[21,52.4],[21.7,52.3],[22,51.8],[21.5,51.2],[20.5,51],[19.9,51.5],[20.2,52.1],[20.7,52.5],[21,52.4]]]}},{type:"Feature",properties:{nazwa:"ma\u0142opolskie"},geometry:{type:"Polygon",coordinates:[[[19.2,49.9],[20.2,49.8],[20.8,50.2],[20.4,50.5],[19.6,50.3],[19.2,49.9]]]}},{type:"Feature",properties:{nazwa:"\u015bl\u0105skie"},geometry:{type:"Polygon",coordinates:[[[18.6,50.8],[19.2,50.7],[19.5,50.3],[19,49.8],[18.4,50],[18.2,50.3],[18.6,50.8]]]}},{type:"Feature",properties:{nazwa:"wielkopolskie"},geometry:{type:"Polygon",coordinates:[[[16.5,52.7],[18,52.8],[18.5,52],[17.5,51.5],[16,51.8],[16.5,52.7]]]}}]});return(0,i.jsxs)("div",{className:"polish-map-container",children:[x?(0,i.jsx)("div",{className:"map-loading",children:(0,i.jsx)("p",{children:"\u0141adowanie mapy Polski..."})}):_?(0,i.jsxs)("div",{className:"map-error",children:[(0,i.jsxs)("p",{children:["B\u0142\u0105d \u0142adowania mapy: ",_]}),(0,i.jsx)("button",{onClick:()=>window.location.reload(),children:"Od\u015bwie\u017c stron\u0119"})]}):(0,i.jsxs)($e,{center:[52.0692,19.4803],zoom:6,style:{height:"100%",width:"100%"},whenCreated:y,children:[(0,i.jsx)(Qe,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),g&&(0,i.jsx)(Xe,{data:g,style:j,onEachFeature:(e,t)=>{t.on({mouseover:z,mouseout:N,click:t=>((e,t)=>{const n=t.properties.nazwa;d===n?u(null):(u(n),c(`Wybrano wojew\xf3dztwo: ${n}`,"info"),f&&e.latlng&&f.setView(e.latlng,7)),f&&f.eachLayer((e=>{e.feature&&e.feature.properties.nazwa&&e.setStyle(j(e.feature))}))})(t,e)})}})]}),d&&(0,i.jsxs)("div",{className:"voivodeship-details-panel",children:[(0,i.jsxs)("h3",{children:["Wojew\xf3dztwo ",d]}),(0,i.jsxs)("div",{className:"voivodeship-stats",children:[(0,i.jsxs)("div",{className:"voivodeship-stat",children:[(0,i.jsx)("span",{children:"Liczba projekt\xf3w:"})," ",h.length]}),h.length>0&&(0,i.jsxs)("div",{className:"voivodeship-stat",children:[(0,i.jsx)("span",{children:"Ca\u0142kowita moc:"})," ",h.reduce(((e,t)=>e+(t.power||0)),0)," MW"]})]}),h.length>0?(0,i.jsxs)("div",{className:"voivodeship-projects",children:[(0,i.jsx)("h4",{children:"Projekty:"}),h.map((e=>(0,i.jsxs)("div",{className:"project-card",children:[(0,i.jsx)("h4",{children:e.name}),(0,i.jsxs)("p",{children:["Technologia: ",e.technology]}),(0,i.jsxs)("p",{children:["Moc: ",e.power||"Nie okre\u015blono"," MW"]}),(0,i.jsxs)("p",{children:["Status: ",p(e.status)]}),(0,i.jsx)("button",{onClick:()=>{return t=e.id,void c(`Otwieranie szczeg\xf3\u0142\xf3w projektu ID: ${t}`,"info");var t},className:"view-details-btn",children:"Szczeg\xf3\u0142y"})]},e.id)))]}):(0,i.jsxs)("div",{className:"no-projects-message",children:[(0,i.jsx)("p",{children:"Brak projekt\xf3w w tym wojew\xf3dztwie."}),(0,i.jsx)("button",{className:"start-project-btn",children:"Rozpocznij nowy projekt"})]}),(0,i.jsx)("button",{className:"close-panel-btn",onClick:()=>u(null),children:"\u2715"})]}),(0,i.jsxs)("div",{className:"map-legend",children:[(0,i.jsx)("h4",{children:"Liczba projekt\xf3w"}),(0,i.jsxs)("div",{className:"legend-item",children:[(0,i.jsx)("div",{className:"color-box",style:{backgroundColor:"#e0e0e0"}}),(0,i.jsx)("div",{children:"Brak projekt\xf3w"})]}),(0,i.jsxs)("div",{className:"legend-item",children:[(0,i.jsx)("div",{className:"color-box",style:{backgroundColor:"#81c784"}}),(0,i.jsx)("div",{children:"1-2 projekty"})]}),(0,i.jsxs)("div",{className:"legend-item",children:[(0,i.jsx)("div",{className:"color-box",style:{backgroundColor:"#4caf50"}}),(0,i.jsx)("div",{children:"3-5 projekt\xf3w"})]}),(0,i.jsxs)("div",{className:"legend-item",children:[(0,i.jsx)("div",{className:"color-box",style:{backgroundColor:"#2e7d32"}}),(0,i.jsx)("div",{children:"6-9 projekt\xf3w"})]}),(0,i.jsxs)("div",{className:"legend-item",children:[(0,i.jsx)("div",{className:"color-box",style:{backgroundColor:"#1b5e20"}}),(0,i.jsx)("div",{children:"10+ projekt\xf3w"})]})]})]})},tt=()=>{const{state:e}=Y(),{state:t}=ie(),{state:n,dispatch:a}=F(),{startNewProject:s}=ke(),r=n.selectedRegion?e.find((e=>e.id===n.selectedRegion)):null,o=null!==n.selectedCounty,l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"PV",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t?s(n.selectedRegion,e,t):n.selectedRegion&&s(n.selectedRegion,e)};return(0,i.jsxs)("div",{className:"flex flex-1",children:[(0,i.jsx)("div",{className:"flex-1 bg-blue-50 p-4 overflow-auto",children:(0,i.jsx)("div",{className:"w-full h-full",children:(0,i.jsx)(et,{regions:e,selectedRegionId:n.selectedRegion,onSelectRegion:e=>{a({type:"SELECT_REGION",payload:e})},projects:n.projects||[]})})}),(0,i.jsx)("div",{className:"w-1/3 bg-white p-4 overflow-y-auto",children:r?(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)(Oe,{region:r,onStartProject:l}),n.countySettings.showCounties&&(0,i.jsx)(Ae,{voivodeshipId:r.id}),o&&n.selectedCounty.voivodeshipId===r.id&&(0,i.jsx)(Ie,{voivodeshipId:n.selectedCounty.voivodeshipId,countyId:n.selectedCounty.countyId,onStartProject:l})]}):(0,i.jsxs)("div",{className:"p-4",children:[(0,i.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Mapa Polski"}),(0,i.jsx)("p",{className:"mb-4",children:"Wybierz wojew\xf3dztwo, aby zobaczy\u0107 szczeg\xf3\u0142owe informacje i rozpocz\u0105\u0107 projekty."}),(0,i.jsxs)("div",{className:"bg-blue-50 p-4 rounded mb-4",children:[(0,i.jsx)("h3",{className:"font-bold mb-2",children:"Legenda mapy"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"w-4 h-4 bg-green-300 mr-2 border border-gray-300"}),(0,i.jsx)("span",{className:"text-sm",children:"Dobre warunki dla OZE"})]}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"w-4 h-4 bg-yellow-300 mr-2 border border-gray-300"}),(0,i.jsx)("span",{className:"text-sm",children:"\u015arednie warunki dla OZE"})]}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"w-4 h-4 bg-red-300 mr-2 border border-gray-300"}),(0,i.jsx)("span",{className:"text-sm",children:"S\u0142abe warunki dla OZE"})]}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"w-4 h-4 relative mr-2 border border-gray-300",children:(0,i.jsx)("div",{className:"absolute -top-1 -right-1 h-2 w-2 bg-red-500 rounded-full"})}),(0,i.jsx)("span",{className:"text-sm",children:"Aktywne zdarzenia"})]}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"w-4 h-4 relative mr-2 flex items-center justify-center",children:(0,i.jsx)("span",{className:"text-xs text-green-800 font-bold",children:"O"})}),(0,i.jsx)("span",{className:"text-sm",children:"Obszar OPRO"})]})]})]})]})})]})},nt=()=>{const{state:t,dispatch:n}=l(),{state:i,showNotification:a}=F(),{dispatch:s}=H(),[r,o]=(0,e.useState)([]),c={junior:{minSkill:1,maxSkill:3,salaryMultiplier:1},mid:{minSkill:4,maxSkill:7,salaryMultiplier:1.5},senior:{minSkill:8,maxSkill:10,salaryMultiplier:2.2}},d={scout:2500,developer:3e3,lawyer:0,envSpecialist:0,lobbyist:5e3},u={lawyer:3e7,envSpecialist:25e6},h=(0,e.useCallback)((()=>{i.turn>1&&v()}),[i.turn]);(0,e.useEffect)((()=>{h()}),[h]);const y=(e,t)=>{const n=["land_acquisition","environmental_decision","zoning_conditions","grid_connection","ready_to_build"];switch(e){case"lessor":case"lessors":default:return!1;case"developer":case"developers":return n.indexOf(t)>=n.indexOf("environmental_decision");case"lawyer":case"lawyers":return n.indexOf(t)>=n.indexOf("environmental_decision")&&n.indexOf(t)<=n.indexOf("grid_connection");case"envSpecialist":case"envSpecialists":return n.indexOf(t)===n.indexOf("environmental_decision");case"lobbyist":case"lobbyists":return n.indexOf(t)>=n.indexOf("environmental_decision")&&n.indexOf(t)<=n.indexOf("zoning_conditions")}},g=(e,i)=>{const s=e.endsWith("s")?e:`${e}s`,r=t.staff[s];if(!r)return!1;const o=r.find((e=>e.id===i));if(!o||!o.assignedProject)return!1;const l=o.assignedProject,c=t.projects.find((e=>e.id===l));n({type:"UPDATE_STAFF",payload:{staffType:s,staffId:i,changes:{assignedProject:null,assignedSince:null}}});const d=e.endsWith("s")?e.slice(0,-1):e;return c&&(n({type:"UPDATE_PROJECT",payload:{id:l,changes:{assignedStaff:{...c.assignedStaff||{},[d]:null}}}}),a(`Od\u0142\u0105czono ${m(e)} ${o.name} od projektu ${c.name}`,"info")),!0},v=()=>{const e=[];Object.keys(t.staff).forEach((n=>{const i=t.staff[n];i&&0!==i.length&&i.forEach((t=>{if(Math.random()<.05){const n=x(t);n&&(e.push(n),w(t.type,t.id,n))}_(t.type,t.id)}))})),e.length>0&&o((t=>[...t,...e]))},x=e=>{let t=[.15,.1,.05,.1,.1,.2,.3];e.morale<50&&(t[2]*=3,t[4]*=2),e.energy<50&&(t[1]*=2,t[6]*=1.5),e.skill>7&&(t[5]*=2,t[3]*=1.5);const n=t.reduce(((e,t)=>e+t),0);t=t.map((e=>e/n));const a=Math.random();let s=0,r=-1;for(let i=0;i<t.length;i++)if(s+=t[i],a<=s){r=i;break}if(-1===r)return null;const o=["vacation","illness","burnout","promotion","conflict","innovation","mistake"][r];let l={id:Date.now(),staffId:e.id,staffName:e.name,staffType:e.type,type:o,turn:i.turn,title:"",description:"",effects:[]};switch(o){case"vacation":l.title=`${e.name} bierze urlop`,l.description=`Pracownik bierze ${Math.floor(1+3*Math.random())} dni urlopu.`,l.effects.push({type:"energy",value:30}),l.effects.push({type:"morale",value:20}),l.effects.push({type:"productivity",value:-1});break;case"illness":l.title=`${e.name} zachorowa\u0142`,l.description=`Pracownik jest chory i nie mo\u017ce pracowa\u0107 przez ${Math.floor(1+5*Math.random())} dni.`,l.effects.push({type:"energy",value:-20}),l.effects.push({type:"productivity",value:-1});break;case"burnout":l.title=`${e.name} cierpi na wypalenie zawodowe`,l.description="Pracownik jest przem\u0119czony i jego wydajno\u015b\u0107 spada o 50%.",l.effects.push({type:"energy",value:-40}),l.effects.push({type:"morale",value:-30}),l.effects.push({type:"productivity",value:-.5});break;case"promotion":l.title=`${e.name} zas\u0142uguje na awans`,l.description="Pracownik wykazuje si\u0119 du\u017cym zaanga\u017cowaniem i zas\u0142uguje na awans.",l.effects.push({type:"morale",value:40}),l.effects.push({type:"skill",value:1}),l.effects.push({type:"salary",value:.1});break;case"conflict":l.title=`${e.name} ma konflikt w zespole`,l.description="Pracownik ma konflikt z innymi cz\u0142onkami zespo\u0142u, co wp\u0142ywa na jego morale.",l.effects.push({type:"morale",value:-25}),l.effects.push({type:"productivity",value:-.2});break;case"innovation":l.title=`${e.name} ma innowacyjny pomys\u0142`,l.description="Pracownik wpad\u0142 na innowacyjny pomys\u0142, kt\xf3ry mo\u017ce przyspieszy\u0107 rozw\xf3j projekt\xf3w.",l.effects.push({type:"morale",value:15}),l.effects.push({type:"productivity",value:.2}),l.effects.push({type:"experience",value:10});break;case"mistake":l.title=`${e.name} pope\u0142ni\u0142 b\u0142\u0105d`,l.description="Pracownik pope\u0142ni\u0142 b\u0142\u0105d, kt\xf3ry mo\u017ce op\xf3\u017ani\u0107 rozw\xf3j projektu.",l.effects.push({type:"morale",value:-10}),l.effects.push({type:"productivity",value:-.15});break;default:return null}return l},w=(e,t,i)=>{const s={id:t};i.effects.forEach((e=>{switch(e.type){case"energy":s.energy=e.value;break;case"morale":s.morale=e.value;break;case"productivity":s.productivityModifier=e.value;break;case"skill":s.skillIncrease=e.value;break;case"experience":s.experienceIncrease=e.value;break;case"salary":s.salaryModifier=e.value}})),n({type:"UPDATE_STAFF",payload:{staffType:e,staffUpdate:s}}),a(i.title,"info")},_=function(e,i){var a;let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:10;const l=e.endsWith("s")?e:`${e}s`,c=t.staff[l];if(!c)return;const d=c.findIndex((e=>e.id===i));if(-1===d)return;const u=c[d];let h=o;if(h*=[1,1.1,1.2,1.35][(null===(a=t.companyUpgrades)||void 0===a?void 0:a.training_program)||0],"developer"===e||"developers"===e)if(s&&s.technology){const t=u.technologyExperience||{},a=t[s.technology]||0,r=Math.floor(1.5*h);t[s.technology]=a+r;const o={data:(new Date).toISOString(),typ:"do\u015bwiadczenie",opis:`Zdoby\u0142 ${r} p.d. w technologii ${s.technology}`};n({type:"UPDATE_STAFF",payload:{staffType:e,staffId:i,changes:{experience:u.experience+h,technologyExperience:t,historia:[...u.historia||[],o]}}})}else n({type:"UPDATE_STAFF",payload:{staffType:e,staffId:i,changes:{experience:u.experience+h,historia:[...u.historia||[],{data:(new Date).toISOString(),typ:"do\u015bwiadczenie",opis:`Zdoby\u0142 ${h} p.d.`}]}}});else if("lessor"===e||"lessors"===e)if("land_acquisition"===r&&s){const t=(u.acquiredLands||0)+1,a=(u.acquiredArea||0)+(s.area||0),r=Math.floor(2*h),o={data:(new Date).toISOString(),typ:"pozyskanie_gruntu",opis:`Pozyska\u0142 grunt o powierzchni ${s.area} ha w lokalizacji ${s.location||"nieznana"}`};n({type:"UPDATE_STAFF",payload:{staffType:e,staffId:i,changes:{experience:u.experience+r,acquiredLands:t,acquiredArea:a,historia:[...u.historia||[],o]}}})}else n({type:"UPDATE_STAFF",payload:{staffType:e,staffId:i,changes:{experience:u.experience+h,historia:[...u.historia||[],{data:(new Date).toISOString(),typ:"do\u015bwiadczenie",opis:`Zdoby\u0142 ${h} p.d.`}]}}});else n({type:"UPDATE_STAFF",payload:{staffType:e,staffId:i,changes:{experience:u.experience+h,historia:[...u.historia||[],{data:(new Date).toISOString(),typ:"do\u015bwiadczenie",opis:`Zdoby\u0142 ${h} p.d.`}]}}});N(e,i)},b=(e,t)=>{const n="junior"===e.level?1:"mid"===e.level?1.5:2,i="skill"===t?1:1.5;return Math.floor(5e3*n*i)},j=()=>{const e=["Adam","Anna","Piotr","Katarzyna","Micha\u0142","Magdalena","Jan","Aleksandra","Tomasz","Ma\u0142gorzata","Marek","Barbara","Andrzej","Ewa","Krzysztof","Zofia","Pawe\u0142","Monika","Rafa\u0142","Joanna"],t=["Nowak","Kowalski","Wi\u015bniewski","W\xf3jcik","Kowalczyk","Kami\u0144ski","Lewandowski","Zieli\u0144ski","Wo\u017aniak","Szyma\u0144ski","D\u0105browski","Koz\u0142owski","Jankowski","Mazur","Kwiatkowski","Krawczyk","Piotrowski","Grabowski","Nowakowski","Paw\u0142owski"];return`${e[Math.floor(Math.random()*e.length)]} ${t[Math.floor(Math.random()*t.length)]}`},k=e=>{const t={scout:["PV","WF","BESS","Negocjacje","Analiza grunt\xf3w"],developer:["PV","WF","BESS","Zarz\u0105dzanie projektami","Analiza techniczna"],lawyer:["Prawo energetyczne","Prawo \u015brodowiskowe","Prawo budowlane","Negocjacje"],envSpecialist:["Oceny oddzia\u0142ywania","Ochrona gatunkowa","Rekultywacja","Monitoring"],lobbyist:["W\u0142adze lokalne","Media","NGO","Spo\u0142eczno\u015bci lokalne"]}[e]||["Og\xf3lna"];return t[Math.floor(Math.random()*t.length)]},z=()=>{const e=["Pracowity","Leniwy","Kreatywny","Analityczny","Komunikatywny","Introwertyczny","Dok\u0142adny","Chaotyczny","Ambitny","Ostro\u017cny","Optymista","Pesymista","Zespo\u0142owy","Indywidualista","Elastyczny","Sztywny","Odporny na stres","Wra\u017cliwy","Punktualny","Sp\xf3\u017anialski"],t=1+Math.floor(3*Math.random()),n=[];for(let i=0;i<t;i++){const t=e.filter((e=>!n.includes(e)));if(0===t.length)break;const i=t[Math.floor(Math.random()*t.length)];n.push(i)}return n},N=(e,i)=>{const s=e.endsWith("s")?e:`${e}s`,r=t.staff[s];if(!r)return;const o=r.findIndex((e=>e.id===i));if(-1===o)return;const l=r[o],c={junior:{min:0,max:3e3,next:"mid"},mid:{min:3001,max:8e3,next:"senior"},senior:{min:8001,max:1/0,next:null}},d=l.level;if(l.experience>c[d].max&&c[d].next){const t=c[d].next;if(n({type:"UPDATE_STAFF",payload:{staffType:e,staffId:i,changes:{level:t,historia:[...l.historia||[],{data:(new Date).toISOString(),typ:"awans",opis:`Awansowa\u0142 na pozycj\u0119 ${f(t)}`}]}}}),"mid"===t){const s=Math.max(1,Math.floor(3*Math.random())+1);n({type:"UPDATE_STAFF",payload:{staffType:e,staffId:i,changes:{skill:Math.min(10,l.skill+s)}}}),a(`${l.name} zdoby\u0142 awans na poziom ${f(t)}! Umiej\u0119tno\u015bci +${s}`,"success")}else if("senior"===t){const s=Math.max(2,Math.floor(3*Math.random())+2);n({type:"UPDATE_STAFF",payload:{staffType:e,staffId:i,changes:{skill:Math.min(10,l.skill+s)}}}),a(`${l.name} zdoby\u0142 awans na poziom ${f(t)}! Umiej\u0119tno\u015bci +${s}`,"success")}}const u=[1e3,2e3,4e3,6e3,8e3,1e4,12e3,14e3,16e3].filter((e=>l.experience>=e));if(u.length>l.skill-1&&l.skill<10){const t=Math.min(10,u.length+1);t>l.skill&&(n({type:"UPDATE_STAFF",payload:{staffType:e,staffId:i,changes:{skill:t,historia:[...l.historia||[],{data:(new Date).toISOString(),typ:"rozw\xf3j",opis:`Zwi\u0119kszy\u0142 umiej\u0119tno\u015bci do poziomu ${t}/10`}]}}}),a(`${l.name} zwi\u0119kszy\u0142 swoje umiej\u0119tno\u015bci do poziomu ${t}/10!`,"success"))}};return{hireStaff:function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"junior";const r=c[s],o=d[e],l=Math.floor(o*r.salaryMultiplier),h="lawyer"===e||"envSpecialist"===e?u[e]:2*l;if(t.cash<h)return a(`Nie masz wystarczaj\u0105cych \u015brodk\xf3w! Potrzebujesz ${h.toLocaleString()} PLN.`,"error"),!1;const p=Date.now(),y=Math.floor(r.minSkill+Math.random()*(r.maxSkill-r.minSkill+1)),g={id:p,type:e,name:j(),skill:y,experience:0,level:s,salary:l,hiredOn:i.turn,morale:100,energy:100,specialization:k(e),traits:z()};return n({type:"HIRE_STAFF",payload:{staffType:e,staff:g,cost:h}}),a(`Zatrudniono ${f(s)} ${m(e,!0)}: ${g.name}`,"success"),!0},fireStaff:(e,i)=>{const s=t.staff[`${e}s`];if(!s)return!1;const r=s.findIndex((e=>e.id===i));if(-1===r)return!1;const o=s[r],l=o.salary;return t.cash<l?(a(`Nie masz wystarczaj\u0105cych \u015brodk\xf3w na odpraw\u0119! Potrzebujesz ${l.toLocaleString()} PLN.`,"error"),!1):(n({type:"FIRE_STAFF",payload:{staffType:e,staffId:i,cost:l}}),a(`Zwolniono pracownika: ${o.name}`,"warning"),!0)},trainStaff:(e,i,s)=>{const r=t.staff[`${e}s`];if(!r)return!1;const o=r.findIndex((e=>e.id===i));if(-1===o)return!1;const l=r[o],c=b(l,s);return t.cash<c?(a(`Nie masz wystarczaj\u0105cych \u015brodk\xf3w na szkolenie! Potrzebujesz ${c.toLocaleString()} PLN.`,"error"),!1):(n({type:"TRAIN_STAFF",payload:{staffType:e,staffId:i,trainingType:s,cost:c}}),a(`Wys\u0142ano pracownika ${l.name} na szkolenie`,"success"),!0)},assignStaffToProject:(e,r,o)=>{const l=e.endsWith("s")?e:`${e}s`,c=t.staff[l];if(!c)return!1;const d=c.find((e=>e.id===r));if(!d)return!1;const u=t.projects.find((e=>e.id===o));if(!u)return!1;return y(e,u.status)?(d.assignedProject&&g(e,r),n({type:"ASSIGN_STAFF_TO_PROJECT",payload:{staffType:e.endsWith("s")?e.slice(0,-1):e,staffId:r,projectId:o}}),s({type:"ADD_EVENT",payload:{id:Date.now()+Math.random(),type:"staff_event",title:"Przypisanie pracownika",description:`${d.name} (${m(e)}) zosta\u0142 przypisany do projektu ${u.name}`,severity:"info",turn:i.turn,expires:i.turn+5,staffId:d.id,staffName:d.name}}),a(`Przypisano ${m(e)} ${d.name} do projektu ${u.name}`,"success"),!0):(a(`${m(e)} nie mo\u017ce by\u0107 przypisany do projektu na etapie ${p(u.status)}`,"error"),!1)},staffEvents:r,calculateTrainingCost:b}},it=oe("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),at=oe("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),st=oe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),rt=oe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),ot=oe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),lt=oe("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]),ct=t=>{let{openStaffDetails:n}=t;const{state:a}=l(),{showNotification:s}=F(),r=nt(),[o,c]=(0,e.useState)("all"),[d,u]=(0,e.useState)(""),[h,p]=(0,e.useState)("name"),[y,g]=(0,e.useState)("asc"),v=[{id:"scouts",name:"Pozyskiwacze",icon:(0,i.jsx)(de,{className:"h-4 w-4"})},{id:"developers",name:"Developerzy",icon:(0,i.jsx)(it,{className:"h-4 w-4"})},{id:"lawyers",name:"Prawnicy",icon:(0,i.jsx)(at,{className:"h-4 w-4"})},{id:"envSpecialists",name:"Specjali\u015bci ds. \u015brodowiska",icon:(0,i.jsx)(at,{className:"h-4 w-4"})},{id:"lobbyists",name:"Lobby\u015bci",icon:(0,i.jsx)(at,{className:"h-4 w-4"})}],x=[{id:"junior",name:"Junior",cost:1},{id:"mid",name:"Mid",cost:1.5},{id:"senior",name:"Senior",cost:2.5}],[w,_]=(0,e.useState)(!1),[b,j]=(0,e.useState)(null),[k,z]=(0,e.useState)("junior"),N=()=>Object.entries(a.staff).flatMap((e=>{let[t,n]=e;return n.map((e=>({...e,staffType:t})))})),P=()=>{let e=N();if("all"!==o&&(e=e.filter((e=>e.staffType===o))),d){const t=d.toLowerCase();e=e.filter((e=>e.name.toLowerCase().includes(t)||e.specialization&&e.specialization.toLowerCase().includes(t)))}return e.sort(((e,t)=>{let n,i;switch(h){case"name":default:n=e.name,i=t.name;break;case"skill":n=e.skill,i=t.skill;break;case"experience":n=e.experience,i=t.experience;break;case"salary":n=e.salary,i=t.salary}return"asc"===y?n>i?1:-1:n<i?1:-1})),e},S=(()=>{const e=N();return{totalStaff:e.length,totalSalary:e.reduce(((e,t)=>e+(t.salary||0)),0),averageSkill:e.length>0?Math.round(e.reduce(((e,t)=>e+t.skill),0)/e.length*10)/10:0,staffByType:Object.fromEntries(Object.entries(a.staff).map((e=>{let[t,n]=e;return[t,n.length]}))),staffByLevel:e.reduce(((e,t)=>(e[t.level]=(e[t.level]||0)+1,e)),{})}})();return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"bg-white p-5 rounded-lg shadow-md mb-6",children:[(0,i.jsxs)("div",{className:"flex flex-wrap justify-between items-center mb-4",children:[(0,i.jsx)("h2",{className:"text-xl font-bold",children:"Zarz\u0105dzanie personelem"}),(0,i.jsx)(Ne,{variant:"primary",icon:(0,i.jsx)(st,{className:"h-4 w-4"}),onClick:()=>{j(null),z("junior"),_(!0)},children:"Zatrudnij pracownika"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,i.jsxs)("div",{className:"bg-blue-50 p-3 rounded",children:[(0,i.jsx)("div",{className:"text-sm text-blue-800",children:"\u0141\u0105czna liczba pracownik\xf3w"}),(0,i.jsx)("div",{className:"text-xl font-bold",children:S.totalStaff})]}),(0,i.jsxs)("div",{className:"bg-green-50 p-3 rounded",children:[(0,i.jsx)("div",{className:"text-sm text-green-800",children:"\u0141\u0105czne wynagrodzenie miesi\u0119czne"}),(0,i.jsxs)("div",{className:"text-xl font-bold",children:[S.totalSalary.toLocaleString()," PLN"]})]}),(0,i.jsxs)("div",{className:"bg-purple-50 p-3 rounded",children:[(0,i.jsx)("div",{className:"text-sm text-purple-800",children:"\u015aredni poziom umiej\u0119tno\u015bci"}),(0,i.jsxs)("div",{className:"text-xl font-bold",children:[S.averageSkill,"/10"]})]})]}),(0,i.jsxs)("div",{className:"flex flex-wrap gap-3 border-t pt-4",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(rt,{className:"h-4 w-4 mr-1 text-gray-500"}),(0,i.jsx)("span",{className:"text-sm text-gray-700",children:"Filtruj:"})]}),(0,i.jsxs)("select",{value:o,onChange:e=>c(e.target.value),className:"text-sm border rounded px-2 py-1",children:[(0,i.jsx)("option",{value:"all",children:"Wszyscy pracownicy"}),v.map((e=>(0,i.jsx)("option",{value:e.id,children:e.name},e.id)))]}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("input",{type:"text",value:d,onChange:e=>u(e.target.value),placeholder:"Szukaj...",className:"text-sm border rounded pl-8 pr-2 py-1 w-40"}),(0,i.jsx)(ot,{className:"h-4 w-4 text-gray-400 absolute left-2 top-1.5"})]}),(0,i.jsxs)("div",{className:"flex items-center ml-auto",children:[(0,i.jsx)(lt,{className:"h-4 w-4 mr-1 text-gray-500"}),(0,i.jsx)("span",{className:"text-sm text-gray-700",children:"Sortuj:"})]}),(0,i.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"text-sm border rounded px-2 py-1",children:[(0,i.jsx)("option",{value:"name",children:"Imi\u0119 i nazwisko"}),(0,i.jsx)("option",{value:"skill",children:"Umiej\u0119tno\u015bci"}),(0,i.jsx)("option",{value:"experience",children:"Do\u015bwiadczenie"}),(0,i.jsx)("option",{value:"salary",children:"Wynagrodzenie"})]}),(0,i.jsxs)("select",{value:y,onChange:e=>g(e.target.value),className:"text-sm border rounded px-2 py-1",children:[(0,i.jsx)("option",{value:"asc",children:"Rosn\u0105co"}),(0,i.jsx)("option",{value:"desc",children:"Malej\u0105co"})]})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[P().map((e=>{const t=e.staffType.endsWith("s")?e.staffType.slice(0,-1):e.staffType;return(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>n(e.id,t),children:[(0,i.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,i.jsx)("h3",{className:"font-bold",children:e.name}),(0,i.jsx)("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded",children:m(t)})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-sm",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Poziom:"}),(0,i.jsx)("span",{className:"ml-1",children:f(e.level)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Umiej\u0119tno\u015b\u0107:"}),(0,i.jsxs)("span",{className:"ml-1 font-medium",children:[e.skill,"/10"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Do\u015bwiadczenie:"}),(0,i.jsxs)("span",{className:"ml-1",children:[e.experience," pkt"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Wynagrodzenie:"}),(0,i.jsxs)("span",{className:"ml-1",children:[e.salary.toLocaleString()," PLN"]})]})]}),e.specialization&&(0,i.jsxs)("div",{className:"mt-2 text-sm",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Specjalizacja:"}),(0,i.jsx)("span",{className:"ml-1 font-medium",children:e.specialization})]}),e.assignedProject&&(0,i.jsx)("div",{className:"mt-2 bg-blue-50 p-2 rounded text-sm",children:(0,i.jsx)("span",{className:"text-blue-800",children:"Przypisany do projektu"})})]},e.id)})),0===P().length&&(0,i.jsx)("div",{className:"col-span-full bg-gray-50 p-4 rounded text-center text-gray-600",children:"all"===o&&""===d?"Nie masz jeszcze \u017cadnych pracownik\xf3w. Zatrudnij kogo\u015b, aby rozpocz\u0105\u0107!":"Brak pracownik\xf3w spe\u0142niaj\u0105cych kryteria wyszukiwania."})]}),(()=>{if(!w)return null;const e=b?((e,t)=>{const n={scout:15e3,developer:25e3,lawyer:3e4,envSpecialist:2e4,lobbyist:4e4}[e]||2e4,i={junior:1,mid:1.5,senior:2.2}[t]||1;return Math.round(n*i)})(b,k):0;return(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:[(0,i.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Zatrudnij nowego pracownika"}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"block text-gray-700 mb-2",children:"Typ pracownika:"}),(0,i.jsx)("div",{className:"grid grid-cols-2 gap-2",children:v.map((e=>(0,i.jsxs)("button",{onClick:()=>j(e.id.endsWith("s")?e.id.slice(0,-1):e.id),className:"p-2 border rounded flex items-center "+(b===(e.id.endsWith("s")?e.id.slice(0,-1):e.id)?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 hover:bg-gray-50"),children:[e.icon,(0,i.jsx)("span",{className:"ml-2",children:e.name})]},e.id)))})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"block text-gray-700 mb-2",children:"Poziom do\u015bwiadczenia:"}),(0,i.jsx)("div",{className:"grid grid-cols-3 gap-2",children:x.map((e=>(0,i.jsx)("button",{onClick:()=>z(e.id),className:"p-2 border rounded "+(k===e.id?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 hover:bg-gray-50"),children:e.name},e.id)))})]}),b&&(0,i.jsxs)("div",{className:"bg-gray-50 p-3 rounded mb-4",children:[(0,i.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,i.jsx)("span",{className:"font-medium",children:"Koszt zatrudnienia:"}),(0,i.jsxs)("span",{className:"font-bold",children:[e.toLocaleString()," PLN"]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"font-medium",children:"Miesi\u0119czne wynagrodzenie:"}),(0,i.jsxs)("span",{className:"font-bold",children:[Math.round(.04*e).toLocaleString()," PLN"]})]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)(Ne,{variant:"secondary",onClick:()=>_(!1),children:"Anuluj"}),(0,i.jsx)(Ne,{variant:"primary",disabled:!b,onClick:()=>((e,t)=>{try{r.hireStaff(e,t),_(!1)}catch(n){s(n.message||"Nie uda\u0142o si\u0119 zatrudni\u0107 pracownika","error")}})(b,k),children:"Zatrudnij"})]})]})})})()]})},dt=oe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),ut=oe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),ht=oe("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),pt=e=>{var t;let{openFinancePanel:n}=e;const{state:a}=l(),s=e=>e.toLocaleString()+" PLN",r={cash:a.cash,totalInvestment:a.economicMetrics.totalInvestment||0,totalRevenue:a.economicMetrics.totalRevenue||0,totalExpenses:a.economicMetrics.totalExpenses||0,avgROI:a.economicMetrics.avgROI||0,projectsValue:a.economicMetrics.projectsValue||0,balance:(a.economicMetrics.totalRevenue||0)-(a.economicMetrics.totalExpenses||0),hasLoans:a.loans&&a.loans.length>0,totalLoansAmount:(null===(t=a.loans)||void 0===t?void 0:t.reduce(((e,t)=>e+t.remainingAmount),0))||0};return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,i.jsx)("h2",{className:"text-xl font-bold",children:"Finanse firmy"}),(0,i.jsx)(Ne,{variant:"primary",icon:(0,i.jsx)(dt,{}),onClick:n,children:"Kredyty i finansowanie"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,i.jsxs)("div",{className:"p-4 bg-blue-50 rounded",children:[(0,i.jsx)("div",{className:"text-sm text-blue-600",children:"Got\xf3wka"}),(0,i.jsx)("div",{className:"text-xl font-bold",children:s(r.cash)})]}),(0,i.jsxs)("div",{className:"p-4 bg-green-50 rounded",children:[(0,i.jsx)("div",{className:"text-sm text-green-600",children:"Ca\u0142kowite przychody"}),(0,i.jsx)("div",{className:"text-xl font-bold",children:s(r.totalRevenue)})]}),(0,i.jsxs)("div",{className:"p-4 bg-red-50 rounded",children:[(0,i.jsx)("div",{className:"text-sm text-red-600",children:"Ca\u0142kowite wydatki"}),(0,i.jsx)("div",{className:"text-xl font-bold",children:s(r.totalExpenses)})]}),(0,i.jsxs)("div",{className:"p-4 bg-purple-50 rounded",children:[(0,i.jsx)("div",{className:"text-sm text-purple-600",children:"Bilans"}),(0,i.jsx)("div",{className:"text-xl font-bold "+(r.balance>=0?"text-green-600":"text-red-600"),children:s(r.balance)})]})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{className:"bg-white p-5 rounded-lg shadow-md",children:[(0,i.jsxs)("div",{className:"flex items-center mb-4",children:[(0,i.jsx)("div",{className:"p-2 rounded-full bg-green-100 mr-3",children:(0,i.jsx)(ut,{className:"h-5 w-5 text-green-600"})}),(0,i.jsx)("h3",{className:"font-bold text-lg",children:"Przychody"})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"flex justify-between p-2 bg-gray-50 rounded",children:[(0,i.jsx)("span",{children:"Sprzeda\u017c projekt\xf3w"}),(0,i.jsx)("span",{className:"font-medium",children:s(r.totalRevenue)})]}),(0,i.jsxs)("div",{className:"flex justify-between p-2 bg-gray-50 rounded",children:[(0,i.jsx)("span",{children:"Warto\u015b\u0107 projekt\xf3w"}),(0,i.jsx)("span",{className:"font-medium",children:s(r.projectsValue)})]})]})]}),(0,i.jsxs)("div",{className:"bg-white p-5 rounded-lg shadow-md",children:[(0,i.jsxs)("div",{className:"flex items-center mb-4",children:[(0,i.jsx)("div",{className:"p-2 rounded-full bg-red-100 mr-3",children:(0,i.jsx)(ht,{className:"h-5 w-5 text-red-600"})}),(0,i.jsx)("h3",{className:"font-bold text-lg",children:"Wydatki"})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"flex justify-between p-2 bg-gray-50 rounded",children:[(0,i.jsx)("span",{children:"Inwestycje w projekty"}),(0,i.jsx)("span",{className:"font-medium",children:s(r.totalInvestment)})]}),(0,i.jsxs)("div",{className:"flex justify-between p-2 bg-gray-50 rounded",children:[(0,i.jsx)("span",{children:"Koszty personelu"}),(0,i.jsx)("span",{className:"font-medium",children:s(Object.values(a.staff).flat().reduce(((e,t)=>e+(t.salary||0)),0))})]}),r.hasLoans&&(0,i.jsxs)("div",{className:"flex justify-between p-2 bg-gray-50 rounded",children:[(0,i.jsx)("span",{children:"Kredyty i po\u017cyczki"}),(0,i.jsx)("span",{className:"font-medium",children:s(r.totalLoansAmount)})]}),a.illegals.totalBribes>0&&(0,i.jsxs)("div",{className:"flex justify-between p-2 bg-gray-50 rounded",children:[(0,i.jsx)("span",{children:"Wydatki szarej strefy"}),(0,i.jsx)("span",{className:"font-medium",children:s(a.illegals.totalBribes)})]})]})]})]}),a.loans&&a.loans.length>0&&(0,i.jsxs)("div",{className:"bg-white p-5 rounded-lg shadow-md",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"p-2 rounded-full bg-blue-100 mr-3",children:(0,i.jsx)(dt,{className:"h-5 w-5 text-blue-600"})}),(0,i.jsx)("h3",{className:"font-bold text-lg",children:"Aktywne kredyty"})]}),(0,i.jsxs)("button",{onClick:n,className:"text-blue-600 hover:text-blue-800 flex items-center",children:[(0,i.jsx)("span",{children:"Zarz\u0105dzaj"}),(0,i.jsx)(he,{className:"h-4 w-4 ml-1"})]})]}),(0,i.jsx)("div",{className:"space-y-3",children:a.loans.map((e=>(0,i.jsxs)("div",{className:"border p-3 rounded",children:[(0,i.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,i.jsx)("strong",{children:e.bankName}),(0,i.jsx)("span",{children:s(e.remainingAmount)})]}),(0,i.jsxs)("div",{className:"text-sm text-gray-600",children:["Pozosta\u0142o ",e.remainingTerm," rat po ",s(e.monthlyPayment)]})]},e.id)))})]}),(0,i.jsxs)("div",{className:"bg-white p-5 rounded-lg shadow-md",children:[(0,i.jsx)("h3",{className:"font-bold text-lg mb-4",children:"Wska\u017aniki finansowe"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{className:"p-3 bg-gray-50 rounded",children:[(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"\u015aredni ROI"}),(0,i.jsxs)("div",{className:"text-xl font-medium "+(r.avgROI>=0?"text-green-600":"text-red-600"),children:[(100*r.avgROI).toFixed(1),"%"]})]}),(0,i.jsxs)("div",{className:"p-3 bg-gray-50 rounded",children:[(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"Warto\u015b\u0107 aktyw\xf3w"}),(0,i.jsx)("div",{className:"text-xl font-medium",children:s(r.cash+r.projectsValue)})]}),(0,i.jsxs)("div",{className:"p-3 bg-gray-50 rounded",children:[(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"Zobowi\u0105zania"}),(0,i.jsx)("div",{className:"text-xl font-medium",children:s(r.totalLoansAmount)})]})]}),(0,i.jsx)("div",{className:"mt-4 text-sm text-gray-600",children:"Wi\u0119cej wska\u017anik\xf3w i narz\u0119dzi finansowych dost\u0119pnych w panelu finansowym."})]})]})},mt=oe("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),ft=oe("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),yt=()=>{const{state:e}=l(),{state:t}=F(),n={name:e.name,founded:"2024",totalProjects:e.projects.length,completedProjects:e.projects.filter((e=>"ready_to_build"===e.status)).length,totalMW:e.totalPower,rtbMW:e.rtbPower,staffCount:Object.values(e.staff).reduce(((e,t)=>e+t.length),0),cash:e.cash,reputation:e.reputation},a=e=>e.toLocaleString()+" PLN";return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:(0,i.jsxs)("div",{className:"flex justify-between items-start",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-2xl font-bold",children:n.name}),(0,i.jsxs)("p",{className:"text-gray-600",children:["Za\u0142o\u017cona w ",n.founded," roku"]})]}),(0,i.jsxs)("div",{className:"flex space-x-4",children:[(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsx)("div",{className:"text-sm text-gray-500",children:"Reputacja"}),(0,i.jsxs)("div",{className:"text-lg font-bold "+(s=n.reputation,s>=150?"text-green-600":s>=100?"text-blue-600":s>=50?"text-yellow-600":"text-red-600"),children:[n.reputation,"/200 (",(e=>e>=150?"Doskona\u0142a":e>=100?"Dobra":e>=50?"Przeci\u0119tna":e>=20?"Z\u0142a":"Fatalna")(n.reputation),")"]})]}),(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsx)("div",{className:"text-sm text-gray-500",children:"Got\xf3wka"}),(0,i.jsx)("div",{className:"text-lg font-bold text-green-600",children:a(n.cash)})]})]})]})}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{className:"bg-white p-5 rounded-lg shadow-md",children:[(0,i.jsxs)("div",{className:"flex items-center mb-4",children:[(0,i.jsx)("div",{className:"p-3 rounded-full bg-blue-100 mr-4",children:(0,i.jsx)(it,{className:"h-6 w-6 text-blue-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-bold text-lg",children:"Projekty"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Podsumowanie projekt\xf3w"})]})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-700",children:"Wszystkie projekty:"}),(0,i.jsx)("span",{className:"font-medium",children:n.totalProjects})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-700",children:"Projekty RTB:"}),(0,i.jsx)("span",{className:"font-medium",children:n.completedProjects})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-700",children:"\u0141\u0105czna moc:"}),(0,i.jsxs)("span",{className:"font-medium",children:[n.totalMW," MW"]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-700",children:"Moc RTB:"}),(0,i.jsxs)("span",{className:"font-medium",children:[n.rtbMW," MW"]})]})]})]}),(0,i.jsxs)("div",{className:"bg-white p-5 rounded-lg shadow-md",children:[(0,i.jsxs)("div",{className:"flex items-center mb-4",children:[(0,i.jsx)("div",{className:"p-3 rounded-full bg-green-100 mr-4",children:(0,i.jsx)(de,{className:"h-6 w-6 text-green-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-bold text-lg",children:"Personel"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Kadry firmy"})]})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-700",children:"Liczba pracownik\xf3w:"}),(0,i.jsx)("span",{className:"font-medium",children:n.staffCount})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-700",children:"Developery:"}),(0,i.jsx)("span",{className:"font-medium",children:e.staff.developers.length})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-700",children:"Pozyskiwacze:"}),(0,i.jsx)("span",{className:"font-medium",children:e.staff.scouts.length})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-700",children:"Prawnicy i lobby\u015bci:"}),(0,i.jsx)("span",{className:"font-medium",children:e.staff.lawyers.length+e.staff.lobbyists.length})]})]})]}),(0,i.jsxs)("div",{className:"bg-white p-5 rounded-lg shadow-md",children:[(0,i.jsxs)("div",{className:"flex items-center mb-4",children:[(0,i.jsx)("div",{className:"p-3 rounded-full bg-purple-100 mr-4",children:(0,i.jsx)(ut,{className:"h-6 w-6 text-purple-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-bold text-lg",children:"Wyniki"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Statystyki firmy"})]})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-700",children:"\u0141\u0105czne inwestycje:"}),(0,i.jsx)("span",{className:"font-medium",children:a(e.economicMetrics.totalInvestment||0)})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-700",children:"\u0141\u0105czne przychody:"}),(0,i.jsx)("span",{className:"font-medium",children:a(e.economicMetrics.totalRevenue||0)})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-700",children:"\u0141\u0105czne wydatki:"}),(0,i.jsx)("span",{className:"font-medium",children:a(e.economicMetrics.totalExpenses||0)})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-700",children:"\u015aredni ROI:"}),(0,i.jsxs)("span",{className:"font-medium",children:[(100*(e.economicMetrics.avgROI||0)).toFixed(1),"%"]})]})]})]})]}),(0,i.jsxs)("div",{className:"bg-white p-5 rounded-lg shadow-md",children:[(0,i.jsxs)("div",{className:"flex items-center mb-4",children:[(0,i.jsx)("div",{className:"p-3 rounded-full bg-yellow-100 mr-4",children:(0,i.jsx)(mt,{className:"h-6 w-6 text-yellow-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-bold text-lg",children:"Reputacja firmy"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Historia zmian reputacji"})]})]}),e.reputationHistory.length>0?(0,i.jsx)("div",{className:"divide-y",children:e.reputationHistory.slice(-5).reverse().map(((e,t)=>(0,i.jsx)("div",{className:"py-2",children:(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("span",{className:"font-medium",children:["Tura ",e.turn,": "]}),(0,i.jsx)("span",{className:"text-gray-700",children:e.reason})]}),(0,i.jsxs)("span",{className:e.change>=0?"text-green-600":"text-red-600",children:[e.change>0?"+":"",e.change]})]})},t)))}):(0,i.jsx)("p",{className:"text-gray-600 italic",children:"Brak historii zmian reputacji"})]}),e.illegals.illegalActionHistory.length>0&&(0,i.jsxs)("div",{className:"bg-white p-5 rounded-lg shadow-md",children:[(0,i.jsxs)("div",{className:"flex items-center mb-4",children:[(0,i.jsx)("div",{className:"p-3 rounded-full bg-red-100 mr-4",children:(0,i.jsx)(ft,{className:"h-6 w-6 text-red-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-bold text-lg",children:"Dzia\u0142ania szarej strefy"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Historia nielegalnych dzia\u0142a\u0144"})]})]}),(0,i.jsx)("div",{className:"divide-y",children:e.illegals.illegalActionHistory.slice(-5).reverse().map(((e,t)=>(0,i.jsxs)("div",{className:"py-2",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("span",{className:"font-medium",children:["Tura ",e.turn,": "]}),(0,i.jsx)("span",{className:"text-gray-700",children:e.type.replace(/_/g," ")})]}),(0,i.jsx)("span",{className:"text-red-600",children:a(e.cost)})]}),(0,i.jsxs)("div",{className:"text-sm text-gray-600",children:["Cel: ",e.target]})]},t)))})]})]});var s},gt=oe("ShieldOff",[["path",{d:"M19.7 14a6.9 6.9 0 0 0 .3-2V5l-8-3-3.2 1.2",key:"342pvf"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M4.7 4.7 4 5v7c0 6 8 10 8 10a20.3 20.3 0 0 0 5.62-4.38",key:"p0ycf4"}]]),vt=oe("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),xt=oe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),wt=oe("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),_t=e=>{let{status:t="active",text:n,icon:a,className:s="",...r}=e;const o=`status-${t}`;return(0,i.jsxs)("span",{className:`status-indicator ${o} ${s}`,...r,children:[a&&(0,i.jsx)("span",{className:"mr-1",children:a}),n]})},bt=t=>{var n,a;let{project:s,onAdvance:r,onAssignStaff:o,onDetails:c,onSell:d,onApplyIllegalMethod:u,onAccelerate:h}=t;const{state:m}=l(),{showNotification:f}=F(),[y,g]=(0,e.useState)(!1);if(!s)return null;const v=e=>e>=1e6?`${(e/1e6).toFixed(2)} mln z\u0142`:e>=1e3?`${(e/1e3).toFixed(1)} tys. z\u0142`:`${e} z\u0142`,x=()=>"ready_to_build"===s.status?100:Math.min(100,Math.round(s.progress)),w={land_acquisition:{index:0,label:"Grunty"},environmental_decision:{index:1,label:"\u015arodowisko"},zoning_conditions:{index:2,label:"Warunki zabudowy"},grid_connection:{index:3,label:"Przy\u0142\u0105czenie"},ready_to_build:{index:4,label:"RTB"}},_=()=>{const e=25e4*s.power,t={land_acquisition:.15,environmental_decision:.35,zoning_conditions:.55,grid_connection:.85,ready_to_build:1}[s.status]||.1,n=s.progress/100*.2;return Math.round(e*(t+n))},b=()=>_()-s.totalCost,j=e=>{if(!u)return void f("Funkcja u\u017cywania nielegalnych metod nie jest dost\u0119pna","error");if(m.reputation<30)return void f("Reputacja jest zbyt niska, aby ryzykowa\u0107 kolejne nielegalne dzia\u0142ania","error");let t=0;switch(e){case"bribe_official":t=25e3+1e3*s.power;break;case"forge_documents":t=15e3+500*s.power;break;case"pressure_officials":t=3e4+2e3*s.power;break;default:t=2e4}m.cash<t?f(`Nie masz wystarczaj\u0105cych \u015brodk\xf3w na t\u0119 akcj\u0119 (${t.toLocaleString()} z\u0142)`,"error"):(u(s.id,e,t),g(!1))};return(0,i.jsxs)("div",{className:"bg-white rounded shadow-md overflow-hidden flex flex-col h-full",children:[(0,i.jsxs)("div",{className:"p-3 border-b bg-gray-50 flex justify-between items-center",children:[(0,i.jsxs)("div",{className:"font-medium",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(e=>{switch(e){case"PV":return(0,i.jsx)(ge,{className:"h-4 w-4 text-yellow-500"});case"WF":return(0,i.jsx)(ue,{className:"h-4 w-4 text-blue-500"});case"BESS":return(0,i.jsx)(Se,{className:"h-4 w-4 text-purple-500"});default:return null}})(s.technology),(0,i.jsx)("span",{className:"ml-1",children:s.name}),s.useIllegalMethods&&(0,i.jsx)("div",{className:"ml-2 text-red-500",title:"Ten projekt wykorzystuje nielegalne metody",children:(0,i.jsx)(gt,{className:"h-4 w-4"})})]}),(0,i.jsxs)("div",{className:"text-xs text-gray-500 flex items-center",children:[(0,i.jsx)(vt,{className:"h-3 w-3 mr-1"}),s.county?`${s.county.name}, ${s.region}`:s.region]})]}),(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsxs)("div",{className:"font-bold flex items-center justify-end",children:[s.power," MW"]}),(0,i.jsxs)("div",{className:"text-xs text-gray-500 flex items-center justify-end",children:[(0,i.jsx)(le,{className:"h-3 w-3 mr-1"})," Tura ",s.startedOn]})]})]}),(0,i.jsxs)("div",{className:"px-4 py-3",children:[(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsxs)("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[(0,i.jsxs)("span",{children:["Etap: ",p(s.status)]}),(0,i.jsxs)("span",{children:[x(),"%"]})]}),(0,i.jsx)(Pe,{value:x(),status:s.useIllegalMethods?"warning":x()>=75?"high":x()>=30?"medium":"low"})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsxs)("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[(0,i.jsx)("span",{children:"Ca\u0142kowity post\u0119p"}),(0,i.jsxs)("span",{children:[20*(null===(n=w[s.status])||void 0===n?void 0:n.index)+x()/5,"%"]})]}),(0,i.jsx)("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,i.jsx)("div",{className:"h-full "+(s.useIllegalMethods?"bg-amber-500":"bg-blue-500"),style:{width:20*(null===(a=w[s.status])||void 0===a?void 0:a.index)+x()/5+"%"}})})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-2 mb-4 text-xs",children:[(0,i.jsxs)("div",{className:"bg-gray-50 p-2 rounded",children:[(0,i.jsx)("div",{className:"text-gray-500",children:"Ca\u0142kowity koszt"}),(0,i.jsx)("div",{className:"font-medium",children:v(s.totalCost)})]}),(0,i.jsxs)("div",{className:"bg-gray-50 p-2 rounded",children:[(0,i.jsx)("div",{className:"text-gray-500",children:"Szacowana warto\u015b\u0107"}),(0,i.jsx)("div",{className:"font-medium",children:v(_())})]}),(0,i.jsxs)("div",{className:"bg-gray-50 p-2 rounded",children:[(0,i.jsx)("div",{className:"text-gray-500",children:"Potencjalny zysk"}),(0,i.jsxs)("div",{className:"font-medium "+(b()>=0?"text-green-600":"text-red-600"),children:[v(b())," (",(()=>{const e=b();return 0===s.totalCost?0:Math.round(e/s.totalCost*100)})(),"%)"]})]}),(0,i.jsxs)("div",{className:"bg-gray-50 p-2 rounded",children:[(0,i.jsx)("div",{className:"text-gray-500",children:"Status"}),(0,i.jsx)("div",{className:"font-medium",children:(0,i.jsx)(_t,{status:(k=s.status,z=s.progress,"ready_to_build"===k?"completed":z<25?"warning":"active"),text:s.progress>=100?"Gotowy do rozwoju":"W trakcie"})})]})]}),(0,i.jsxs)("div",{className:"flex flex-wrap justify-between mt-auto pt-2 border-t",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("button",{onClick:()=>c(s.id),className:"text-xs px-2 py-1 text-gray-600 hover:bg-gray-100 rounded",children:"Szczeg\xf3\u0142y"}),(0,i.jsxs)("button",{onClick:()=>o(s.id),className:"text-xs px-2 py-1 text-gray-600 hover:bg-gray-100 rounded ml-1",children:[(0,i.jsx)(de,{className:"h-3 w-3 inline mr-1"}),"Personel"]})]}),(0,i.jsxs)("div",{className:"relative",children:[y&&(0,i.jsxs)("div",{className:"absolute bottom-8 right-0 bg-white shadow-md rounded border p-2 w-48 z-10",children:[(0,i.jsxs)("div",{className:"text-xs font-medium mb-2 text-red-600 flex items-center",children:[(0,i.jsx)(gt,{className:"h-3 w-3 mr-1"}),"Dzia\u0142ania niejawne"]}),(0,i.jsx)("button",{onClick:()=>j("bribe_official"),className:"text-xs w-full text-left p-1 hover:bg-red-50 text-gray-700 mb-1 rounded",children:"\u0141ap\xf3wka dla urz\u0119dnika (25k+ z\u0142)"}),(0,i.jsx)("button",{onClick:()=>j("forge_documents"),className:"text-xs w-full text-left p-1 hover:bg-red-50 text-gray-700 mb-1 rounded",children:"Fa\u0142szowanie dokument\xf3w (15k+ z\u0142)"}),(0,i.jsx)("button",{onClick:()=>j("pressure_officials"),className:"text-xs w-full text-left p-1 hover:bg-red-50 text-gray-700 mb-1 rounded",children:"Naciski na urz\u0119dnik\xf3w (30k+ z\u0142)"}),(0,i.jsx)("button",{onClick:()=>g(!1),className:"text-xs w-full text-left p-1 hover:bg-gray-100 text-gray-500 rounded",children:"Anuluj"})]}),s.progress>=100&&"ready_to_build"!==s.status&&(0,i.jsx)("button",{onClick:()=>r(s.id),className:"text-xs px-2 py-1 bg-green-500 text-white rounded hover:bg-green-600",children:"Nast\u0119pny etap"}),"land_acquisition"!==s.status&&(0,i.jsxs)("button",{onClick:()=>d(s.id),className:"text-xs px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 ml-1",children:[(0,i.jsx)(xt,{className:"h-3 w-3 inline mr-1"}),"Sprzedaj"]}),"ready_to_build"!==s.status&&(0,i.jsx)("button",{onClick:()=>g(!y),className:`text-xs px-2 py-1 ${s.useIllegalMethods?"bg-amber-500":"bg-gray-700"} text-white rounded hover:bg-gray-800 ml-1`,title:s.useIllegalMethods?"Ten projekt ju\u017c u\u017cywa nielegalnych metod":"U\u017cyj nielegalnych metod, aby przyspieszy\u0107 projekt",children:(0,i.jsx)(wt,{className:"h-3 w-3 inline"})})]})]})]}),(0,i.jsxs)("div",{className:"px-4 py-3 bg-gray-50 flex justify-between items-center",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-xs text-gray-500",children:"Status: "}),(0,i.jsx)("span",{className:"text-sm font-medium "+(s.useIllegalMethods?"text-amber-600":"text-blue-600"),children:p(s.status)})]}),"ready_to_build"!==s.status&&(0,i.jsx)(Ne,{variant:"secondary",size:"sm",onClick:()=>{"function"===typeof h&&h(s.id)},children:"Przyspiesz projekt"})]})]});var k,z},jt=(oe("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),oe("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),oe("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),oe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])),kt=oe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),zt=oe("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),Nt=()=>{const{state:t,dispatch:n}=l(),{state:a,showNotification:s}=F(),{projects:r,accelerateProject:o,sendProjectToMarket:c,applyIllegalMethod:d,advanceProject:u}=ke(),[h,p]=(0,e.useState)(null),[m,f]=(0,e.useState)("all"),[y,g]=(0,e.useState)("progress"),[v,x]=(0,e.useState)("desc"),w=(0,e.useMemo)((()=>t.projects.filter((e=>"all"===m||("pv"===m?"PV"===e.technology:"wf"===m?"WF"===e.technology:"development"===m?"ready_to_build"!==e.status:"rtb"!==m||"ready_to_build"===e.status)))),[t.projects,m]),_=(0,e.useMemo)((()=>[...w].sort(((e,t)=>{if("progress"===y){const n=e.progress||0,i=t.progress||0;return"asc"===v?n-i:i-n}if("power"===y)return"asc"===v?e.power-t.power:t.power-e.power;if("stage"===y){const n=["land_acquisition","environmental_decision","zoning_conditions","grid_connection","ready_to_build"],i=n.indexOf(e.status),a=n.indexOf(t.status);return"asc"===v?i-a:a-i}if("value"===y){const n=e=>15e4*e.power*({land_acquisition:.15,environmental_decision:.35,zoning_conditions:.55,grid_connection:.85,ready_to_build:1}[e.status]||.1),i=n(e),a=n(t);return"asc"===v?i-a:a-i}return 0}))),[w,y,v]),b=(0,e.useMemo)((()=>{const e={total:t.projects.length,pv:0,wf:0,rtb:0,development:0,totalPower:0,totalEstimatedValue:0};return t.projects.forEach((t=>{"PV"===t.technology&&e.pv++,"WF"===t.technology&&e.wf++,"ready_to_build"===t.status&&e.rtb++,"ready_to_build"!==t.status&&e.development++,e.totalPower+=t.power||0;const n=15e4*t.power;e.totalEstimatedValue+=n*({land_acquisition:.15,environmental_decision:.35,zoning_conditions:.55,grid_connection:.85,ready_to_build:1}[t.status]||.1)})),e}),[t.projects]),j=e=>{const n=t.projects.find((t=>t.id===e));if(!n)return;let i=0;switch(n.status){case"land_acquisition":i=Math.round(5e3*n.size);break;case"environmental_decision":i=Math.max(5e4,1e4*n.power);break;case"zoning_conditions":i=Math.max(3e4,7e3*n.power);break;case"grid_connection":i=Math.max(8e4,15e3*n.power)}const a=window.prompt(`Podaj kwot\u0119 przyspieszenia projektu (sugerowana: ${i.toLocaleString()} PLN):`,i);if(null===a)return;const r=parseInt(a.replace(/\D/g,""),10);if(isNaN(r)||r<=0)return void s("Nieprawid\u0142owa kwota","error");o(e,r)&&s(`Przyspieszono projekt za ${r.toLocaleString()} PLN`,"success")};return(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4",children:[(0,i.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[(0,i.jsx)(it,{className:"h-6 w-6 mr-2 text-blue-600"}),"Podsumowanie projekt\xf3w"]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-3 mb-4",children:[(0,i.jsxs)("div",{className:"bg-blue-50 p-3 rounded-md",children:[(0,i.jsx)("div",{className:"text-xs text-blue-800",children:"Wszystkie projekty"}),(0,i.jsx)("div",{className:"text-xl font-bold text-blue-900",children:b.total})]}),(0,i.jsxs)("div",{className:"bg-yellow-50 p-3 rounded-md",children:[(0,i.jsx)("div",{className:"text-xs text-yellow-800",children:"Fotowoltaika (PV)"}),(0,i.jsx)("div",{className:"text-xl font-bold text-yellow-900",children:b.pv})]}),(0,i.jsxs)("div",{className:"bg-green-50 p-3 rounded-md",children:[(0,i.jsx)("div",{className:"text-xs text-green-800",children:"Farmy wiatrowe (WF)"}),(0,i.jsx)("div",{className:"text-xl font-bold text-green-900",children:b.wf})]}),(0,i.jsxs)("div",{className:"bg-purple-50 p-3 rounded-md",children:[(0,i.jsx)("div",{className:"text-xs text-purple-800",children:"W developmencie"}),(0,i.jsx)("div",{className:"text-xl font-bold text-purple-900",children:b.development})]}),(0,i.jsxs)("div",{className:"bg-indigo-50 p-3 rounded-md",children:[(0,i.jsx)("div",{className:"text-xs text-indigo-800",children:"Ready-to-Build"}),(0,i.jsx)("div",{className:"text-xl font-bold text-indigo-900",children:b.rtb})]}),(0,i.jsxs)("div",{className:"bg-red-50 p-3 rounded-md",children:[(0,i.jsx)("div",{className:"text-xs text-red-800",children:"Moc ca\u0142kowita"}),(0,i.jsxs)("div",{className:"text-xl font-bold text-red-900",children:[b.totalPower," MW"]})]})]}),(0,i.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4 items-center text-sm",children:[(0,i.jsx)("div",{className:"font-medium",children:"Filtruj:"}),(0,i.jsxs)("select",{value:m,onChange:e=>f(e.target.value),className:"border rounded px-2 py-1 text-sm",children:[(0,i.jsx)("option",{value:"all",children:"Wszystkie projekty"}),(0,i.jsx)("option",{value:"pv",children:"Fotowoltaika (PV)"}),(0,i.jsx)("option",{value:"wf",children:"Farmy wiatrowe (WF)"}),(0,i.jsx)("option",{value:"development",children:"W developmencie"}),(0,i.jsx)("option",{value:"rtb",children:"Ready-to-Build"})]}),(0,i.jsx)("div",{className:"font-medium ml-4",children:"Sortuj:"}),(0,i.jsxs)("select",{value:y,onChange:e=>g(e.target.value),className:"border rounded px-2 py-1 text-sm",children:[(0,i.jsx)("option",{value:"progress",children:"Post\u0119p"}),(0,i.jsx)("option",{value:"power",children:"Moc (MW)"}),(0,i.jsx)("option",{value:"stage",children:"Etap"}),(0,i.jsx)("option",{value:"value",children:"Warto\u015b\u0107"})]}),(0,i.jsx)("button",{onClick:()=>x("asc"===v?"desc":"asc"),className:"border rounded px-2 py-1 flex items-center",children:"asc"===v?(0,i.jsx)(jt,{className:"h-4 w-4"}):(0,i.jsx)(kt,{className:"h-4 w-4"})})]}),_.length>0?(0,i.jsx)("div",{className:"space-y-3",children:_.map((e=>(0,i.jsx)(bt,{project:e,onAdvance:()=>u(e.id),onAccelerate:j,onApplyIllegalMethod:t=>d(e.id,t)},e.id)))}):(0,i.jsxs)("div",{className:"bg-gray-50 p-8 rounded-lg text-center",children:[(0,i.jsx)("div",{className:"text-gray-400 mb-3",children:(0,i.jsx)(zt,{className:"h-10 w-10 mx-auto"})}),(0,i.jsx)("p",{className:"text-gray-600",children:"Brak projekt\xf3w spe\u0142niaj\u0105cych kryteria filtrowania"}),(0,i.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"Zmie\u0144 filtry lub rozpocznij nowe projekty"})]})]})},Pt=oe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),St=e=>{let{title:t,isOpen:n,onClose:a,children:s,variant:r="default"}=e;if(!n)return null;return(0,i.jsxs)("div",{className:`fixed top-0 right-0 h-full w-96 shadow-lg border-l-4 z-30 transition-all duration-300 ease-in-out ${(()=>{switch(r){case"illegal":return"border-l-red-600 bg-red-50";case"staff":return"border-l-blue-600 bg-blue-50";case"project":return"border-l-green-600 bg-green-50";case"finance":return"border-l-purple-600 bg-purple-50";default:return"border-l-gray-600 bg-gray-50"}})()}`,style:{transform:n?"translateX(0)":"translateX(100%)",overflowY:"auto"},children:[(0,i.jsxs)("div",{className:"flex justify-between items-center p-4 border-b",children:[(0,i.jsx)("h2",{className:"text-xl font-bold",children:t}),(0,i.jsx)("button",{onClick:a,className:"p-1 rounded-full hover:bg-gray-200 transition-colors",children:(0,i.jsx)(Pt,{size:20})})]}),(0,i.jsx)("div",{className:"p-4",children:s})]})},Et=oe("FileX",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"9.5",x2:"14.5",y1:"12.5",y2:"17.5",key:"izs6du"}],["line",{x1:"14.5",x2:"9.5",y1:"12.5",y2:"17.5",key:"1lehlj"}]]),Mt=oe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Ct=oe("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),Tt=oe("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]),Lt=oe("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),Ot=oe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),At=t=>{let{onClose:n}=t;const{state:a,dispatch:s}=l(),{state:r,showNotification:o}=F(),{dispatch:c}=H(),[d,u]=(0,e.useState)(null),h=[{id:"bribe_officials",name:"Przekupstwo urz\u0119dnik\xf3w",description:"Wykorzystaj \u0142ap\xf3wki, aby przyspieszy\u0107 proces administracyjny i uzyska\u0107 przychylne decyzje.",icon:(0,i.jsx)(ce,{className:"h-5 w-5 text-yellow-600"}),riskLevel:"high",cost:5e4,reputation:-10,effects:"Przyspiesza proces uzyskiwania decyzji administracyjnych o 40% dla wskazanego projektu.",requirements:"Minimum 100 000 PLN i reputacja > 30",details:"Przekupstwo urz\u0119dnik\xf3w to powszechna praktyka w krajach o wysokim poziomie korupcji. W sektorze OZE mo\u017ce dotyczy\u0107 przyspieszenia wydania decyzji \u015brodowiskowych, warunk\xf3w zabudowy lub przy\u0142\u0105czenia do sieci.",requiredCorruption:10,targetType:"project"},{id:"falsify_documents",name:"Fa\u0142szowanie dokumentacji",description:"Zmodyfikuj dokumentacj\u0119 techniczn\u0105 lub \u015brodowiskow\u0105, aby ukry\u0107 potencjalne problemy.",icon:(0,i.jsx)(Et,{className:"h-5 w-5 text-red-600"}),riskLevel:"extreme",cost:1e5,reputation:-20,effects:"Eliminuje negatywne czynniki techniczne lub \u015brodowiskowe blokuj\u0105ce rozw\xf3j projektu.",requirements:"Konieczne posiadanie nielegalnej bazy danych i reputacja > 50",details:"Fa\u0142szowanie dokumentacji to powa\u017cne przest\u0119pstwo, kt\xf3re mo\u017ce dotyczy\u0107 raport\xf3w oddzia\u0142ywania na \u015brodowisko, bada\u0144 ornitologicznych lub dokumentacji technicznej. Wykrycie mo\u017ce skutkowa\u0107 nie tylko karami finansowymi, ale nawet odpowiedzialno\u015bci\u0105 karn\u0105.",requiredCorruption:30,targetType:"project"},{id:"insider_info",name:"Informacje poufne",description:"Uzyskaj dost\u0119p do poufnych informacji o planach przestrzennych i aukcjach energii.",icon:(0,i.jsx)(Mt,{className:"h-5 w-5 text-blue-600"}),riskLevel:"medium",cost:25e3,reputation:-5,effects:"Udost\u0119pnia informacje o najlepszych lokalizacjach i nadchodz\u0105cych aukcjach, zwi\u0119kszaj\u0105c szanse sukcesu.",requirements:"Posiadanie co najmniej jednego lobbysty",details:"Wykorzystanie informacji poufnych to dzia\u0142alno\u015b\u0107 na granicy prawa, kt\xf3ra polega na uzyskiwaniu dost\u0119pu do niepublicznych danych o planach zagospodarowania, przetargach czy zmianach regulacyjnych. Mo\u017ce dawa\u0107 znacz\u0105c\u0105 przewag\u0119 konkurencyjn\u0105.",requiredCorruption:5,targetType:"company"},{id:"intimidate_landowners",name:"Zastraszanie w\u0142a\u015bcicieli grunt\xf3w",description:"Wywieranie presji na w\u0142a\u015bcicieli grunt\xf3w, aby sprzedali ziemi\u0119 po zani\u017conej cenie.",icon:(0,i.jsx)(Ct,{className:"h-5 w-5 text-purple-600"}),riskLevel:"high",cost:3e4,reputation:-15,effects:"Obni\u017ca koszty zakupu grunt\xf3w o 30-50%.",requirements:"Reputacja > 40",details:"Zastraszanie w\u0142a\u015bcicieli grunt\xf3w to metoda nieetyczna i nielegalna, stosowana przez nieuczciwych deweloper\xf3w. Polega na wywieraniu presji poprzez gro\u017aby lub wykorzystywanie luk prawnych, aby zmusi\u0107 w\u0142a\u015bcicieli do sprzeda\u017cy po zani\u017conych cenach.",requiredCorruption:20,targetType:"project"},{id:"build_corruption_network",name:"Budowa sieci korupcyjnej",description:"Rozwijaj sie\u0107 kontakt\xf3w w urz\u0119dach i instytucjach kontrolnych, aby u\u0142atwi\u0107 przysz\u0142e dzia\u0142ania.",icon:(0,i.jsx)(Tt,{className:"h-5 w-5 text-green-600"}),riskLevel:"medium",cost:2e5,reputation:-10,effects:"Zwi\u0119ksza poziom sieci korupcyjnej o 10 punkt\xf3w, obni\u017caj\u0105c koszty przysz\u0142ych nielegalnych dzia\u0142a\u0144.",requirements:"Minimum 200 000 PLN",details:"Budowa sieci korupcyjnej to d\u0142ugofalowa inwestycja w nieformalne kontakty z urz\u0119dnikami, politykami i przedstawicielami instytucji kontrolnych. Im silniejsza sie\u0107, tym \u0142atwiejsze i ta\u0144sze staj\u0105 si\u0119 przysz\u0142e nielegalne dzia\u0142ania.",requiredCorruption:0,targetType:"company"},{id:"sabotage_competitors",name:"Sabota\u017c konkurencji",description:"Zlecenie dzia\u0142a\u0144 sabota\u017cowych przeciwko konkurencyjnym projektom w regionie.",icon:(0,i.jsx)(Lt,{className:"h-5 w-5 text-orange-600"}),riskLevel:"extreme",cost:15e4,reputation:-25,effects:"Op\xf3\u017ania projekty konkurencji w regionie o 3-6 miesi\u0119cy.",requirements:"Reputacja > 60 i poziom sieci korupcyjnej > 30",details:"Sabota\u017c konkurencji to bezpo\u015brednie dzia\u0142ania wymierzone w projekty konkurencyjnych firm. Mo\u017ce obejmowa\u0107 manipulowanie konsultacjami spo\u0142ecznymi, sztuczne wywo\u0142ywanie protest\xf3w lub nawet fizyczne uszkodzenia infrastruktury. Niesie wysokie ryzyko wykrycia i powa\u017cnych konsekwencji prawnych.",requiredCorruption:40,targetType:"region"},{id:"create_illegal_database",name:"Stw\xf3rz nielegaln\u0105 baz\u0119 danych",description:"Zlecenie stworzenia bazy danych zawieraj\u0105cej poufne informacje o urz\u0119dnikach, planach i procedurach.",icon:(0,i.jsx)(Ot,{className:"h-5 w-5 text-gray-600"}),riskLevel:"low",cost:75e3,reputation:-5,effects:"Odblokowuje dodatkowe nielegalne akcje i zwi\u0119ksza skuteczno\u015b\u0107 istniej\u0105cych o 20%.",requirements:"Minimum 75 000 PLN",details:"Nielegalna baza danych to zbi\xf3r poufnych informacji o urz\u0119dnikach, procedurach i lukach prawnych. Jej posiadanie umo\u017cliwia bardziej precyzyjne planowanie nielegalnych dzia\u0142a\u0144 i zwi\u0119ksza ich skuteczno\u015b\u0107. Pozyskanie takich danych wymaga zaanga\u017cowania os\xf3b z dost\u0119pem do poufnych informacji.",requiredCorruption:0,targetType:"company"}],p=e=>!(e.requirements.includes("minimum")&&a.cash<e.cost)&&(!(e.requirements.includes("reputacja")&&a.reputation<parseInt(e.requirements.match(/reputacja > (\d+)/)[1]))&&(!(e.requiredCorruption>a.illegals.corruptionNetwork)&&(!("falsify_documents"===e.id&&!a.illegals.hasIllegalDatabase)&&(("insider_info"!==e.id||0!==a.staff.lobbyists.length)&&("create_illegal_database"!==e.id||!a.illegals.hasIllegalDatabase))))),m=e=>{switch(e){case"low":return(0,i.jsx)("span",{className:"text-green-600 font-medium",children:"Niskie"});case"medium":return(0,i.jsx)("span",{className:"text-yellow-600 font-medium",children:"\u015arednie"});case"high":return(0,i.jsx)("span",{className:"text-orange-600 font-medium",children:"Wysokie"});case"extreme":return(0,i.jsx)("span",{className:"text-red-600 font-medium",children:"Ekstremalne"});default:return(0,i.jsx)("span",{className:"text-gray-600",children:"Nieznane"})}},f=e=>{const t=p(e);return(0,i.jsxs)("div",{className:"border rounded-lg p-4 mb-4 hover:shadow-md transition-shadow",children:[(0,i.jsxs)("div",{className:"flex items-start mb-2",children:[(0,i.jsx)("div",{className:"mr-3",children:e.icon}),(0,i.jsxs)("div",{className:"flex-grow",children:[(0,i.jsx)("h3",{className:"font-bold text-gray-800",children:e.name}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]}),(0,i.jsxs)("div",{className:"ml-2 text-right",children:[(0,i.jsxs)("div",{className:"text-sm mb-1",children:["Ryzyko: ",m(e.riskLevel)]}),(0,i.jsxs)("div",{className:"text-sm",children:["Koszt: ",(0,i.jsxs)("span",{className:"font-medium",children:[e.cost.toLocaleString()," PLN"]})]})]})]}),(0,i.jsxs)("div",{className:"mt-2 space-y-2 text-sm",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Efekt:"})," ",e.effects]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Wymagania:"})," ",e.requirements]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Wp\u0142yw na reputacj\u0119:"})," ",(0,i.jsx)("span",{className:"text-red-600",children:e.reputation})]})]}),(0,i.jsx)("div",{className:"mt-3",children:(0,i.jsx)(Ne,{onClick:()=>(e=>{if(p(e))if(a.cash<e.cost)o(`Nie masz wystarczaj\u0105cych \u015brodk\xf3w (potrzeba ${e.cost.toLocaleString()} PLN)`,"error");else switch(e.id){case"create_illegal_database":s({type:"USE_ILLEGAL_ACTION",payload:{actionType:e.id,target:"company",bribeCost:e.cost,corruptionChange:5,updateCorruption:!0,riskIncrease:10,turn:r.turn}}),s({type:"UPDATE_ILLEGAL_DATABASE",payload:{hasIllegalDatabase:!0}}),s({type:"UPDATE_REPUTATION",payload:{change:e.reputation,reason:"Stworzenie nielegalnej bazy danych",turn:r.turn}}),c({type:"ADD_EVENT",payload:{id:Date.now(),type:"illegal_activity",title:"Stworzenie nielegalnej bazy danych",description:"Stworzy\u0142e\u015b nielegaln\u0105 baz\u0119 danych, kt\xf3ra umo\u017cliwi Ci bardziej skuteczne planowanie nielegalnych dzia\u0142a\u0144.",severity:"warning",turn:r.turn,expires:r.turn+10}}),o("Stworzy\u0142e\u015b nielegaln\u0105 baz\u0119 danych!","success");break;case"build_corruption_network":s({type:"USE_ILLEGAL_ACTION",payload:{actionType:e.id,target:"company",bribeCost:e.cost,corruptionChange:10,updateCorruption:!0,riskIncrease:15,turn:r.turn}}),s({type:"UPDATE_REPUTATION",payload:{change:e.reputation,reason:"Rozbudowa sieci korupcyjnej",turn:r.turn}}),c({type:"ADD_EVENT",payload:{id:Date.now(),type:"illegal_activity",title:"Rozbudowa sieci korupcyjnej",description:"Rozwin\u0105\u0142e\u015b swoj\u0105 sie\u0107 kontakt\xf3w korupcyjnych, co u\u0142atwi Ci przysz\u0142e nielegalne dzia\u0142ania.",severity:"warning",turn:r.turn,expires:r.turn+15}}),o("Rozbudowa\u0142e\u015b swoj\u0105 sie\u0107 korupcyjn\u0105!","success");break;default:u(e)}else o("Nie mo\u017cesz wykona\u0107 tej akcji - nie spe\u0142niasz wymaga\u0144!","error")})(e),disabled:!t,variant:t?"warning":"disabled",className:"w-full",icon:(0,i.jsx)(fe,{className:"h-4 w-4"}),children:t?"Wykonaj akcj\u0119":"Niedost\u0119pne"})})]})};return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex items-center mb-4",children:[(0,i.jsx)(fe,{className:"h-6 w-6 text-red-600 mr-2"}),(0,i.jsx)("h2",{className:"text-xl font-bold",children:"Szara strefa"})]}),(0,i.jsx)("div",{className:"bg-red-100 border border-red-300 rounded-lg p-3 mb-4",children:(0,i.jsxs)("p",{className:"text-red-800 text-sm",children:[(0,i.jsx)("strong",{children:"UWAGA:"})," Dzia\u0142ania w szarej strefie s\u0105 nielegalne i wi\u0105\u017c\u0105 si\u0119 z ryzykiem. Wykrycie mo\u017ce skutkowa\u0107 karami finansowymi, utrat\u0105 reputacji, a nawet zako\u0144czeniem gry."]})}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("h3",{className:"font-bold mb-2",children:"Tw\xf3j status:"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,i.jsxs)("div",{className:"bg-white rounded p-2 shadow-sm",children:[(0,i.jsx)("div",{className:"text-gray-600 text-sm",children:"Sie\u0107 korupcyjna:"}),(0,i.jsxs)("div",{className:"font-medium",children:[a.illegals.corruptionNetwork,"/100"]})]}),(0,i.jsxs)("div",{className:"bg-white rounded p-2 shadow-sm",children:[(0,i.jsx)("div",{className:"text-gray-600 text-sm",children:"Ryzyko audytu:"}),(0,i.jsxs)("div",{className:"font-medium",children:[a.illegals.auditRisk,"%"]})]}),(0,i.jsxs)("div",{className:"bg-white rounded p-2 shadow-sm",children:[(0,i.jsx)("div",{className:"text-gray-600 text-sm",children:"Baza danych:"}),(0,i.jsx)("div",{className:"font-medium",children:a.illegals.hasIllegalDatabase?"Posiadasz":"Brak"})]}),(0,i.jsxs)("div",{className:"bg-white rounded p-2 shadow-sm",children:[(0,i.jsx)("div",{className:"text-gray-600 text-sm",children:"\u0141ap\xf3wki wydane:"}),(0,i.jsxs)("div",{className:"font-medium",children:[a.illegals.totalBribes.toLocaleString()," PLN"]})]})]})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("h3",{className:"font-bold mb-2",children:"Dost\u0119pne akcje:"}),(0,i.jsx)("div",{className:"space-y-3",children:h.map((e=>f(e)))})]})]})},It=oe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Rt=oe("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),Dt=oe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Bt=oe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),Wt=e=>{var t,n,a,s,r;let{staffId:o,staffType:c,onClose:d,onFire:u,onTrain:h,onAssign:p}=e;const{state:y}=l(),{state:g}=F(),v=c.endsWith("s")?c:`${c}s`,x=null===(t=y.staff[v])||void 0===t?void 0:t.find((e=>e.id===o));if(!x)return(0,i.jsxs)("div",{className:"p-4",children:[(0,i.jsx)("div",{className:"bg-red-100 p-4 rounded",children:(0,i.jsx)("p",{className:"text-red-800",children:"Nie znaleziono pracownika."})}),(0,i.jsx)(Ne,{onClick:d,className:"mt-4",children:"Zamknij"})]});const w=e=>`${e.toLocaleString()} PLN / mies.`,_=y.projects.find((e=>e.id===x.assignedProject)),b=(null===(n=x.traits)||void 0===n?void 0:n.filter((e=>e.effect>0)))||[],j=(null===(a=x.traits)||void 0===a?void 0:a.filter((e=>e.effect<0)))||[],k=(null===(s=x.traits)||void 0===s?void 0:s.filter((e=>0===e.effect)))||[],z=e=>(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("span",{className:(e.effect>0?"text-green-600":e.effect<0?"text-red-600":"text-gray-600")+" font-medium mr-2",children:e.name}),(0,i.jsx)("span",{className:"text-sm text-gray-600",children:e.description})]},e.name);return(0,i.jsxs)("div",{className:"overflow-y-auto",children:[(0,i.jsxs)("div",{className:"flex items-center mb-6",children:[(0,i.jsx)("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center mr-4",children:(0,i.jsx)(It,{className:"h-6 w-6 text-blue-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-xl font-bold",children:x.name}),(0,i.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,i.jsx)(it,{className:"h-4 w-4 mr-1"}),(0,i.jsxs)("span",{children:[m(c)," (",f(x.level),")"]})]})]})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsxs)("h3",{className:"font-bold text-lg mb-2 flex items-center",children:[(0,i.jsx)(Rt,{className:"h-5 w-5 mr-2 text-purple-600"}),"Umiej\u0119tno\u015bci i rozw\xf3j"]}),(0,i.jsxs)("div",{className:"bg-white rounded shadow p-4",children:[(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,i.jsx)("span",{className:"text-gray-700",children:"Poziom umiej\u0119tno\u015bci:"}),(0,i.jsxs)("span",{className:"font-medium",children:[x.skill,"/10"]})]}),(0,i.jsx)(Pe,{value:10*x.skill,max:100,colorClass:"bg-purple-500"})]}),(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,i.jsx)("span",{className:"text-gray-700",children:"Do\u015bwiadczenie:"}),(0,i.jsxs)("span",{className:"font-medium",children:[x.experience," pkt"]})]}),(0,i.jsx)(Pe,{value:x.experience%100,max:100,colorClass:"bg-blue-500"}),(0,i.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:["Do awansu: ",100-x.experience%100," pkt"]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-3 mt-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-gray-700 mb-1",children:"Specjalizacja:"}),(0,i.jsx)("div",{className:"font-medium",children:x.specialization||"Brak"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-gray-700 mb-1",children:"Odbyte szkolenia:"}),(0,i.jsx)("div",{className:"font-medium",children:(null===(r=x.training)||void 0===r?void 0:r.length)||0})]})]})]}),(0,i.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,i.jsx)(Ne,{onClick:()=>h(o,c),variant:"primary",className:"flex-1",icon:(0,i.jsx)(ut,{className:"h-4 w-4"}),children:"Trenuj"}),(0,i.jsx)(Ne,{onClick:()=>p(o,c),variant:"secondary",className:"flex-1",icon:(0,i.jsx)(it,{className:"h-4 w-4"}),children:"Przydziel do projektu"})]})]}),x.traits&&x.traits.length>0&&(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("h3",{className:"font-bold text-lg mb-2",children:"Cechy charakteru"}),(0,i.jsxs)("div",{className:"bg-white rounded shadow p-4",children:[b.length>0&&(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsx)("h4",{className:"font-medium text-green-600 mb-1",children:"Pozytywne:"}),(0,i.jsx)("div",{className:"space-y-1",children:b.map(z)})]}),k.length>0&&(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsx)("h4",{className:"font-medium text-gray-600 mb-1",children:"Neutralne:"}),(0,i.jsx)("div",{className:"space-y-1",children:k.map(z)})]}),j.length>0&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"font-medium text-red-600 mb-1",children:"Negatywne:"}),(0,i.jsx)("div",{className:"space-y-1",children:j.map(z)})]})]})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsxs)("h3",{className:"font-bold text-lg mb-2 flex items-center",children:[(0,i.jsx)(Dt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Historia zatrudnienia"]}),(0,i.jsxs)("div",{className:"bg-white rounded shadow p-4",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-gray-700 mb-1",children:"Data zatrudnienia:"}),(0,i.jsx)("div",{className:"font-medium",children:(S=x.hiredOn,new Date(S).toLocaleDateString("pl-PL"))})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-gray-700 mb-1",children:"Czas zatrudnienia:"}),(0,i.jsx)("div",{className:"font-medium",children:(()=>{const e=new Date(x.hiredOn),t=new Date,n=Math.abs(t-e),i=Math.ceil(n/864e5);return`${i} dni (${Math.floor(i/30)} miesi\u0119cy)`})()})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-gray-700 mb-1",children:"Wynagrodzenie:"}),(0,i.jsx)("div",{className:"font-medium",children:w(x.salary)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-gray-700 mb-1",children:"Koszt zatrudnienia:"}),(0,i.jsx)("div",{className:"font-medium",children:w(x.hiringCost||0)})]})]}),_&&(0,i.jsxs)("div",{className:"mt-3 p-2 bg-blue-50 rounded",children:[(0,i.jsx)("div",{className:"text-blue-800 font-medium",children:"Przypisany do projektu:"}),(0,i.jsxs)("div",{children:[_.name," (",_.technology,")"]})]})]})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsxs)("h3",{className:"font-bold text-lg mb-2 flex items-center",children:[(0,i.jsx)(Bt,{className:"h-5 w-5 mr-2 text-red-600"}),"Status"]}),(0,i.jsx)("div",{className:"bg-white rounded shadow p-4",children:(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,i.jsx)("span",{children:"Morale:"}),(0,i.jsxs)("span",{className:(P=x.morale,P>=80?"text-green-600":P>=50?"text-blue-600":P>=30?"text-yellow-600":"text-red-600"),children:[x.morale,"%"]})]}),(0,i.jsx)(Pe,{value:x.morale,max:100,colorClass:x.morale>=50?"bg-green-500":"bg-red-500"})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,i.jsx)("span",{children:"Energia:"}),(0,i.jsxs)("span",{className:(N=x.energy,N>=80?"text-green-600":N>=50?"text-blue-600":N>=30?"text-yellow-600":"text-red-600"),children:[x.energy,"%"]})]}),(0,i.jsx)(Pe,{value:x.energy,max:100,colorClass:x.energy>=50?"bg-blue-500":"bg-orange-500"})]})]})})]}),(0,i.jsxs)("div",{className:"mt-6 flex justify-between",children:[(0,i.jsx)(Ne,{onClick:()=>u(o,c),variant:"danger",icon:(0,i.jsx)(Ct,{className:"h-4 w-4"}),children:"Zwolnij pracownika"}),(0,i.jsx)(Ne,{onClick:d,variant:"secondary",children:"Zamknij"})]})]});var N,P,S},Ft=oe("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),Zt=oe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Ut=t=>{let{onClose:n}=t;const{state:a,dispatch:s}=l(),{state:r,showNotification:o}=F(),[c,d]=(0,e.useState)(null),[u,h]=(0,e.useState)(1e6),[p,m]=(0,e.useState)(12),f=e=>!(e.requiresProjects>0&&a.projects.length<e.requiresProjects)&&(!(e.requiresReputation>0&&a.reputation<e.requiresReputation)&&(!(e.requiresRTB&&!a.projects.some((e=>"ready_to_build"===e.status)))&&!(e.requiresCorruption&&a.illegals.corruptionNetwork<e.requiresCorruption))),y=e=>{let t=e.baseInterestRate;e.reputationBonus&&a.reputation>80&&(t-=.01);const n=a.projects.filter((e=>"ready_to_build"===e.status)).length;return n>0&&(t-=.005*n),Math.max(.05,t)},g=(e,t,n)=>{const i=t/12;return e*i/(1-Math.pow(1+i,-n))},v=e=>e.toLocaleString()+" PLN",x=e=>(100*e).toFixed(2)+"%";return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex items-center mb-4",children:[(0,i.jsx)(xt,{className:"h-6 w-6 text-green-600 mr-2"}),(0,i.jsx)("h2",{className:"text-xl font-bold",children:"Panel finansowy"})]}),(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:[(0,i.jsx)("h3",{className:"font-bold mb-3",children:"Twoje finanse"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-gray-600 text-sm",children:"Got\xf3wka:"}),(0,i.jsx)("div",{className:"font-bold text-lg text-green-700",children:v(a.cash)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-gray-600 text-sm",children:"Warto\u015b\u0107 projekt\xf3w:"}),(0,i.jsx)("div",{className:"font-bold text-lg",children:v(a.economicMetrics.projectsValue||0)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-gray-600 text-sm",children:"Przychody:"}),(0,i.jsx)("div",{className:"font-bold text-green-700",children:v(a.economicMetrics.totalRevenue||0)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-gray-600 text-sm",children:"Wydatki:"}),(0,i.jsx)("div",{className:"font-bold text-red-700",children:v(a.economicMetrics.totalExpenses||0)})]})]})]}),a.loans&&a.loans.length>0&&(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:[(0,i.jsx)("h3",{className:"font-bold mb-3",children:"Aktywne kredyty"}),a.loans.map((e=>(0,i.jsxs)("div",{className:"border-b pb-3 mb-3 last:border-0 last:mb-0 last:pb-0",children:[(0,i.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,i.jsx)("span",{className:"font-medium",children:e.bankName}),(0,i.jsx)("span",{className:"text-blue-600",children:v(e.remainingAmount)})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Rata miesi\u0119czna:"}),(0,i.jsx)("span",{className:"ml-1",children:v(e.monthlyPayment)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Oprocentowanie:"}),(0,i.jsx)("span",{className:"ml-1",children:x(e.interestRate)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Pozosta\u0142o rat:"}),(0,i.jsx)("span",{className:"ml-1",children:e.remainingTerm})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Nast\u0119pna p\u0142atno\u015b\u0107:"}),(0,i.jsxs)("span",{className:"ml-1",children:["Tura ",e.nextPaymentTurn]})]})]}),(0,i.jsxs)("div",{className:"mt-2",children:[(0,i.jsxs)("div",{className:"flex justify-between text-xs mb-1",children:[(0,i.jsx)("span",{children:"Sp\u0142acono"}),(0,i.jsxs)("span",{children:[Math.round(100*(1-e.remainingAmount/e.amount)),"%"]})]}),(0,i.jsx)(Pe,{value:e.amount-e.remainingAmount,max:e.amount,colorClass:"bg-green-500"})]})]},e.id)))]}),(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:[(0,i.jsx)("h3",{className:"font-bold mb-3",children:"Zaci\u0105gnij kredyt"}),c?(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[(0,i.jsxs)("div",{className:"flex items-center mb-2",children:[(0,i.jsx)(Ft,{className:"h-5 w-5 text-blue-600 mr-2"}),(0,i.jsx)("h4",{className:"font-bold text-blue-800",children:c.name})]}),(0,i.jsx)("p",{className:"text-sm text-gray-700",children:c.description})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"block text-gray-700 mb-1",children:"Kwota kredytu"}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("input",{type:"range",min:1e5,max:c.maxLoan,step:1e5,value:u,onChange:e=>h(parseInt(e.target.value)),className:"flex-grow mr-3"}),(0,i.jsx)("span",{className:"font-medium w-32 text-right",children:v(u)})]})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"block text-gray-700 mb-1",children:"Okres sp\u0142aty (miesi\u0105ce)"}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("input",{type:"range",min:3,max:36,step:3,value:p,onChange:e=>m(parseInt(e.target.value)),className:"flex-grow mr-3"}),(0,i.jsxs)("span",{className:"font-medium w-32 text-right",children:[p," mies."]})]})]}),(0,i.jsxs)("div",{className:"bg-gray-50 p-3 rounded mb-4",children:[(0,i.jsx)("h4",{className:"font-medium mb-2",children:"Podsumowanie kredytu"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,i.jsxs)("div",{className:"text-sm",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Kwota kredytu:"}),(0,i.jsx)("span",{className:"ml-1 font-medium",children:v(u)})]}),(0,i.jsxs)("div",{className:"text-sm",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Okres sp\u0142aty:"}),(0,i.jsxs)("span",{className:"ml-1 font-medium",children:[p," miesi\u0119cy"]})]}),(0,i.jsxs)("div",{className:"text-sm",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Oprocentowanie:"}),(0,i.jsx)("span",{className:"ml-1 font-medium",children:x(y(c))})]}),(0,i.jsxs)("div",{className:"text-sm",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Rata miesi\u0119czna:"}),(0,i.jsx)("span",{className:"ml-1 font-medium",children:v(g(u,y(c),p))})]}),(0,i.jsxs)("div",{className:"text-sm col-span-2",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Ca\u0142kowity koszt kredytu:"}),(0,i.jsx)("span",{className:"ml-1 font-medium text-red-600",children:v(g(u,y(c),p)*p-u)})]})]})]}),(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsx)(Ne,{onClick:()=>{if(!c)return void o("Wybierz bank, aby zaci\u0105gn\u0105\u0107 kredyt","error");if(!f(c))return void o("Nie spe\u0142niasz wymaga\u0144 tego banku","error");if(u>c.maxLoan)return void o(`Maksymalna kwota kredytu to ${c.maxLoan.toLocaleString()} PLN`,"error");if(a.loans&&a.loans.length>0)return void o("Mo\u017cesz mie\u0107 tylko jeden aktywny kredyt","error");const e=y(c),t=g(u,e,p),n=t*p,i=n-u;s({type:"ADD_LOAN",payload:{id:Date.now(),bankId:c.id,bankName:c.name,amount:u,remainingAmount:u,interestRate:e,term:p,remainingTerm:p,monthlyPayment:t,totalInterest:i,totalPayment:n,takenOnTurn:r.turn,nextPaymentTurn:r.turn+1}}),s({type:"UPDATE_CASH",payload:u}),s({type:"UPDATE_ECONOMIC_METRICS",payload:{totalLoansTaken:(a.economicMetrics.totalLoansTaken||0)+u}}),c.reputationPenalty&&s({type:"UPDATE_REPUTATION",payload:{change:-c.reputationPenalty,reason:`Zaci\u0105gni\u0119cie kredytu w ${c.name}`,turn:r.turn}}),o(`Zaci\u0105gni\u0119to kredyt na kwot\u0119 ${u.toLocaleString()} PLN`,"success"),d(null)},variant:"success",className:"flex-1",icon:(0,i.jsx)(Zt,{className:"h-4 w-4"}),children:"Zaci\u0105gnij kredyt"}),(0,i.jsx)(Ne,{onClick:()=>d(null),variant:"secondary",className:"flex-1",children:"Anuluj"})]})]}):(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-gray-700 mb-4",children:"Wybierz bank, aby zaci\u0105gn\u0105\u0107 kredyt:"}),(0,i.jsx)("div",{className:"space-y-3",children:[{id:"eco_bank",name:"EcoBank",description:"Bank specjalizuj\u0105cy si\u0119 w finansowaniu projekt\xf3w OZE",maxLoan:5e6,baseInterestRate:.08,reputationBonus:!0,requirementsDescription:"Wymaga min. 3 projekt\xf3w i reputacji > 70",requiresProjects:3,requiresReputation:70},{id:"investment_bank",name:"InvestBank",description:"Du\u017cy bank komercyjny z programem dla projekt\xf3w energetycznych",maxLoan:1e7,baseInterestRate:.095,reputationBonus:!0,requirementsDescription:"Wymaga min. 5 projekt\xf3w i reputacji > 50, lub projektu RTB",requiresProjects:5,requiresReputation:50,requiresRTB:!0},{id:"small_bank",name:"LocalBank",description:"Mniejszy bank lokalny, mniej wymagaj\u0105cy, ale dro\u017csza oferta",maxLoan:2e6,baseInterestRate:.12,reputationBonus:!1,requirementsDescription:"Brak szczeg\xf3lnych wymaga\u0144",requiresProjects:0,requiresReputation:0},{id:"shadow_bank",name:"ShadowFinance",description:"Nieoficjalne \u017ar\xf3d\u0142o finansowania, wysokie odsetki, brak formalno\u015bci",maxLoan:15e5,baseInterestRate:.25,reputationBonus:!1,reputationPenalty:5,requirementsDescription:"Wymaga poziomu sieci korupcyjnej > 20",requiresCorruption:20}].map((e=>{const t=f(e),n=y(e);return(0,i.jsx)("div",{className:"border rounded-lg p-4 mb-4 hover:shadow-md transition-shadow "+((null===c||void 0===c?void 0:c.id)===e.id?"border-blue-500 bg-blue-50":""),onClick:()=>t&&d(e),children:(0,i.jsxs)("div",{className:"flex items-start",children:[(0,i.jsx)("div",{className:"mr-3",children:(0,i.jsx)(Ft,{className:"h-6 w-6 "+(t?"text-blue-600":"text-gray-400")})}),(0,i.jsxs)("div",{className:"flex-grow",children:[(0,i.jsx)("h3",{className:"font-bold "+(t?"text-gray-800":"text-gray-500"),children:e.name}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:e.description}),(0,i.jsxs)("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Max kredyt:"}),(0,i.jsx)("span",{className:"ml-1 font-medium",children:v(e.maxLoan)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Oprocentowanie:"}),(0,i.jsx)("span",{className:"ml-1 font-medium "+(n>.15?"text-red-600":"text-blue-600"),children:x(n)})]})]}),(0,i.jsxs)("div",{className:"mt-1 text-sm",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Wymagania:"}),(0,i.jsx)("span",{className:"ml-1 "+(t?"text-green-600":"text-red-600"),children:t?"Spe\u0142nione":e.requirementsDescription})]})]})]})},e.id)}))})]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,i.jsxs)("h3",{className:"font-bold mb-3 flex items-center",children:[(0,i.jsx)(ye,{className:"h-5 w-5 mr-2 text-purple-600"}),"Statystyki finansowe"]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex justify-between p-2 bg-gray-50 rounded",children:[(0,i.jsx)("span",{className:"text-gray-700",children:"\u0141\u0105czne inwestycje:"}),(0,i.jsx)("span",{className:"font-medium",children:v(a.economicMetrics.totalInvestment||0)})]}),(0,i.jsxs)("div",{className:"flex justify-between p-2 bg-gray-50 rounded",children:[(0,i.jsx)("span",{className:"text-gray-700",children:"\u0141\u0105czne kredyty:"}),(0,i.jsx)("span",{className:"font-medium",children:v(a.economicMetrics.totalLoansTaken||0)})]}),(0,i.jsxs)("div",{className:"flex justify-between p-2 bg-gray-50 rounded",children:[(0,i.jsx)("span",{className:"text-gray-700",children:"\u015aredni ROI:"}),(0,i.jsxs)("span",{className:"font-medium "+((a.economicMetrics.avgROI||0)>0?"text-green-600":"text-red-600"),children:[(100*(a.economicMetrics.avgROI||0)).toFixed(1),"%"]})]}),(0,i.jsxs)("div",{className:"flex justify-between p-2 bg-gray-50 rounded",children:[(0,i.jsx)("span",{className:"text-gray-700",children:"Bilans:"}),(0,i.jsx)("span",{className:"font-medium "+((a.economicMetrics.totalRevenue||0)>(a.economicMetrics.totalExpenses||0)?"text-green-600":"text-red-600"),children:v((a.economicMetrics.totalRevenue||0)-(a.economicMetrics.totalExpenses||0))})]})]})]})]})},$t=()=>{const[t,n]=(0,e.useState)("overview"),{state:a,dispatch:s}=l(),{state:r,showNotification:o}=F(),{hireStaff:c,fireStaff:d,trainStaff:u}=nt(),[h,p]=(0,e.useState)({isOpen:!1,type:null,data:null}),m=function(e){p({isOpen:!0,type:e,data:arguments.length>1&&void 0!==arguments[1]?arguments[1]:null})},f=()=>{p({...h,isOpen:!1})};return(0,i.jsxs)("div",{className:"container mx-auto p-4",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Zarz\u0105dzanie firm\u0105"}),(0,i.jsxs)("div",{className:"flex mb-6 space-x-2 border-b pb-3",children:[(0,i.jsx)("button",{className:"px-4 py-2 rounded-t-lg "+("overview"===t?"bg-blue-600 text-white":"bg-gray-100 hover:bg-gray-200"),onClick:()=>n("overview"),children:"Przegl\u0105d firmy"}),(0,i.jsx)("button",{className:"px-4 py-2 rounded-t-lg "+("projects"===t?"bg-blue-600 text-white":"bg-gray-100 hover:bg-gray-200"),onClick:()=>n("projects"),children:"Projekty"}),(0,i.jsx)("button",{className:"px-4 py-2 rounded-t-lg "+("staff"===t?"bg-blue-600 text-white":"bg-gray-100 hover:bg-gray-200"),onClick:()=>n("staff"),children:"Zarz\u0105dzanie personelem"}),(0,i.jsx)("button",{className:"px-4 py-2 rounded-t-lg "+("finances"===t?"bg-blue-600 text-white":"bg-gray-100 hover:bg-gray-200"),onClick:()=>n("finances"),children:"Finanse"}),(0,i.jsx)("button",{className:"ml-auto px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700",onClick:()=>m("illegal_actions"),children:"Szara strefa"})]}),(0,i.jsxs)("div",{children:["overview"===t&&(0,i.jsx)(yt,{}),"projects"===t&&(0,i.jsx)(Nt,{}),"staff"===t&&(0,i.jsx)(ct,{openStaffDetails:(e,t)=>m("staff_details",{id:e,type:t})}),"finances"===t&&(0,i.jsx)(pt,{openFinancePanel:()=>m("finance")})]}),(()=>{var e,t;switch(h.type){case"illegal_actions":return(0,i.jsx)(St,{title:"Szara strefa",isOpen:h.isOpen,onClose:f,variant:"illegal",children:(0,i.jsx)(At,{onClose:f})});case"staff_details":return(0,i.jsx)(St,{title:"Szczeg\xf3\u0142y pracownika",isOpen:h.isOpen,onClose:f,variant:"staff",children:(0,i.jsx)(Wt,{staffId:null===(e=h.data)||void 0===e?void 0:e.id,staffType:null===(t=h.data)||void 0===t?void 0:t.type,onClose:f,onFire:(e,t)=>{d(t,e),f()},onTrain:(e,t)=>{f()},onAssign:(e,t)=>{f()}})});case"finance":return(0,i.jsx)(St,{title:"Panel finansowy",isOpen:h.isOpen,onClose:f,variant:"finance",children:(0,i.jsx)(Ut,{onClose:f})});default:return null}})()]})},Vt=oe("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Ht=oe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),qt=oe("LineChart",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]),Gt=oe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Kt=oe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Jt=oe("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2h0V5z",key:"uf6l00"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h0",key:"k2aug8"}]]),Yt=()=>{var t,n,a;const{state:s}=H(),{state:r}=F(),{state:o}=l(),[c,d]=(0,e.useState)(null),[u,h]=(0,e.useState)("wszystkie"),[p,m]=(0,e.useState)("all"),[f,y]=(0,e.useState)("all"),[g,v]=(0,e.useState)(!1),x=(0,e.useRef)(null),w=Array.isArray(null===s||void 0===s?void 0:s.events)?s.events:[],_=e.useMemo((()=>w.filter((e=>!e.expires||e.expires>r.turn))),[w,r.turn]),b=e.useMemo((()=>({economic:_.filter((e=>"economic_event"===e.type)),personal:_.filter((e=>"staff_event"===e.type)),audits:_.filter((e=>"audit_event"===e.type)),illegal:_.filter((e=>"illegal_event"===e.type)),projects:_.filter((e=>"project_event"===e.type)),global:_.filter((e=>"global"===e.scope)),local:_.filter((e=>"local"===e.scope))})),[_]),j=()=>{switch(u){case"ekonomiczne":return b.economic;case"personalne":return b.personal;case"audyty":return b.audits;case"nielegalne":return b.illegal;case"projekty":return b.projects;case"globalne":return b.global;case"lokalne":return b.local;default:return _}},k=e.useMemo((()=>{let e=j();return"all"!==p&&(e=e.filter((e=>e.type===p))),"all"!==f&&(e=e.filter((e=>e.severity===f))),[...e].sort(((e,t)=>t.turn-e.turn))}),[_,p,f,u,j]),z=e.useMemo((()=>[...w].sort(((e,t)=>t.turn-e.turn))),[w]),N=e.useMemo((()=>{let e={economy:0,reputation:0,permits:0,buildCost:0,riskLevel:0};return _.forEach((t=>{t.effects&&(t.effects.marketModifier&&(e.economy+=100*(t.effects.marketModifier-1)),t.effects.reputationChange&&(e.reputation+=t.effects.reputationChange),t.effects.permitTimeModifier&&(e.permits+=100*(t.effects.permitTimeModifier-1)),t.effects.buildCostModifier&&(e.buildCost+=100*(t.effects.buildCostModifier-1)),t.effects.riskLevel&&(e.riskLevel+=t.effects.riskLevel))})),e}),[_]),P=e=>{switch(e.type){case"staff_event":return(0,i.jsx)(de,{className:"w-5 h-5 text-indigo-500"});case"project_event":return(0,i.jsx)(it,{className:"w-5 h-5 text-teal-500"});case"economic_event":return(0,i.jsx)(ut,{className:"w-5 h-5 text-emerald-500"});case"audit_event":return(0,i.jsx)(Vt,{className:"w-5 h-5 text-amber-500"});case"illegal_event":return(0,i.jsx)(Ht,{className:"w-5 h-5 text-rose-500"});case"law_change":return(0,i.jsx)(Ft,{className:"w-5 h-5 text-blue-500"});case"market_change":return(0,i.jsx)(qt,{className:"w-5 h-5 text-purple-500"});default:return(0,i.jsx)(Ee,{className:"w-5 h-5 text-gray-500"})}},S=e=>{switch(e){case"positive":return(0,i.jsx)(Gt,{className:"w-4 h-4 text-green-600"});case"negative":return(0,i.jsx)(Pt,{className:"w-4 h-4 text-red-600"});case"warning":return(0,i.jsx)(fe,{className:"w-4 h-4 text-yellow-600"});default:return(0,i.jsx)(Ee,{className:"w-4 h-4 text-blue-600"})}};(0,e.useEffect)((()=>{if(g&&x.current){const e=document.getElementById(`turn-${r.turn}`);e&&(x.current.scrollLeft=e.offsetLeft-100)}}),[g,r.turn]),(0,e.useEffect)((()=>{_.length>0&&!c&&d(_[0])}),[_,c]);const E=e=>{const t=new Date(2023,0,1),n=new Date(t);return n.setDate(n.getDate()+e),n.toLocaleDateString("pl-PL",{year:"numeric",month:"long",day:"numeric"})};return(0,i.jsxs)("div",{className:"h-full flex flex-col bg-gray-50 overflow-hidden",children:[(0,i.jsxs)("div",{className:"bg-white border-b border-gray-200 p-4",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,i.jsxs)("h2",{className:"text-2xl font-bold flex items-center",children:[(0,i.jsx)(ft,{className:"mr-2 text-blue-600"}),"Dziennik Wydarze\u0144"]}),(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsxs)("button",{className:"flex items-center px-3 py-1.5 rounded-md border "+(g?"bg-blue-50 border-blue-300 text-blue-700":"border-gray-300"),onClick:()=>v(!g),children:[(0,i.jsx)(Dt,{className:"w-4 h-4 mr-1"}),"Chronologia"]}),(0,i.jsxs)("div",{className:"flex border border-gray-300 rounded-md overflow-hidden",children:[(0,i.jsx)("button",{className:"px-3 py-1.5 "+("wszystkie"===u?"bg-blue-50 text-blue-700":"bg-white"),onClick:()=>h("wszystkie"),children:"Wszystkie"}),(0,i.jsx)("button",{className:"px-3 py-1.5 "+("ekonomiczne"===u?"bg-emerald-50 text-emerald-700":"bg-white"),onClick:()=>h("ekonomiczne"),children:"Ekonomiczne"}),(0,i.jsx)("button",{className:"px-3 py-1.5 "+("personalne"===u?"bg-indigo-50 text-indigo-700":"bg-white"),onClick:()=>h("personalne"),children:"Personalne"}),(0,i.jsx)("button",{className:"px-3 py-1.5 "+("projekty"===u?"bg-teal-50 text-teal-700":"bg-white"),onClick:()=>h("projekty"),children:"Projekty"}),(0,i.jsx)("button",{className:"px-3 py-1.5 "+("globalne"===u?"bg-violet-50 text-violet-700":"bg-white"),onClick:()=>h("globalne"),children:"Globalne"})]})]})]}),g&&(0,i.jsx)("div",{ref:x,className:"pb-3 overflow-x-auto whitespace-nowrap scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200",children:(0,i.jsx)("div",{className:"inline-block min-w-full",children:(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("div",{className:"absolute h-0.5 bg-gray-300 top-4 left-0 right-0 z-0"}),(0,i.jsx)("div",{className:"flex",children:Array.from({length:Math.max(r.turn+10,30)},((e,t)=>t)).map((e=>{const t=w.some((t=>t.turn===e));return(0,i.jsxs)("div",{id:`turn-${e}`,className:"inline-flex flex-col items-center mx-6 relative "+(e===r.turn?"scale-110":""),children:[(0,i.jsx)("div",{className:`w-8 h-8 rounded-full z-10 flex items-center justify-center\n                            ${e===r.turn?"bg-blue-600 text-white border-2 border-white shadow-lg":t?"bg-indigo-100 border border-indigo-300 cursor-pointer hover:bg-indigo-200":"bg-gray-200 border border-gray-300"}\n                          `,onClick:()=>t&&m(`turn_${e}`),children:t?w.filter((t=>t.turn===e)).length:"-"}),(0,i.jsx)("div",{className:"text-xs mt-1 "+(e===r.turn?"font-bold":""),children:e>0?`Dzie\u0144 ${e}`:"Start"})]},e)}))})]})})})]}),(0,i.jsxs)("div",{className:"flex-1 overflow-hidden grid grid-cols-3 gap-6 p-6",children:[(0,i.jsxs)("div",{className:"col-span-1 flex flex-col",children:[(0,i.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold",children:"wszystkie"===u?"Aktywne wydarzenia":`Wydarzenia ${u}`}),(0,i.jsxs)("div",{className:"text-sm text-gray-500",children:["\u0141\u0105cznie: ",k.length]})]}),(0,i.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-y-auto flex-1",children:k.length>0?(0,i.jsx)("div",{className:"divide-y divide-gray-100",children:k.map((e=>{return(0,i.jsx)("div",{className:`p-3 cursor-pointer transition-colors hover:bg-gray-50 \n                      ${c&&c.id===e.id?"bg-blue-50 border-l-4 border-blue-500":""}\n                    `,onClick:()=>d(e),children:(0,i.jsxs)("div",{className:"flex items-start",children:[(0,i.jsx)("div",{className:"mr-3 mt-1",children:P(e)}),(0,i.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between",children:[(0,i.jsx)("div",{className:"truncate font-medium pr-2",children:e.title}),(0,i.jsxs)("div",{className:"text-xs text-gray-500 whitespace-nowrap",children:["Dzie\u0144 ",e.turn]})]}),(0,i.jsxs)("div",{className:"mt-1 flex items-center",children:[(0,i.jsxs)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs "+("positive"===e.severity?"bg-green-100 text-green-800":"negative"===e.severity?"bg-red-100 text-red-800":"warning"===e.severity?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"),children:[S(e.severity),(0,i.jsx)("span",{className:"ml-1",children:(t=e.type,{economic_event:"Ekonomiczne",staff_event:"Personalne",project_event:"Projektowe",audit_event:"Audyt",illegal_event:"Nielegalne",law_change:"Zmiana prawa",market_change:"Zmiana rynkowa"}[t]||t)})]}),e.region&&(0,i.jsxs)("span",{className:"ml-2 text-xs text-gray-500 flex items-center",children:[(0,i.jsx)(pe,{className:"w-3 h-3 mr-0.5"}),e.region]})]})]})]})},e.id||`event-${Math.random()}`);var t}))}):(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500",children:[(0,i.jsx)(Ee,{className:"w-12 h-12 text-gray-300 mb-2"}),(0,i.jsx)("p",{children:"Brak wydarze\u0144 spe\u0142niaj\u0105cych kryteria"})]})})]}),(0,i.jsxs)("div",{className:"col-span-1 flex flex-col",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Szczeg\xf3\u0142y wydarzenia"}),c?(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-5 flex-1",children:[(0,i.jsx)("div",{className:`rounded-lg p-3 mb-4 border ${(e=>{switch(e){case"positive":return"text-green-600 bg-green-50 border-green-200";case"negative":return"text-red-600 bg-red-50 border-red-200";case"warning":return"text-yellow-600 bg-yellow-50 border-yellow-200";default:return"text-blue-600 bg-blue-50 border-blue-200"}})(c.severity)}`,children:(0,i.jsxs)("div",{className:"flex items-center",children:[P(c),(0,i.jsx)("h3",{className:"text-lg font-semibold ml-2",children:c.title})]})}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("div",{children:(0,i.jsx)("p",{className:"whitespace-pre-line text-gray-700",children:c.description})}),(0,i.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500 border-t border-b py-3 border-gray-100",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(Dt,{className:"w-4 h-4 mr-1"}),(0,i.jsxs)("span",{children:["Dzie\u0144 ",c.turn]})]}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(le,{className:"w-4 h-4 mr-1"}),(0,i.jsx)("span",{children:E(c.turn)})]}),c.region&&(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(pe,{className:"w-4 h-4 mr-1"}),(0,i.jsx)("span",{children:c.region})]})]}),c.effects&&Object.keys(c.effects).length>0&&(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Wp\u0142yw na rozgrywk\u0119:"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[c.effects.marketModifier&&(0,i.jsxs)("div",{className:"bg-gray-50 p-2 rounded",children:[(0,i.jsx)("div",{className:"text-sm text-gray-500",children:"Ceny rynkowe"}),(0,i.jsxs)("div",{className:"flex items-center",children:[c.effects.marketModifier>1?(0,i.jsx)(ut,{className:"w-4 h-4 text-green-500 mr-1"}):(0,i.jsx)(ht,{className:"w-4 h-4 text-red-500 mr-1"}),(0,i.jsxs)("span",{className:c.effects.marketModifier>1?"text-green-600":"text-red-600",children:[(100*(c.effects.marketModifier-1)).toFixed(0),"%"]})]})]}),c.effects.reputationChange&&(0,i.jsxs)("div",{className:"bg-gray-50 p-2 rounded",children:[(0,i.jsx)("div",{className:"text-sm text-gray-500",children:"Reputacja"}),(0,i.jsxs)("div",{className:"flex items-center",children:[c.effects.reputationChange>0?(0,i.jsx)(ut,{className:"w-4 h-4 text-green-500 mr-1"}):(0,i.jsx)(ht,{className:"w-4 h-4 text-red-500 mr-1"}),(0,i.jsxs)("span",{className:c.effects.reputationChange>0?"text-green-600":"text-red-600",children:[c.effects.reputationChange>0?"+":"",c.effects.reputationChange]})]})]}),c.effects.permitTimeModifier&&(0,i.jsxs)("div",{className:"bg-gray-50 p-2 rounded",children:[(0,i.jsx)("div",{className:"text-sm text-gray-500",children:"Czas uzyskania pozwole\u0144"}),(0,i.jsxs)("div",{className:"flex items-center",children:[c.effects.permitTimeModifier<1?(0,i.jsx)(ut,{className:"w-4 h-4 text-green-500 mr-1"}):(0,i.jsx)(ht,{className:"w-4 h-4 text-red-500 mr-1"}),(0,i.jsxs)("span",{className:c.effects.permitTimeModifier<1?"text-green-600":"text-red-600",children:[(100*(c.effects.permitTimeModifier-1)).toFixed(0),"%"]})]})]}),c.effects.buildCostModifier&&(0,i.jsxs)("div",{className:"bg-gray-50 p-2 rounded",children:[(0,i.jsx)("div",{className:"text-sm text-gray-500",children:"Koszt budowy"}),(0,i.jsxs)("div",{className:"flex items-center",children:[c.effects.buildCostModifier<1?(0,i.jsx)(ut,{className:"w-4 h-4 text-green-500 mr-1"}):(0,i.jsx)(ht,{className:"w-4 h-4 text-red-500 mr-1"}),(0,i.jsxs)("span",{className:c.effects.buildCostModifier<1?"text-green-600":"text-red-600",children:[(100*(c.effects.buildCostModifier-1)).toFixed(0),"%"]})]})]})]})]}),c.staffId&&(null===o||void 0===o?void 0:o.staff)&&(0,i.jsxs)("div",{className:"mt-4 bg-indigo-50 p-3 rounded",children:[(0,i.jsxs)("h4",{className:"font-medium text-indigo-700 flex items-center",children:[(0,i.jsx)(de,{className:"w-4 h-4 mr-1"}),"Dotyczy pracownika:"]}),(0,i.jsx)("div",{className:"mt-1",children:(null===(t=o.staff.find((e=>e.id===c.staffId)))||void 0===t?void 0:t.name)||"Nieznany pracownik"})]}),c.projectId&&(null===o||void 0===o?void 0:o.projects)&&(0,i.jsxs)("div",{className:"mt-4 bg-teal-50 p-3 rounded",children:[(0,i.jsxs)("h4",{className:"font-medium text-teal-700 flex items-center",children:[(0,i.jsx)(it,{className:"w-4 h-4 mr-1"}),"Dotyczy projektu:"]}),(0,i.jsx)("div",{className:"mt-1",children:(null===(n=o.projects.find((e=>e.id===c.projectId)))||void 0===n?void 0:n.name)||"Nieznany projekt"})]})]})]}):(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 flex flex-col items-center justify-center h-full",children:[(0,i.jsx)("div",{className:"w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mb-4",children:(0,i.jsx)(Ee,{className:"w-8 h-8 text-gray-400"})}),(0,i.jsx)("p",{className:"text-center text-gray-500",children:"Wybierz wydarzenie z listy, aby zobaczy\u0107 szczeg\xf3\u0142y"})]})]}),(0,i.jsxs)("div",{className:"col-span-1 flex flex-col",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Wp\u0142yw wydarze\u0144 na gr\u0119"}),(0,i.jsxs)("div",{className:"space-y-4 flex-1",children:[(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[(0,i.jsxs)("h4",{className:"font-medium text-gray-700 mb-3 flex items-center",children:[(0,i.jsx)(Kt,{className:"w-5 h-5 mr-1 text-blue-500"}),"Twoja reputacja"]}),(0,i.jsxs)("div",{className:"space-y-1",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,i.jsx)("span",{children:"Aktualna reputacja:"}),(0,i.jsxs)("span",{className:"font-medium",children:[(null===o||void 0===o?void 0:o.reputation)||50,"/100"]})]}),(0,i.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,i.jsx)("div",{className:"h-2.5 rounded-full bg-blue-600",style:{width:`${(null===o||void 0===o?void 0:o.reputation)||50}%`}})}),(0,i.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,i.jsx)("span",{children:"S\u0142aba"}),(0,i.jsx)("span",{children:"Dobra"})]}),0!==N.reputation&&(0,i.jsxs)("div",{className:"flex items-center mt-1 text-sm",children:[(0,i.jsx)("span",{className:"mr-1",children:"Wp\u0142yw aktywnych wydarze\u0144:"}),(0,i.jsxs)("span",{className:N.reputation>0?"text-green-600":"text-red-600",children:[N.reputation>0?"+":"",N.reputation," pkt"]})]})]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[(0,i.jsxs)("h4",{className:"font-medium text-gray-700 mb-3 flex items-center",children:[(0,i.jsx)(ut,{className:"w-5 h-5 mr-1 text-emerald-500"}),"Ekonomia i rynek"]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(Jt,{className:"w-4 h-4 mr-1 text-yellow-500"}),(0,i.jsx)("span",{className:"text-sm",children:"Ceny rynkowe:"})]}),(0,i.jsxs)("div",{className:"flex items-center "+(N.economy>0?"text-green-600":N.economy<0?"text-red-600":"text-gray-500"),children:[N.economy>0?(0,i.jsx)(ut,{className:"w-4 h-4 mr-1"}):N.economy<0?(0,i.jsx)(ht,{className:"w-4 h-4 mr-1"}):(0,i.jsx)("div",{className:"w-4 h-4 mr-1"}),(0,i.jsxs)("span",{className:"font-medium",children:[N.economy>0?"+":"",N.economy.toFixed(1),"%"]})]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(wt,{className:"w-4 h-4 mr-1 text-orange-500"}),(0,i.jsx)("span",{className:"text-sm",children:"Koszt budowy:"})]}),(0,i.jsxs)("div",{className:"flex items-center "+(N.buildCost<0?"text-green-600":N.buildCost>0?"text-red-600":"text-gray-500"),children:[N.buildCost<0?(0,i.jsx)(ht,{className:"w-4 h-4 mr-1"}):N.buildCost>0?(0,i.jsx)(ut,{className:"w-4 h-4 mr-1"}):(0,i.jsx)("div",{className:"w-4 h-4 mr-1"}),(0,i.jsxs)("span",{className:"font-medium",children:[N.buildCost>0?"+":"",N.buildCost.toFixed(1),"%"]})]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(Dt,{className:"w-4 h-4 mr-1 text-purple-500"}),(0,i.jsx)("span",{className:"text-sm",children:"Czas uzyskania pozwole\u0144:"})]}),(0,i.jsxs)("div",{className:"flex items-center "+(N.permits<0?"text-green-600":N.permits>0?"text-red-600":"text-gray-500"),children:[N.permits<0?(0,i.jsx)(ht,{className:"w-4 h-4 mr-1"}):N.permits>0?(0,i.jsx)(ut,{className:"w-4 h-4 mr-1"}):(0,i.jsx)("div",{className:"w-4 h-4 mr-1"}),(0,i.jsxs)("span",{className:"font-medium",children:[N.permits>0?"+":"",N.permits.toFixed(1),"%"]})]})]})]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[(0,i.jsxs)("h4",{className:"font-medium text-gray-700 mb-3 flex items-center",children:[(0,i.jsx)(ye,{className:"w-5 h-5 mr-1 text-purple-500"}),"Statystyki wydarze\u0144"]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,i.jsxs)("div",{className:"bg-blue-50 rounded p-3",children:[(0,i.jsx)("div",{className:"text-sm text-blue-700",children:"Aktywne"}),(0,i.jsx)("div",{className:"text-2xl font-bold",children:_.length})]}),(0,i.jsxs)("div",{className:"bg-emerald-50 rounded p-3",children:[(0,i.jsx)("div",{className:"text-sm text-emerald-700",children:"Ekonomiczne"}),(0,i.jsx)("div",{className:"text-2xl font-bold",children:b.economic.length})]}),(0,i.jsxs)("div",{className:"bg-indigo-50 rounded p-3",children:[(0,i.jsx)("div",{className:"text-sm text-indigo-700",children:"Personalne"}),(0,i.jsx)("div",{className:"text-2xl font-bold",children:b.personal.length})]}),(0,i.jsxs)("div",{className:"bg-amber-50 rounded p-3",children:[(0,i.jsx)("div",{className:"text-sm text-amber-700",children:"Audyty"}),(0,i.jsx)("div",{className:"text-2xl font-bold",children:b.audits.length})]}),(0,i.jsxs)("div",{className:"bg-rose-50 rounded p-3",children:[(0,i.jsx)("div",{className:"text-sm text-rose-700",children:"Nielegalne"}),(0,i.jsx)("div",{className:"text-2xl font-bold",children:b.illegal.length})]}),(0,i.jsxs)("div",{className:"bg-violet-50 rounded p-3",children:[(0,i.jsx)("div",{className:"text-sm text-violet-700",children:"Globalne/Lokalne"}),(0,i.jsxs)("div",{className:"text-2xl font-bold",children:[b.global.length,"/",b.local.length]})]})]})]})]})]})]}),(0,i.jsx)("div",{className:"bg-white border-t border-gray-200 p-3",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,i.jsx)(rt,{className:"w-4 h-4 mr-1"}),(0,i.jsxs)("span",{children:["Ostatnie zdarzenie: ",(null===(a=z[0])||void 0===a?void 0:a.title)||"Brak"]})]}),(0,i.jsxs)("div",{className:"text-sm",children:["Dzie\u0144: ",(0,i.jsx)("span",{className:"font-medium",children:r.turn})," | Data: ",(0,i.jsx)("span",{className:"font-medium",children:E(r.turn)})]})]})})]})},Qt=e=>{let{competitor:t,playerPower:n}=e;return(0,i.jsxs)("div",{className:"border rounded p-3",children:[(0,i.jsx)("h4",{className:"font-medium mb-2",children:t.name}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"text-sm",children:[(0,i.jsx)("span",{className:"font-medium",children:"Strategia:"})," ",y(t.strategy)]}),(0,i.jsxs)("div",{className:"text-sm",children:[(0,i.jsx)("span",{className:"font-medium",children:"Reputacja:"})," ",t.reputation,"/100"]}),(0,i.jsxs)("div",{className:"text-sm",children:[(0,i.jsx)("span",{className:"font-medium",children:"Tempo wzrostu:"})," ",(100*(t.growth-1)).toFixed(1),"% na tur\u0119"]}),(0,i.jsx)("div",{className:"text-sm",children:(0,i.jsx)("span",{className:"font-medium",children:"Silne regiony:"})}),(0,i.jsx)("div",{className:"flex flex-wrap gap-1",children:t.strongRegions.map((e=>(0,i.jsx)("div",{className:"text-xs bg-gray-200 px-2 py-1 rounded",children:e},e)))}),(0,i.jsx)("div",{className:"text-sm mt-2 text-gray-600 italic",children:g(t,n)})]})]})},Xt=e=>{let{ranking:t}=e;return(0,i.jsxs)("div",{className:"bg-white p-4 rounded shadow mb-4",children:[(0,i.jsx)("h3",{className:"font-bold text-lg mb-3",children:"Ranking deweloper\xf3w OZE"}),(0,i.jsxs)("table",{className:"min-w-full",children:[(0,i.jsx)("thead",{className:"bg-gray-100",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"text-center p-2",children:"Miejsce"}),(0,i.jsx)("th",{className:"text-left p-2",children:"Firma"}),(0,i.jsx)("th",{className:"text-center p-2",children:"Moc RTB"}),(0,i.jsx)("th",{className:"text-center p-2",children:"Portfel projekt\xf3w"}),(0,i.jsx)("th",{className:"text-right p-2",children:"Udzia\u0142 w rynku"})]})}),(0,i.jsx)("tbody",{className:"divide-y divide-gray-200",children:t.map(((e,n)=>{const a="player"===e.id,s=(e.rtbPower/t.reduce(((e,t)=>e+t.rtbPower),0)*100).toFixed(1);return(0,i.jsxs)("tr",{className:""+(a?"bg-blue-50":"hover:bg-gray-50"),children:[(0,i.jsx)("td",{className:"text-center p-2 font-medium",children:n+1}),(0,i.jsx)("td",{className:"p-2",children:a?(0,i.jsx)("div",{className:"font-bold text-blue-600",children:e.name}):e.name}),(0,i.jsxs)("td",{className:"text-center p-2",children:[e.rtbPower.toLocaleString()," MW"]}),(0,i.jsxs)("td",{className:"text-center p-2",children:[e.power.toLocaleString()," MW"]}),(0,i.jsx)("td",{className:"text-right p-2",children:(0,i.jsxs)("div",{className:"flex items-center justify-end",children:[(0,i.jsxs)("div",{children:[s,"%"]}),(0,i.jsx)("div",{className:"ml-2 w-16 bg-gray-200 h-2 rounded-full overflow-hidden",children:(0,i.jsx)("div",{className:"h-full "+(a?"bg-blue-500":"bg-gray-500"),style:{width:`${s}%`}})})]})})]},e.id)}))})]})]})},en=e=>{let{playerRank:t,ranking:n,playerPower:a}=e;return(0,i.jsxs)("div",{className:"bg-white p-3 rounded shadow",children:[(0,i.jsx)("h4",{className:"font-medium mb-2",children:"Twoja pozycja na rynku"}),1===t?(0,i.jsxs)("div",{className:"p-3 bg-green-100 text-green-800 rounded",children:[(0,i.jsx)("div",{className:"font-bold",children:"Jeste\u015b liderem rynku!"}),(0,i.jsx)("p",{className:"text-sm mt-1",children:"Utrzymuj przewag\u0119 nad konkurencj\u0105 rozwijaj\u0105c projekty w r\xf3\u017cnych regionach."})]}):(0,i.jsxs)("div",{className:"p-3 bg-blue-100 text-blue-800 rounded",children:[(0,i.jsxs)("div",{className:"font-bold",children:["Jeste\u015b na ",t,". miejscu"]}),(0,i.jsxs)("p",{className:"text-sm mt-1",children:["Do lidera brakuje Ci ",(n[0].rtbPower-a).toLocaleString()," MW mocy w projektach RTB."]})]}),(0,i.jsxs)("div",{className:"mt-3 text-sm",children:[(0,i.jsxs)("p",{children:["Tw\xf3j udzia\u0142 w rynku: ",(a/n.reduce(((e,t)=>e+t.rtbPower),0)*100).toFixed(1),"%"]}),(0,i.jsx)("p",{className:"mt-1",children:"Tempo wzrostu twojego portfela zale\u017cy od liczby projekt\xf3w i zatrudnionych specjalist\xf3w."})]}),(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsx)("div",{className:"font-medium mb-2",children:"Post\u0119p do celu (100 GW):"}),(0,i.jsx)("div",{className:"w-full bg-gray-200 h-4 rounded-full overflow-hidden mt-1",children:(0,i.jsx)("div",{className:"h-full bg-green-500 relative",style:{width:`${Math.min(100,a/1e5*100)}%`},children:(0,i.jsxs)("div",{className:"absolute inset-0 flex items-center justify-center text-xs text-white font-bold",children:[(a/1e5*100).toFixed(1),"%"]})})})]})]})},tn=e=>{let{competitors:t,playerPower:n}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"bg-white p-3 rounded shadow",children:[(0,i.jsx)("h4",{className:"font-medium mb-2",children:"Analiza konkurent\xf3w"}),(0,i.jsx)("ul",{className:"text-sm space-y-2",children:t.map((e=>(0,i.jsxs)("li",{className:"flex",children:[(0,i.jsx)("div",{className:"text-blue-600 font-bold mr-2",children:"\u2022"}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("span",{className:"font-medium",children:[e.name,":"]})," ",g(e,n)]})]},e.id)))})]}),(0,i.jsxs)("div",{className:"bg-white p-3 rounded shadow",children:[(0,i.jsx)("h4",{className:"font-medium mb-2",children:"Porady strategiczne"}),(0,i.jsxs)("ul",{className:"text-sm space-y-2",children:[(0,i.jsxs)("li",{className:"flex",children:[(0,i.jsx)("div",{className:"text-green-600 font-bold mr-2",children:"\u2022"}),(0,i.jsx)("div",{children:"Skupiaj si\u0119 na regionach z dobrymi warunkami wiatrowymi/s\u0142onecznymi i nisk\u0105 konkurencj\u0105."})]}),(0,i.jsxs)("li",{className:"flex",children:[(0,i.jsx)("div",{className:"text-green-600 font-bold mr-2",children:"\u2022"}),(0,i.jsx)("div",{children:"Zatrudniaj do\u015bwiadczonych specjalist\xf3w, aby przyspieszy\u0107 rozw\xf3j projekt\xf3w."})]}),(0,i.jsxs)("li",{className:"flex",children:[(0,i.jsx)("div",{className:"text-green-600 font-bold mr-2",children:"\u2022"}),(0,i.jsx)("div",{children:"Dywersyfikuj portfolio projekt\xf3w geograficznie, aby minimalizowa\u0107 ryzyko."})]}),(0,i.jsxs)("li",{className:"flex",children:[(0,i.jsx)("div",{className:"text-green-600 font-bold mr-2",children:"\u2022"}),(0,i.jsx)("div",{children:"Monitoruj ruchy konkurencji i unikaj region\xf3w, w kt\xf3rych s\u0105 dominuj\u0105cy gracze."})]}),(0,i.jsxs)("li",{className:"flex",children:[(0,i.jsx)("div",{className:"text-green-600 font-bold mr-2",children:"\u2022"}),(0,i.jsx)("div",{children:"Inwestuj w projekty z wysokim ROI, aby maksymalizowa\u0107 zwrot z inwestycji."})]})]})]}),(0,i.jsxs)("div",{className:"bg-white p-3 rounded shadow",children:[(0,i.jsx)("h4",{className:"font-medium mb-2",children:"Cel gry"}),(0,i.jsxs)("div",{className:"text-sm",children:[(0,i.jsx)("p",{children:"Twoim celem jest osi\u0105gni\u0119cie 100,000 MW (100 GW) mocy w projektach RTB jako pierwszy deweloper."}),(0,i.jsxs)("div",{className:"mt-2",children:[(0,i.jsx)("div",{className:"font-medium",children:"Post\u0119p do celu:"}),(0,i.jsx)("div",{className:"w-full bg-gray-200 h-4 rounded-full overflow-hidden mt-1",children:(0,i.jsx)("div",{className:"h-full bg-green-500 relative",style:{width:`${Math.min(100,n/1e5*100)}%`},children:(0,i.jsxs)("div",{className:"absolute inset-0 flex items-center justify-center text-xs text-white font-bold",children:[(n/1e5*100).toFixed(1),"%"]})})})]})]})]})]})},nn=()=>{const{state:e}=F(),{state:t}=l(),n=[...e.competitors].sort(((e,t)=>t.rtbPower-e.rtbPower)),a=[...n,{id:"player",name:"Twoja firma",rtbPower:t.rtbPower,power:1.2*t.rtbPower}].sort(((e,t)=>t.rtbPower-e.rtbPower)),s=a.findIndex((e=>"player"===e.id))+1;return(0,i.jsxs)("div",{className:"flex flex-1",children:[(0,i.jsxs)("div",{className:"flex-1 p-4 overflow-y-auto",children:[(0,i.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Analiza konkurencji"}),(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[(0,i.jsxs)("div",{className:"bg-white p-3 rounded shadow",children:[(0,i.jsx)("div",{className:"text-sm text-gray-500",children:"Twoja pozycja"}),(0,i.jsxs)("div",{className:"text-xl font-bold",children:[s," miejsce"]})]}),(0,i.jsxs)("div",{className:"bg-white p-3 rounded shadow",children:[(0,i.jsx)("div",{className:"text-sm text-gray-500",children:"Twoja moc RTB"}),(0,i.jsxs)("div",{className:"text-xl font-bold",children:[t.rtbPower.toLocaleString()," MW"]})]}),(0,i.jsxs)("div",{className:"bg-white p-3 rounded shadow",children:[(0,i.jsx)("div",{className:"text-sm text-gray-500",children:"Lider rynku"}),(0,i.jsx)("div",{className:"text-xl font-bold",children:a[0].name}),(0,i.jsxs)("div",{className:"text-sm text-gray-500",children:[a[0].rtbPower.toLocaleString()," MW"]})]})]}),(0,i.jsx)(Xt,{ranking:a}),(0,i.jsxs)("div",{className:"bg-white p-4 rounded shadow",children:[(0,i.jsx)("h3",{className:"font-bold text-lg mb-3",children:"Strategie konkurent\xf3w"}),(0,i.jsx)("div",{className:"grid grid-cols-3 gap-4",children:n.map((e=>(0,i.jsx)(Qt,{competitor:e,playerPower:t.rtbPower},e.id)))})]})]}),(0,i.jsxs)("div",{className:"w-1/3 bg-gray-100 p-4 overflow-y-auto",children:[(0,i.jsx)("h3",{className:"font-bold text-lg mb-4",children:"Analiza rynku i porady"}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)(en,{playerRank:s,ranking:a,playerPower:t.rtbPower}),(0,i.jsx)(tn,{competitors:n,playerPower:t.rtbPower})]})]})]})},an=()=>{const{state:t,dispatch:n}=l(),{state:a,dispatch:s,showNotification:r,calculateEventsEffect:o}=F(),{dispatch:c}=H(),[d,u]=(0,e.useState)("all"),[h,m]=(0,e.useState)("power"),[f,y]=(0,e.useState)("desc"),g=[...t.projects.filter((e=>"all"===d||("pv"===d?"PV"===e.technology:"wf"===d?"WF"===e.technology:"rtb"!==d||"ready_to_build"===e.status)))].sort(((e,t)=>{if("power"===h)return"asc"===f?e.power-t.power:t.power-e.power;if("price"===h)return"asc"===f?e.totalCost-t.totalCost:t.totalCost-e.totalCost;if("stage"===h){const n=["land_acquisition","environmental_decision","zoning_conditions","grid_connection","ready_to_build"],i=n.indexOf(e.status),a=n.indexOf(t.status);return"asc"===f?i-a:a-i}return 0})),v=e=>{var n;const i=15e4*e.power,s=o("marketModifier"),l={PV:1*a.marketPriceModifiers.PV*s,WF:1.2*a.marketPriceModifiers.WF*s,BESS:1.5*a.marketPriceModifiers.BESS*s},d=1;a.globalEvents.currentEvents.length>0&&a.globalEvents.currentEvents.forEach((t=>{const n=t.getEffect();n.technologyEffect&&n.technologyEffect.technology===e.technology&&n.technologyEffect.marketModifier&&(d*=n.technologyEffect.marketModifier)}));const u={land_acquisition:.15,environmental_decision:.35,zoning_conditions:.55,grid_connection:.85,ready_to_build:1}[e.status]||.1,h=l[e.technology]*d||1,p=1+e.power/100*.2;let m=1;a.globalEvents.currentEvents.length>0&&a.globalEvents.currentEvents.forEach((t=>{const n=t.getEffect();n.regionalEffect&&n.regionalEffect.region===e.regionId&&n.regionalEffect.marketModifier&&(m*=n.regionalEffect.marketModifier)}));const f=null===(n=t.staff.developers)||void 0===n?void 0:n.find((t=>t.id===e.assignedDeveloper)),y=f?1+f.skill/20:1;let g=null,v=1;const x=a.globalEvents.currentEvents.length>0?.05:.1;if(Math.random()<x){g=[{name:"Nag\u0142y spadek cen energii",impact:.85,description:"Ceny energii na rynku spad\u0142y o 15%, obni\u017caj\u0105c warto\u015b\u0107 projekt\xf3w OZE."},{name:"Zmiana regulacji",impact:.8,description:"Niekorzystne zmiany w ustawie o OZE obni\u017cy\u0142y warto\u015b\u0107 projekt\xf3w."},{name:"Lokalne protesty",impact:.9,description:"Protesty mieszka\u0144c\xf3w zniech\u0119caj\u0105 potencjalnych inwestor\xf3w."},{name:"Problem geologiczny",impact:.7,description:"Wykryto potencjalne problemy geologiczne na terenie projektu."},{name:"Korzystna zmiana warunk\xf3w aukcji",impact:1.15,description:"Planowane aukcje OZE z korzystnymi warunkami podnios\u0142y warto\u015b\u0107 projektu."},{name:"Wzmo\u017cone zainteresowanie inwestor\xf3w",impact:1.2,description:"Duzi inwestorzy poszukuj\u0105 projekt\xf3w w tym regionie."}][Math.random()<.7?Math.floor(4*Math.random()):Math.floor(2*Math.random())+4],v=g.impact}const w=Math.floor(i*u*h*p*m*y*v);if(g){const t=v<1?"warning":"positive";c({type:"ADD_EVENT",payload:{id:Date.now()+Math.random(),type:"economic_event",title:g.name,description:g.description,severity:t,turn:a.turn,expires:a.turn+10,projectId:e.id,effect:{type:"market_price_modifier",value:v,technology:e.technology}}}),r(`${g.name}: ${g.description} Wp\u0142yw na cen\u0119: ${(100*g.impact).toFixed(0)}%`,t)}return w},x=e=>{switch(e){case"land_acquisition":return(0,i.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:"Pozyskiwanie grunt\xf3w"});case"environmental_decision":return(0,i.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs",children:"Decyzja \u015brodowiskowa"});case"zoning_conditions":return(0,i.jsx)("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs",children:"Warunki zabudowy"});case"grid_connection":return(0,i.jsx)("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 rounded-full text-xs",children:"Przy\u0142\u0105czenie"});case"ready_to_build":return(0,i.jsx)("span",{className:"px-2 py-1 bg-red-100 text-red-800 rounded-full text-xs",children:"RTB"});default:return(0,i.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs",children:e})}};return(0,i.jsxs)("div",{className:"p-4",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Sprzeda\u017c projekt\xf3w na gie\u0142dzie"}),(0,i.jsx)("div",{className:"bg-white p-4 rounded shadow mb-4",children:(0,i.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Filtruj"}),(0,i.jsxs)("select",{value:d,onChange:e=>u(e.target.value),className:"border rounded px-2 py-1",children:[(0,i.jsx)("option",{value:"all",children:"Wszystkie projekty"}),(0,i.jsx)("option",{value:"pv",children:"Tylko PV"}),(0,i.jsx)("option",{value:"wf",children:"Tylko wiatrowe"}),(0,i.jsx)("option",{value:"rtb",children:"Tylko RTB"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Sortuj wed\u0142ug"}),(0,i.jsxs)("select",{value:h,onChange:e=>m(e.target.value),className:"border rounded px-2 py-1",children:[(0,i.jsx)("option",{value:"power",children:"Mocy [MW]"}),(0,i.jsx)("option",{value:"price",children:"Ceny"}),(0,i.jsx)("option",{value:"stage",children:"Etapu"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Kolejno\u015b\u0107"}),(0,i.jsxs)("select",{value:f,onChange:e=>y(e.target.value),className:"border rounded px-2 py-1",children:[(0,i.jsx)("option",{value:"asc",children:"Rosn\u0105co"}),(0,i.jsx)("option",{value:"desc",children:"Malej\u0105co"})]})]})]})}),(0,i.jsxs)("div",{className:"bg-white p-4 rounded shadow mb-4",children:[(0,i.jsx)("h3",{className:"text-lg font-bold mb-3",children:"Aktualna wycena projekt\xf3w"}),(0,i.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Warto\u015b\u0107 projekt\xf3w zale\u017cy od etapu rozwoju, technologii, lokalizacji i jako\u015bci pracy developera. Rynek mo\u017ce ulega\u0107 wahaniom w zale\u017cno\u015bci od zdarze\u0144 ekonomicznych."}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[(0,i.jsxs)("div",{className:"border rounded p-3",children:[(0,i.jsx)("div",{className:"text-sm text-gray-500",children:"Etap RTB"}),(0,i.jsx)("div",{className:"font-bold",children:"x10 wy\u017csza wycena"})]}),(0,i.jsxs)("div",{className:"border rounded p-3",children:[(0,i.jsx)("div",{className:"text-sm text-gray-500",children:"Technologia"}),(0,i.jsx)("div",{className:"font-bold",children:"PV: x1.0 | WF: x1.2 | BESS: x1.5"})]}),(0,i.jsxs)("div",{className:"border rounded p-3",children:[(0,i.jsx)("div",{className:"text-sm text-gray-500",children:"Umiej\u0119tno\u015bci developera"}),(0,i.jsx)("div",{className:"font-bold",children:"do +50% dla eksperta"})]}),(0,i.jsxs)("div",{className:"border rounded p-3",children:[(0,i.jsx)("div",{className:"text-sm text-gray-500",children:"Wielko\u015b\u0107 projektu"}),(0,i.jsx)("div",{className:"font-bold",children:"+20% dla 100MW"})]})]})]}),(0,i.jsx)("div",{className:"bg-white rounded shadow overflow-hidden",children:(0,i.jsxs)("table",{className:"min-w-full",children:[(0,i.jsx)("thead",{className:"bg-gray-100",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"text-left p-3",children:"Projekt"}),(0,i.jsx)("th",{className:"text-center p-3",children:"Technologia"}),(0,i.jsx)("th",{className:"text-center p-3",children:"Moc"}),(0,i.jsx)("th",{className:"text-center p-3",children:"Status"}),(0,i.jsx)("th",{className:"text-right p-3",children:"Cena sprzeda\u017cy"}),(0,i.jsx)("th",{className:"text-right p-3",children:"Zysk"}),(0,i.jsx)("th",{className:"text-center p-3",children:"Akcje"})]})}),(0,i.jsx)("tbody",{className:"divide-y",children:g.length>0?g.map((e=>{const o=v(e),l=o-e.totalCost,d=(l/e.totalCost*100).toFixed(1),u=["land_acquisition","environmental_decision","zoning_conditions","grid_connection","ready_to_build"],h=u.indexOf("environmental_decision"),m=u.indexOf(e.status)>=h;return(0,i.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,i.jsxs)("td",{className:"p-3",children:[(0,i.jsx)("div",{className:"font-medium",children:e.name}),(0,i.jsx)("div",{className:"text-xs text-gray-500",children:e.county?`Powiat ${e.county.name}`:"Brak lokalizacji"})]}),(0,i.jsx)("td",{className:"text-center p-3",children:e.technology}),(0,i.jsxs)("td",{className:"text-center p-3",children:[e.power," MW"]}),(0,i.jsx)("td",{className:"text-center p-3",children:x(e.status)}),(0,i.jsxs)("td",{className:"text-right p-3 font-medium",children:[o.toLocaleString()," PLN"]}),(0,i.jsxs)("td",{className:"text-right p-3",children:[(0,i.jsxs)("div",{className:l>=0?"text-green-600":"text-red-600",children:[l.toLocaleString()," PLN"]}),(0,i.jsxs)("div",{className:"text-xs text-gray-500",children:[d,"%"]})]}),(0,i.jsx)("td",{className:"text-center p-3",children:(0,i.jsx)("button",{onClick:()=>(e=>{const i=t.projects.find((t=>t.id===e));if(!i)return;const o=["land_acquisition","environmental_decision","zoning_conditions","grid_connection","ready_to_build"],l=o.indexOf("environmental_decision");if(o.indexOf(i.status)<l)return void r(`Nie mo\u017cna sprzeda\u0107 projektu na etapie "${p(i.status)}". Projekt musi osi\u0105gn\u0105\u0107 co najmniej etap decyzji \u015brodowiskowej.`,"error");const d=v(i);s({type:"ADD_MARKET_TRANSACTION",payload:{id:Date.now(),projectId:i.id,projectName:i.name,technology:i.technology,power:i.power,status:i.status,price:d,turn:a.turn,seller:"player",date:(new Date).toISOString()}}),n({type:"SELL_PROJECT",payload:{projectId:i.id,price:d}}),i.county,c({type:"ADD_EVENT",payload:{id:Date.now()+Math.random(),type:"project_event",title:`Sprzeda\u017c projektu: ${i.name}`,description:`Projekt ${i.name} zosta\u0142 sprzedany za ${d.toLocaleString()} z\u0142.`,severity:"positive",turn:a.turn,expires:a.turn+5,projectId:i.id}}),r(`Sprzedano projekt "${i.name}" za ${d.toLocaleString()} PLN na gie\u0142dzie`,"success")})(e.id),className:`px-3 py-1 ${m?"bg-green-500 hover:bg-green-600":"bg-gray-400 cursor-not-allowed"} text-white rounded text-sm`,disabled:!m,title:m?"":"Projekt musi osi\u0105gn\u0105\u0107 etap decyzji \u015brodowiskowej",children:"Sprzedaj"})})]},e.id)})):(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:"7",className:"p-4 text-center text-gray-500",children:"Brak projekt\xf3w spe\u0142niaj\u0105cych kryteria filtrowania"})})})]})}),(0,i.jsxs)("div",{className:"bg-white rounded shadow overflow-hidden mt-6",children:[(0,i.jsx)("div",{className:"p-4 border-b",children:(0,i.jsx)("h3",{className:"text-lg font-bold",children:"Historia sprzeda\u017cy"})}),a.marketHistory.length>0?(0,i.jsxs)("table",{className:"min-w-full",children:[(0,i.jsx)("thead",{className:"bg-gray-100",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"text-left p-3",children:"Projekt"}),(0,i.jsx)("th",{className:"text-center p-3",children:"Technologia"}),(0,i.jsx)("th",{className:"text-center p-3",children:"Moc"}),(0,i.jsx)("th",{className:"text-center p-3",children:"Status"}),(0,i.jsx)("th",{className:"text-right p-3",children:"Cena"}),(0,i.jsx)("th",{className:"text-center p-3",children:"Tura"})]})}),(0,i.jsx)("tbody",{className:"divide-y",children:a.marketHistory.map((e=>(0,i.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,i.jsx)("td",{className:"p-3",children:e.projectName}),(0,i.jsx)("td",{className:"text-center p-3",children:e.technology}),(0,i.jsxs)("td",{className:"text-center p-3",children:[e.power," MW"]}),(0,i.jsx)("td",{className:"text-center p-3",children:x(e.status)}),(0,i.jsxs)("td",{className:"text-right p-3 font-medium",children:[e.price.toLocaleString()," PLN"]}),(0,i.jsx)("td",{className:"text-center p-3",children:e.turn})]},e.id)))})]}):(0,i.jsx)("p",{className:"p-4 text-center text-gray-500",children:"Brak historii transakcji"})]})]})},sn=()=>{const[t,n]=(0,e.useState)("available"),[a,s]=(0,e.useState)("all"),[r,o]=(0,e.useState)("all"),{state:c,dispatch:d}=l(),{state:u}=F(),[h,p]=(0,e.useState)([{id:1,name:"PV-MAZ1234",technology:"PV",status:"greenfield",region:"mazowieckie",power:15,price:225e3,seller:"Inny deweloper",listedOn:new Date(2025,2,1)},{id:2,name:"WF-ZAP4321",technology:"WF",status:"rtb",region:"zachodniopomorskie",power:30,price:1392e4,seller:"Fundusz inwestycyjny",listedOn:new Date(2025,2,5)},{id:3,name:"BESS-MAL5678",technology:"BESS",status:"development",region:"ma\u0142opolskie",power:10,price:4e6,seller:"Prywatny inwestor",listedOn:new Date(2025,2,8)}]),m=h.filter((e=>("all"===a||e.technology===a)&&("all"===r||e.status===r))),f=()=>{const e=Object.keys(_e),t=e[Math.floor(Math.random()*e.length)],n=_e[t],i=["greenfield","development","rtb","cod"],a=i[Math.floor(Math.random()*i.length)],s=["mazowieckie","ma\u0142opolskie","wielkopolskie","zachodniopomorskie","podlaskie"],r=s[Math.floor(Math.random()*s.length)],o=Math.floor(5+45*Math.random()),l=n.marketPrices[a],c=l.min+Math.random()*(l.max-l.min),d=.85+.3*Math.random(),u=Math.floor(c*o*d),h=["Inny deweloper","Fundusz inwestycyjny","Prywatny inwestor"],p=h[Math.floor(Math.random()*h.length)];return{id:Date.now(),name:`${n.shortName}-${r.substring(0,3).toUpperCase()}${Math.floor(1e4*Math.random())}`,technology:t,status:a,region:r,power:o,price:u,seller:p,listedOn:new Date}},y=()=>{const e=[],t=Math.floor(1+4*Math.random());for(let n=0;n<t;n++)e.push(f());p([...h,...e])};(0,e.useEffect)((()=>{y(),u.turn%5===0&&(()=>{const e=1+Math.floor(3*Math.random()),t=[];for(let n=0;n<e;n++)t.push(f());p((e=>[...e,...t]))})()}),[u.turn]);const g=e=>{switch(e){case"PV":return(0,i.jsx)(ge,{className:"h-5 w-5 text-yellow-500"});case"WF":return(0,i.jsx)(ue,{className:"h-5 w-5 text-blue-500"});case"BESS":return(0,i.jsx)(Se,{className:"h-5 w-5 text-purple-500"});default:return null}},v=e=>{switch(e){case"greenfield":return"Greenfield";case"development":return"W rozwoju";case"rtb":return"Ready-to-Build";case"cod":return"Commercial Operation";default:return e}};return(0,i.jsxs)("div",{className:"flex flex-1",children:[(0,i.jsxs)("div",{className:"flex-1 p-4 overflow-y-auto",children:[(0,i.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Gie\u0142da Projekt\xf3w OZE"}),(0,i.jsxs)("div",{className:"flex border-b border-gray-200 mb-4",children:[(0,i.jsx)("button",{onClick:()=>n("available"),className:"py-2 px-4 font-medium "+("available"===t?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"),children:"Dost\u0119pne Projekty"}),(0,i.jsx)("button",{onClick:()=>n("my_listings"),className:"py-2 px-4 font-medium "+("my_listings"===t?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"),children:"Moje Og\u0142oszenia"}),(0,i.jsx)("button",{onClick:()=>n("history"),className:"py-2 px-4 font-medium "+("history"===t?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"),children:"Historia Transakcji"}),(0,i.jsx)("button",{onClick:()=>n("sell"),className:"py-2 px-4 font-medium "+("sell"===t?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"),children:"Sprzeda\u017c"})]}),"available"===t&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"flex mb-4",children:[(0,i.jsx)("button",{onClick:()=>s("all"),className:"px-3 py-1 rounded "+("all"===a?"bg-gray-700 text-white":"bg-gray-200"),children:"Wszystkie"}),(0,i.jsxs)("button",{onClick:()=>s("PV"),className:"px-3 py-1 rounded ml-2 flex items-center "+("PV"===a?"bg-yellow-500 text-white":"bg-gray-200"),children:[(0,i.jsx)(ge,{className:"h-4 w-4 mr-1"})," Fotowoltaika"]}),(0,i.jsxs)("button",{onClick:()=>s("WF"),className:"px-3 py-1 rounded ml-2 flex items-center "+("WF"===a?"bg-blue-500 text-white":"bg-gray-200"),children:[(0,i.jsx)(ue,{className:"h-4 w-4 mr-1"})," Farmy Wiatrowe"]}),(0,i.jsxs)("button",{onClick:()=>s("BESS"),className:"px-3 py-1 rounded ml-2 flex items-center "+("BESS"===a?"bg-purple-500 text-white":"bg-gray-200"),children:[(0,i.jsx)(Se,{className:"h-4 w-4 mr-1"})," Magazyny Energii"]})]}),(0,i.jsxs)("div",{className:"flex mb-4",children:[(0,i.jsx)("button",{onClick:()=>o("all"),className:"px-3 py-1 rounded "+("all"===r?"bg-gray-700 text-white":"bg-gray-200"),children:"Wszystkie etapy"}),(0,i.jsx)("button",{onClick:()=>o("greenfield"),className:"px-3 py-1 rounded ml-2 "+("greenfield"===r?"bg-green-500 text-white":"bg-gray-200"),children:"Greenfield"}),(0,i.jsx)("button",{onClick:()=>o("development"),className:"px-3 py-1 rounded ml-2 "+("development"===r?"bg-orange-500 text-white":"bg-gray-200"),children:"Development"}),(0,i.jsx)("button",{onClick:()=>o("rtb"),className:"px-3 py-1 rounded ml-2 "+("rtb"===r?"bg-red-500 text-white":"bg-gray-200"),children:"Ready-to-Build"}),(0,i.jsx)("button",{onClick:()=>o("cod"),className:"px-3 py-1 rounded ml-2 "+("cod"===r?"bg-purple-500 text-white":"bg-gray-200"),children:"Commercial Operation"})]}),(0,i.jsx)(ze,{title:"Dost\u0119pne projekty",headerAction:(0,i.jsx)(Ne,{onClick:y,variant:"info",size:"small",children:"Od\u015bwie\u017c gie\u0142d\u0119"}),children:m.length>0?(0,i.jsx)("div",{className:"overflow-x-auto",children:(0,i.jsxs)("table",{className:"min-w-full",children:[(0,i.jsx)("thead",{className:"bg-gray-100",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"text-left p-2",children:"Projekt"}),(0,i.jsx)("th",{className:"text-center p-2",children:"Technologia"}),(0,i.jsx)("th",{className:"text-center p-2",children:"Etap"}),(0,i.jsx)("th",{className:"text-center p-2",children:"Region"}),(0,i.jsx)("th",{className:"text-center p-2",children:"Moc"}),(0,i.jsx)("th",{className:"text-center p-2",children:"Cena"}),(0,i.jsx)("th",{className:"text-center p-2",children:"Sprzedaj\u0105cy"}),(0,i.jsx)("th",{className:"text-center p-2",children:"Akcja"})]})}),(0,i.jsx)("tbody",{className:"divide-y divide-gray-200",children:m.map((e=>(0,i.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,i.jsx)("td",{className:"p-2",children:e.name}),(0,i.jsx)("td",{className:"text-center p-2",children:(0,i.jsxs)("div",{className:"flex justify-center items-center",children:[g(e.technology),(0,i.jsx)("span",{className:"ml-1",children:e.technology})]})}),(0,i.jsx)("td",{className:"text-center p-2",children:v(e.status)}),(0,i.jsx)("td",{className:"text-center p-2",children:e.region}),(0,i.jsxs)("td",{className:"text-center p-2",children:[e.power," MW"]}),(0,i.jsxs)("td",{className:"text-center p-2",children:[e.price.toLocaleString()," PLN"]}),(0,i.jsx)("td",{className:"text-center p-2",children:e.seller}),(0,i.jsx)("td",{className:"text-center p-2",children:(0,i.jsx)(Ne,{variant:"success",size:"small",onClick:()=>(e=>{const t=h.find((t=>t.id===e));!t||c.cash<t.price||(d({type:"ADD_PROJECT",payload:{...t,status:"greenfield"===t.status?"land_acquisition":"development"===t.status?"environmental_decision":"rtb"===t.status?"ready_to_build":"constructed",etapPaid:{land_acquisition:!0,environmental_decision:"greenfield"!==t.status,zoning_conditions:"rtb"===t.status||"cod"===t.status,grid_connection:"rtb"===t.status||"cod"===t.status,construction:"cod"===t.status},progress:100,totalCost:t.price,assignedScout:null,assignedDeveloper:null,events:[{turn:0,text:`Projekt zakupiony na gie\u0142dzie za ${t.price.toLocaleString()} PLN`}]}}),d({type:"UPDATE_CASH",payload:-t.price}),p(h.filter((t=>t.id!==e))))})(e.id),disabled:c.cash<e.price,children:"Kup"})})]},e.id)))})]})}):(0,i.jsx)("p",{className:"text-gray-500",children:"Brak dost\u0119pnych projekt\xf3w spe\u0142niaj\u0105cych kryteria"})})]}),"my_listings"===t&&(0,i.jsxs)(ze,{title:"Moje og\u0142oszenia",children:[(0,i.jsx)("p",{className:"text-gray-500",children:"Nie masz aktualnie wystawionych projekt\xf3w na sprzeda\u017c."}),(0,i.jsx)(Ne,{variant:"primary",className:"mt-4",onClick:()=>alert("Tu b\u0119dzie formularz wystawiania projektu"),children:"Wystaw projekt na sprzeda\u017c"})]}),"history"===t&&(0,i.jsx)(ze,{title:"Historia transakcji",children:(0,i.jsx)("p",{className:"text-gray-500",children:"Brak historii transakcji."})}),"sell"===t&&(0,i.jsx)(an,{})]}),(0,i.jsx)("div",{className:"w-1/3 bg-gray-100 p-4 overflow-y-auto",children:(0,i.jsx)(ze,{title:"Analiza rynku",children:(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"font-medium mb-2",children:"Aktualne trendy cenowe"}),(0,i.jsxs)("div",{className:"space-y-1",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium",children:"PV (Greenfield):"})," 15 000\u201325 000 z\u0142/MWp"]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium",children:"PV (RTB):"})," 100 000\u2013250 000 EUR/MWp"]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Farmy Wiatrowe (RTB):"})," 340 000\u2013464 000 z\u0142/MW"]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Magazyny Energii (RTB):"})," ","1.2\u20131.8 mln z\u0142/MW"]})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"font-medium mb-2",children:"Porady inwestycyjne"}),(0,i.jsxs)("ul",{className:"space-y-1 text-sm",children:[(0,i.jsx)("li",{children:"\u2022 Projekty hybrydowe (PV + magazyn) osi\u0105gaj\u0105 premi\u0119 cenow\u0105 30-40%"}),(0,i.jsx)("li",{children:"\u2022 Najwy\u017csze ROI oferuj\u0105 projekty PV w fazie development (50-80k EUR/MWp)"}),(0,i.jsx)("li",{children:"\u2022 Projekty z gwarantowan\u0105 moc\u0105 przy\u0142\u0105czeniow\u0105 s\u0105 warte 15-20% wi\u0119cej"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"font-medium mb-2",children:"Aktywno\u015b\u0107 gie\u0142dy"}),(0,i.jsx)("p",{className:"text-sm",children:"W ostatnim kwartale odnotowano 47 transakcji o \u0142\u0105cznej warto\u015bci 320 mln z\u0142, co oznacza wzrost o 18% r/r. \u015aredni czas sprzeda\u017cy projektu wynosi obecnie 4 miesi\u0105ce."})]})]})})})]})},rn=t=>{let{employees:n,onSelectEmployee:a,selectedEmployeeId:s}=t;const[r,o]=(0,e.useState)("all"),[l,c]=(0,e.useState)("all"),[d,u]=(0,e.useState)("name"),h=(0,e.useMemo)((()=>{let e=[...n];return"all"!==r&&(e=e.filter((e=>e.typeShort===r))),"all"!==l&&(e=e.filter((e=>e.level===l))),e.sort(((e,t)=>{switch(d){case"name":return e.name.localeCompare(t.name);case"type":return e.typeShort.localeCompare(t.typeShort);case"level":return e.level.localeCompare(t.level);case"skill":return t.skill-e.skill;case"experience":return t.experience-e.experience;default:return 0}})),e}),[n,r,l,d]),p=e=>e.experience<3e3?"Pocz\u0105tkuj\u0105cy":e.experience<8e3?"Do\u015bwiadczony":"Ekspert";return(0,i.jsxs)("div",{className:"hr-employees-list",children:[(0,i.jsxs)("div",{className:"hr-employees-list-header",children:["Pracownicy (",h.length,")"]}),(0,i.jsxs)("div",{className:"hr-employees-list-filters",children:[(0,i.jsxs)("select",{value:r,onChange:e=>o(e.target.value),children:[(0,i.jsx)("option",{value:"all",children:"Wszyscy"}),(0,i.jsx)("option",{value:"lessor",children:"Dzier\u017cawcy"}),(0,i.jsx)("option",{value:"developer",children:"Developerzy"}),(0,i.jsx)("option",{value:"lawyer",children:"Prawnicy"}),(0,i.jsx)("option",{value:"envSpecialist",children:"Spec. \u015brodowiskowi"}),(0,i.jsx)("option",{value:"lobbyist",children:"Lobby\u015bci"})]}),(0,i.jsxs)("select",{value:l,onChange:e=>c(e.target.value),children:[(0,i.jsx)("option",{value:"all",children:"Wszystkie poziomy"}),(0,i.jsx)("option",{value:"junior",children:"Pocz\u0105tkuj\u0105cy"}),(0,i.jsx)("option",{value:"mid",children:"Do\u015bwiadczeni"}),(0,i.jsx)("option",{value:"senior",children:"Eksperci"})]}),(0,i.jsxs)("select",{value:d,onChange:e=>u(e.target.value),children:[(0,i.jsx)("option",{value:"name",children:"Sortuj: Nazwa"}),(0,i.jsx)("option",{value:"type",children:"Sortuj: Typ"}),(0,i.jsx)("option",{value:"level",children:"Sortuj: Poziom"}),(0,i.jsx)("option",{value:"skill",children:"Sortuj: Umiej\u0119tno\u015bci"}),(0,i.jsx)("option",{value:"experience",children:"Sortuj: Do\u015bwiadczenie"})]})]}),(0,i.jsx)("div",{className:"hr-employees-items",children:0===h.length?(0,i.jsx)("div",{className:"hr-no-employees",children:"Brak pracownik\xf3w spe\u0142niaj\u0105cych kryteria"}):h.map((e=>(0,i.jsxs)("div",{className:"hr-employee-item "+(s===e.id?"selected":""),onClick:()=>a(e),children:[(0,i.jsx)("div",{className:"hr-employee-name",children:e.name}),(0,i.jsxs)("div",{className:"hr-employee-info",children:[(0,i.jsx)("span",{children:m(e.typeShort)}),(0,i.jsx)("span",{children:f(e.level)})]}),(0,i.jsxs)("div",{className:"hr-employee-info",children:[(0,i.jsxs)("span",{children:["Umiej\u0119tno\u015b\u0107: ",e.skill,"/10"]}),(0,i.jsxs)("span",{children:["Do\u015bwiadczenie: ",p(e)]})]}),e.specialization&&(0,i.jsx)("div",{className:"hr-employee-specialization",children:e.specialization})]},e.id)))})]})},on=t=>{let{employee:n,staffType:a,staffManagement:s,gameState:r}=t;const[o,l]=(0,e.useState)(!1);if(!n)return null;return(0,i.jsxs)("div",{className:"hr-employee-details",children:[(0,i.jsxs)("div",{className:"hr-employee-header",children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,i.jsx)("div",{className:"hr-employee-avatar",children:n.name.charAt(0)}),(0,i.jsxs)("div",{className:"hr-employee-title",children:[(0,i.jsx)("h3",{children:n.name}),(0,i.jsxs)("div",{className:"hr-employee-job",children:[f(n.level)," ",m(n.typeShort)]}),(0,i.jsx)("div",{children:n.specialization&&(0,i.jsxs)("span",{className:"hr-specialization",children:["Specjalizacja: ",n.specialization]})})]})]}),(0,i.jsxs)("div",{className:"hr-employee-actions",children:[(0,i.jsx)("button",{className:"train-btn",onClick:()=>{},children:"Szkolenie"}),(0,i.jsx)("button",{className:"fire-btn",onClick:()=>{o?(s.fireStaff(n.typeShort,n.id),l(!1)):l(!0)},children:o?"Potwierd\u017a zwolnienie":"Zwolnij"})]})]}),(0,i.jsxs)("div",{className:"hr-employee-grid",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"hr-employee-section",children:[(0,i.jsx)("h4",{children:"Statystyki"}),(0,i.jsxs)("div",{className:"hr-stat-row",children:[(0,i.jsx)("div",{className:"hr-stat-label",children:"Sta\u017c pracy"}),(0,i.jsxs)("div",{className:"hr-stat-value",children:[r.turn-n.hiredOn," tur"]})]}),(0,i.jsxs)("div",{className:"hr-stat-row",children:[(0,i.jsx)("div",{className:"hr-stat-label",children:"Umiej\u0119tno\u015bci"}),(0,i.jsxs)("div",{className:"hr-stat-value",children:[n.skill,"/10"]}),(0,i.jsx)("div",{className:"hr-progress-bar",children:(0,i.jsx)("div",{className:"hr-progress-value "+(n.skill>7?"high":n.skill>4?"medium":"low"),style:{width:10*n.skill+"%"}})})]}),(0,i.jsxs)("div",{className:"hr-stat-row",children:[(0,i.jsx)("div",{className:"hr-stat-label",children:"Do\u015bwiadczenie"}),(0,i.jsxs)("div",{className:"hr-stat-value",children:[n.experience," p.d."]}),(0,i.jsx)("div",{className:"hr-progress-bar",children:(0,i.jsx)("div",{className:"hr-progress-value",style:{width:`${Math.min(100,n.experience/100)}%`}})})]}),(0,i.jsxs)("div",{className:"hr-stat-row",children:[(0,i.jsx)("div",{className:"hr-stat-label",children:"Energia"}),(0,i.jsxs)("div",{className:"hr-stat-value",children:[n.energy,"/100"]}),(0,i.jsx)("div",{className:"hr-progress-bar",children:(0,i.jsx)("div",{className:"hr-progress-value "+(n.energy>70?"high":n.energy>40?"medium":"low"),style:{width:`${n.energy}%`}})})]}),(0,i.jsxs)("div",{className:"hr-stat-row",children:[(0,i.jsx)("div",{className:"hr-stat-label",children:"Morale"}),(0,i.jsxs)("div",{className:"hr-stat-value",children:[n.morale,"/100"]}),(0,i.jsx)("div",{className:"hr-progress-bar",children:(0,i.jsx)("div",{className:"hr-progress-value "+(n.morale>70?"high":n.morale>40?"medium":"low"),style:{width:`${n.morale}%`}})})]}),(0,i.jsxs)("div",{className:"hr-stat-row",children:[(0,i.jsx)("div",{className:"hr-stat-label",children:"Wynagrodzenie"}),(0,i.jsxs)("div",{className:"hr-stat-value",children:[n.salary.toLocaleString()," PLN / miesi\u0105c"]})]})]}),"developer"!==n.typeShort?null:n.technologyExperience&&0!==Object.keys(n.technologyExperience).length?(0,i.jsxs)("div",{className:"hr-employee-section",children:[(0,i.jsx)("h4",{children:"Do\u015bwiadczenie w technologiach"}),Object.entries(n.technologyExperience).map((e=>{let[t,n]=e;return(0,i.jsxs)("div",{className:"hr-stat-row",children:[(0,i.jsx)("div",{className:"hr-stat-label",children:t}),(0,i.jsxs)("div",{className:"hr-stat-value",children:[n," p.d."]}),(0,i.jsx)("div",{className:"hr-progress-bar",children:(0,i.jsx)("div",{className:"hr-progress-value",style:{width:`${Math.min(100,n/50)}%`}})})]},t)}))]}):(0,i.jsxs)("div",{className:"hr-employee-section",children:[(0,i.jsx)("h4",{children:"Do\u015bwiadczenie w technologiach"}),(0,i.jsx)("div",{className:"hr-no-data",children:"Brak do\u015bwiadczenia w konkretnych technologiach"})]}),"scout"!==n.typeShort?null:n.acquiredLands&&0!==n.acquiredLands?(0,i.jsxs)("div",{className:"hr-employee-section",children:[(0,i.jsx)("h4",{children:"Do\u015bwiadczenie dzier\u017cawcy"}),(0,i.jsxs)("div",{className:"hr-stat-row",children:[(0,i.jsx)("div",{className:"hr-stat-label",children:"Pozyskane grunty"}),(0,i.jsx)("div",{className:"hr-stat-value",children:n.acquiredLands})]}),(0,i.jsxs)("div",{className:"hr-stat-row",children:[(0,i.jsx)("div",{className:"hr-stat-label",children:"\u0141\u0105czna powierzchnia"}),(0,i.jsxs)("div",{className:"hr-stat-value",children:[n.acquiredArea||0," ha"]})]})]}):(0,i.jsxs)("div",{className:"hr-employee-section",children:[(0,i.jsx)("h4",{children:"Do\u015bwiadczenie dzier\u017cawcy"}),(0,i.jsx)("div",{className:"hr-no-data",children:"Jeszcze nie pozyska\u0142 \u017cadnych grunt\xf3w"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"hr-employee-section",children:[(0,i.jsx)("h4",{children:"Cechy charakteru"}),n.traits&&n.traits.length>0?n.traits.map((e=>{const t=(e=>[...c,...d,...u].find((t=>t.id===e))||{label:e,description:""})(e);return(0,i.jsxs)("div",{className:"hr-trait-item",children:[(0,i.jsx)("div",{className:"hr-trait-name",children:t.label}),(0,i.jsx)("div",{className:"hr-trait-description",children:t.description})]},e)})):(0,i.jsx)("div",{className:"hr-no-data",children:"Brak zdefiniowanych cech charakteru"})]}),(0,i.jsxs)("div",{className:"hr-employee-section",children:[(0,i.jsx)("h4",{children:"Potrzeby"}),n.potrzeby?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"hr-stat-row",children:[(0,i.jsx)("div",{className:"hr-stat-label",children:"Uznanie"}),(0,i.jsxs)("div",{className:"hr-stat-value",children:[n.potrzeby.uznanie,"/100"]}),(0,i.jsx)("div",{className:"hr-progress-bar",children:(0,i.jsx)("div",{className:"hr-progress-value",style:{width:`${n.potrzeby.uznanie}%`}})})]}),(0,i.jsxs)("div",{className:"hr-stat-row",children:[(0,i.jsx)("div",{className:"hr-stat-label",children:"Rozw\xf3j"}),(0,i.jsxs)("div",{className:"hr-stat-value",children:[n.potrzeby.rozwoj,"/100"]}),(0,i.jsx)("div",{className:"hr-progress-bar",children:(0,i.jsx)("div",{className:"hr-progress-value",style:{width:`${n.potrzeby.rozwoj}%`}})})]}),(0,i.jsxs)("div",{className:"hr-stat-row",children:[(0,i.jsx)("div",{className:"hr-stat-label",children:"Stabilizacja"}),(0,i.jsxs)("div",{className:"hr-stat-value",children:[n.potrzeby.stabilizacja,"/100"]}),(0,i.jsx)("div",{className:"hr-progress-bar",children:(0,i.jsx)("div",{className:"hr-progress-value",style:{width:`${n.potrzeby.stabilizacja}%`}})})]}),(0,i.jsxs)("div",{className:"hr-stat-row",children:[(0,i.jsx)("div",{className:"hr-stat-label",children:"Autonomia"}),(0,i.jsxs)("div",{className:"hr-stat-value",children:[n.potrzeby.autonomia,"/100"]}),(0,i.jsx)("div",{className:"hr-progress-bar",children:(0,i.jsx)("div",{className:"hr-progress-value",style:{width:`${n.potrzeby.autonomia}%`}})})]}),(0,i.jsxs)("div",{className:"hr-stat-row",children:[(0,i.jsx)("div",{className:"hr-stat-label",children:"Relacje spo\u0142eczne"}),(0,i.jsxs)("div",{className:"hr-stat-value",children:[n.potrzeby.relacjeSpoleczne,"/100"]}),(0,i.jsx)("div",{className:"hr-progress-bar",children:(0,i.jsx)("div",{className:"hr-progress-value",style:{width:`${n.potrzeby.relacjeSpoleczne}%`}})})]})]}):(0,i.jsx)("div",{className:"hr-no-data",children:"Brak zdefiniowanych potrzeb"})]}),(0,i.jsxs)("div",{className:"hr-employee-section",children:[(0,i.jsx)("h4",{children:"Historia"}),n.historia&&0!==n.historia.length?(0,i.jsx)("div",{className:"hr-history-list",children:n.historia.map(((e,t)=>(0,i.jsxs)("div",{className:"hr-history-item",children:[(0,i.jsxs)("div",{className:"hr-history-date",children:[new Date(e.data).toLocaleDateString("pl-PL")," (tura ",r.turn,")"]}),(0,i.jsx)("div",{className:"hr-history-description",children:e.opis})]},t)))}):(0,i.jsx)("div",{className:"hr-no-data",children:"Brak historii wydarze\u0144"})]})]})]})]})};var ln={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},cn=e.createContext&&e.createContext(ln),dn=["attr","size","title"];function un(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function hn(){return hn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},hn.apply(this,arguments)}function pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function mn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pn(Object(n),!0).forEach((function(t){fn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yn(t){return t&&t.map(((t,n)=>e.createElement(t.tag,mn({key:n},t.attr),yn(t.child))))}function gn(t){return n=>e.createElement(vn,hn({attr:mn({},t.attr)},n),yn(t.child))}function vn(t){var n=n=>{var i,{attr:a,size:s,title:r}=t,o=un(t,dn),l=s||n.size||"1em";return n.className&&(i=n.className),t.className&&(i=(i?i+" ":"")+t.className),e.createElement("svg",hn({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,a,o,{className:i,style:mn(mn({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),r&&e.createElement("title",null,r),t.children)};return void 0!==cn?e.createElement(cn.Consumer,null,(e=>n(e))):n(ln)}function xn(e){return gn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(e)}function wn(e){return gn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},child:[]}]})(e)}const _n=t=>{var n,a,s,r,o,c,d,u,h,p,m,f;let{playerState:y,gameState:g}=t;const{dispatch:v}=l(),[x,w]=(0,e.useState)("all"),_=[{id:"fancy_cars",name:"Luksusowe samochody s\u0142u\u017cbowe",category:"lessor",description:"\u0141adniejsze samochody do prezentowania przed rolnikami zwi\u0119kszaj\u0105 skuteczno\u015b\u0107 dzier\u017cawc\xf3w.",levels:[{level:1,cost:25e4,benefit:"+5% do skuteczno\u015bci pozyskiwania grunt\xf3w"},{level:2,cost:5e5,benefit:"+10% do skuteczno\u015bci pozyskiwania grunt\xf3w"},{level:3,cost:1e6,benefit:"+15% do skuteczno\u015bci pozyskiwania grunt\xf3w"}],currentLevel:(null===(n=y.companyUpgrades)||void 0===n?void 0:n.fancy_cars)||0},{id:"digital_mapping",name:"Cyfrowe mapy i analizy",category:"lessor",description:"Zaawansowane narz\u0119dzia do analizy grunt\xf3w pozwalaj\u0105 lepiej wybiera\u0107 lokalizacje.",levels:[{level:1,cost:5e5,benefit:"+10% do dok\u0142adno\u015bci analiz lokalizacyjnych"},{level:2,cost:1e6,benefit:"+20% do dok\u0142adno\u015bci analiz lokalizacyjnych"},{level:3,cost:2e6,benefit:"+35% do dok\u0142adno\u015bci analiz lokalizacyjnych"}],currentLevel:(null===(a=y.companyUpgrades)||void 0===a?void 0:a.digital_mapping)||0},{id:"drone_surveys",name:"Drony do inspekcji terenowych",category:"lessor",description:"Drony pozwalaj\u0105 szybko oceni\u0107 du\u017ce obszary i zidentyfikowa\u0107 najlepsze lokalizacje.",levels:[{level:1,cost:35e4,benefit:"+15% do szybko\u015bci analizy terenu"},{level:2,cost:7e5,benefit:"+25% do szybko\u015bci analizy terenu"},{level:3,cost:14e5,benefit:"+40% do szybko\u015bci analizy terenu"}],currentLevel:(null===(s=y.companyUpgrades)||void 0===s?void 0:s.drone_surveys)||0},{id:"dev_workstations",name:"Zaawansowane stacje robocze",category:"developer",description:"Wysokiej klasy komputery i oprogramowanie CAD dla developer\xf3w.",levels:[{level:1,cost:35e4,benefit:"+8% do szybko\u015bci rozwoju projekt\xf3w"},{level:2,cost:7e5,benefit:"+16% do szybko\u015bci rozwoju projekt\xf3w"},{level:3,cost:14e5,benefit:"+25% do szybko\u015bci rozwoju projekt\xf3w"}],currentLevel:(null===(r=y.companyUpgrades)||void 0===r?void 0:r.dev_workstations)||0},{id:"dev_software",name:"Specjalistyczne oprogramowanie",category:"developer",description:"Licencje na profesjonalne oprogramowanie dla developer\xf3w.",levels:[{level:1,cost:4e5,benefit:"+10% do jako\u015bci dokumentacji technicznej"},{level:2,cost:8e5,benefit:"+20% do jako\u015bci dokumentacji technicznej"},{level:3,cost:16e5,benefit:"+30% do jako\u015bci dokumentacji technicznej"}],currentLevel:(null===(o=y.companyUpgrades)||void 0===o?void 0:o.dev_software)||0},{id:"gis_tools",name:"Zaawansowane narz\u0119dzia GIS",category:"gis",description:"Profesjonalne oprogramowanie i sprz\u0119t do analizy przestrzennej.",levels:[{level:1,cost:5e5,benefit:"+10% do dok\u0142adno\u015bci analiz lokalizacyjnych"},{level:2,cost:1e6,benefit:"+20% do dok\u0142adno\u015bci analiz lokalizacyjnych"},{level:3,cost:2e6,benefit:"+35% do dok\u0142adno\u015bci analiz lokalizacyjnych"}],currentLevel:(null===(c=y.companyUpgrades)||void 0===c?void 0:c.gis_tools)||0},{id:"drone_fleet",name:"Flota dron\xf3w badawczych",category:"gis",description:"Drony z kamerami termowizyjnymi i multispektralnymi do badania terenu.",levels:[{level:1,cost:6e5,benefit:"+12% do szybko\u015bci analizy terenu"},{level:2,cost:12e5,benefit:"+25% do szybko\u015bci analizy terenu"},{level:3,cost:24e5,benefit:"+40% do szybko\u015bci analizy terenu"}],currentLevel:(null===(d=y.companyUpgrades)||void 0===d?void 0:d.drone_fleet)||0},{id:"law_database",name:"Baza danych prawniczych",category:"lawyer",description:"Dost\u0119p do profesjonalnych baz danych prawniczych i precedens\xf3w.",levels:[{level:1,cost:45e4,benefit:"+10% do skuteczno\u015bci w post\u0119powaniach administracyjnych"},{level:2,cost:9e5,benefit:"+20% do skuteczno\u015bci w post\u0119powaniach administracyjnych"},{level:3,cost:18e5,benefit:"+35% do skuteczno\u015bci w post\u0119powaniach administracyjnych"}],currentLevel:(null===(u=y.companyUpgrades)||void 0===u?void 0:u.law_database)||0},{id:"pr_campaigns",name:"Kampanie PR dla projekt\xf3w",category:"lobbyist",description:"Profesjonalne kampanie PR zwi\u0119kszaj\u0105ce akceptacj\u0119 spo\u0142eczn\u0105.",levels:[{level:1,cost:4e5,benefit:"+15% do akceptacji spo\u0142ecznej projekt\xf3w"},{level:2,cost:8e5,benefit:"+30% do akceptacji spo\u0142ecznej projekt\xf3w"},{level:3,cost:16e5,benefit:"+50% do akceptacji spo\u0142ecznej projekt\xf3w"}],currentLevel:(null===(h=y.companyUpgrades)||void 0===h?void 0:h.pr_campaigns)||0},{id:"company_offices",name:"Nowoczesna siedziba firmy",category:"company",description:"Presti\u017cowe biura zwi\u0119kszaj\u0105ce morale wszystkich pracownik\xf3w.",levels:[{level:1,cost:1e6,benefit:"+10% do morale wszystkich pracownik\xf3w"},{level:2,cost:25e5,benefit:"+20% do morale wszystkich pracownik\xf3w"},{level:3,cost:5e6,benefit:"+35% do morale wszystkich pracownik\xf3w"}],currentLevel:(null===(p=y.companyUpgrades)||void 0===p?void 0:p.company_offices)||0},{id:"employee_benefits",name:"Program benefit\xf3w pracowniczych",category:"company",description:"Kompleksowy pakiet benefit\xf3w poprawiaj\u0105cy zadowolenie i wydajno\u015b\u0107.",levels:[{level:1,cost:8e5,benefit:"+8% do wydajno\u015bci i -10% do rotacji pracownik\xf3w"},{level:2,cost:16e5,benefit:"+15% do wydajno\u015bci i -25% do rotacji pracownik\xf3w"},{level:3,cost:32e5,benefit:"+25% do wydajno\u015bci i -50% do rotacji pracownik\xf3w"}],currentLevel:(null===(m=y.companyUpgrades)||void 0===m?void 0:m.employee_benefits)||0},{id:"training_program",name:"Program szkole\u0144 wewn\u0119trznych",category:"company",description:"Systematyczne szkolenia zwi\u0119kszaj\u0105ce kompetencje ca\u0142ego zespo\u0142u.",levels:[{level:1,cost:6e5,benefit:"+10% szybszy wzrost do\u015bwiadczenia"},{level:2,cost:12e5,benefit:"+20% szybszy wzrost do\u015bwiadczenia"},{level:3,cost:24e5,benefit:"+35% szybszy wzrost do\u015bwiadczenia"}],currentLevel:(null===(f=y.companyUpgrades)||void 0===f?void 0:f.training_program)||0}],b="all"===x?_:_.filter((e=>e.category===x));return(0,i.jsxs)("div",{className:"company-upgrades",children:[(0,i.jsx)("h3",{children:"Ulepszenia firmowe"}),(0,i.jsx)("p",{className:"upgrades-description",children:"Inwestuj w rozw\xf3j swojej firmy, aby zwi\u0119kszy\u0107 wydajno\u015b\u0107 i skuteczno\u015b\u0107 twoich pracownik\xf3w. Ka\u017cde ulepszenie mo\u017cna rozwija\u0107 do trzeciego poziomu, zwi\u0119kszaj\u0105c efekty."}),(0,i.jsxs)("div",{className:"upgrades-filters",children:[(0,i.jsx)("button",{className:"filter-btn "+("all"===x?"active":""),onClick:()=>w("all"),children:"Wszystkie"}),(0,i.jsx)("button",{className:"filter-btn "+("lessor"===x?"active":""),onClick:()=>w("lessor"),children:"Dzier\u017cawcy"}),(0,i.jsx)("button",{className:"filter-btn "+("developer"===x?"active":""),onClick:()=>w("developer"),children:"Developerzy"}),(0,i.jsx)("button",{className:"filter-btn "+("gis"===x?"active":""),onClick:()=>w("gis"),children:"GIS"}),(0,i.jsx)("button",{className:"filter-btn "+("lawyer"===x?"active":""),onClick:()=>w("lawyer"),children:"Prawnicy"}),(0,i.jsx)("button",{className:"filter-btn "+("lobbyist"===x?"active":""),onClick:()=>w("lobbyist"),children:"Lobby\u015bci"}),(0,i.jsx)("button",{className:"filter-btn "+("company"===x?"active":""),onClick:()=>w("company"),children:"Firma"})]}),(0,i.jsx)("div",{className:"upgrades-grid",children:b.map((e=>{const t=e.currentLevel+1,n=t>e.levels.length,a=n?null:e.levels[t-1];return(0,i.jsxs)("div",{className:"upgrade-card",children:[(0,i.jsxs)("div",{className:"upgrade-header",children:[(0,i.jsx)("div",{className:"upgrade-title",children:e.name}),(0,i.jsxs)("div",{className:"upgrade-level",children:["Poziom ",e.currentLevel,"/",e.levels.length]})]}),(0,i.jsx)("div",{className:"upgrade-description",children:e.description}),(0,i.jsxs)("div",{className:"upgrade-current-benefits",children:[(0,i.jsx)("div",{className:"upgrade-benefit-title",children:"Obecne korzy\u015bci:"}),0===e.currentLevel?(0,i.jsx)("div",{className:"upgrade-no-benefits",children:"Brak (ulepszenie nie zakupione)"}):(0,i.jsxs)("div",{className:"upgrade-benefit",children:[(0,i.jsx)(xn,{className:"upgrade-benefit-icon"}),(0,i.jsx)("span",{children:e.levels[e.currentLevel-1].benefit})]})]}),!n&&(0,i.jsxs)("div",{className:"upgrade-next-level",children:[(0,i.jsx)("div",{className:"upgrade-benefit-title",children:"Nast\u0119pny poziom:"}),(0,i.jsxs)("div",{className:"upgrade-benefit",children:[(0,i.jsx)(wn,{className:"upgrade-benefit-icon"}),(0,i.jsx)("span",{children:a.benefit})]})]}),(0,i.jsx)("div",{className:"upgrade-cost",children:n?(0,i.jsx)("div",{className:"upgrade-max-level",children:"Osi\u0105gni\u0119to maksymalny poziom"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"upgrade-price",children:["Koszt: ",a.cost.toLocaleString()," PLN"]}),(0,i.jsx)("button",{className:"upgrade-button",onClick:()=>(e=>{const t=_.find((t=>t.id===e));if(!t)return;const n=t.currentLevel+1;if(n>t.levels.length)return;const i=t.levels[n-1].cost;y.cash<i?alert("Niewystarczaj\u0105ce \u015brodki!"):v({type:"PURCHASE_COMPANY_UPGRADE",payload:{upgradeId:e,level:n,cost:i}})})(e.id),disabled:y.cash<a.cost,children:y.cash>=a.cost?"Ulepsz":"Za ma\u0142o \u015brodk\xf3w"})]})})]},e.id)}))})]})},bn=t=>{let{employees:n,staffManagement:a,gameState:s}=t;const[r,o]=(0,e.useState)(null),[l,c]=(0,e.useState)("skill"),[d,u]=(0,e.useState)("all"),h=(0,e.useMemo)((()=>"all"===d?n:n.filter((e=>e.typeShort===d))),[n,d]),p=(0,e.useMemo)((()=>n.find((e=>e.id===r))||null),[n,r]),f=(0,e.useMemo)((()=>(e=>{if(!e)return[];const t=[{id:"skill",name:"Rozw\xf3j umiej\u0119tno\u015bci",description:"Zwi\u0119ksza og\xf3lny poziom umiej\u0119tno\u015bci pracownika.",cost:e.skill/2*5e3},{id:"morale",name:"Budowanie morale",description:"Zwi\u0119ksza morale i zaanga\u017cowanie pracownika.",cost:3e3}];if("developer"===e.typeShort){const e=[{id:"tech_pv",name:"Technologia PV",description:"Pog\u0142\u0119biona wiedza o technologii fotowoltaicznej.",cost:8e3},{id:"tech_wind",name:"Technologia wiatrowa",description:"Specjalistyczna wiedza o turbinach wiatrowych.",cost:1e4},{id:"tech_bess",name:"Magazyny energii",description:"Specjalistyczna wiedza o magazynach energii.",cost:12e3},{id:"tech_hybrid",name:"Systemy hybrydowe",description:"Wiedza o \u0142\u0105czeniu r\xf3\u017cnych technologii OZE.",cost:15e3}];return[...t,...e]}if("lessor"===e.typeShort){const e=[{id:"negotiation_skills",name:"Techniki negocjacji",description:"Zwi\u0119ksza umiej\u0119tno\u015bci negocjacyjne dzier\u017cawcy, co przek\u0142ada si\u0119 na lepsze warunki um\xf3w dzier\u017cawy.",duration:5,cost:5e3,effects:{negotiation:15,landAcquisitionSpeed:10}},{id:"land_valuation",name:"Wycena grunt\xf3w",description:"Pozwala lepiej ocenia\u0107 warto\u015b\u0107 grunt\xf3w, co zmniejsza koszty dzier\u017cawy.",duration:4,cost:4e3,effects:{landCostReduction:8,landQualityAssessment:15}},{id:"local_relations",name:"Relacje lokalne",description:"Uczy budowania relacji z lokalnymi spo\u0142eczno\u015bciami, co u\u0142atwia pozyskiwanie grunt\xf3w.",duration:6,cost:6e3,effects:{localRelations:20,landAcquisitionSpeed:15}}];return[...t,...e]}if("lawyer"===e.typeShort){const e=[{id:"energy_law",name:"Prawo energetyczne",description:"Pog\u0142\u0119biona wiedza o prawie energetycznym.",cost:9e3},{id:"env_regulations",name:"Regulacje \u015brodowiskowe",description:"Pog\u0142\u0119biona wiedza o przepisach ochrony \u015brodowiska.",cost:8e3}];return[...t,...e]}if("envSpecialist"===e.typeShort){const e=[{id:"env_assessment",name:"Oceny oddzia\u0142ywania",description:"Zaawansowane techniki oceny wp\u0142ywu na \u015brodowisko.",cost:8e3},{id:"nature_protection",name:"Ochrona przyrody",description:"Specjalistyczna wiedza o obszarach chronionych.",cost:7e3}];return[...t,...e]}if("lobbyist"===e.typeShort){const e=[{id:"public_relations",name:"Relacje publiczne",description:"Techniki budowania pozytywnych relacji.",cost:6e3},{id:"community_management",name:"Zarz\u0105dzanie spo\u0142eczno\u015bci\u0105",description:"Sposoby anga\u017cowania lokalnych spo\u0142eczno\u015bci.",cost:7e3}];return[...t,...e]}return t})(p)),[p]),y=(0,e.useMemo)((()=>f.find((e=>e.id===l))||null),[f,l]);return(0,i.jsxs)("div",{className:"training-center",children:[(0,i.jsx)("h3",{children:"Centrum szkole\u0144"}),(0,i.jsx)("p",{className:"training-description",children:"Rozwijaj umiej\u0119tno\u015bci swoich pracownik\xf3w poprzez specjalistyczne szkolenia. Ka\u017cde szkolenie zwi\u0119ksza poziom umiej\u0119tno\u015bci i do\u015bwiadczenie pracownika."}),(0,i.jsx)("div",{className:"training-filters",children:(0,i.jsxs)("select",{value:d,onChange:e=>u(e.target.value),children:[(0,i.jsx)("option",{value:"all",children:"Wszyscy pracownicy"}),(0,i.jsx)("option",{value:"lessor",children:"Dzier\u017cawcy"}),(0,i.jsx)("option",{value:"developer",children:"Developerzy"}),(0,i.jsx)("option",{value:"lawyer",children:"Prawnicy"}),(0,i.jsx)("option",{value:"envSpecialist",children:"Spec. \u015brodowiskowi"}),(0,i.jsx)("option",{value:"lobbyist",children:"Lobby\u015bci"})]})}),(0,i.jsxs)("div",{className:"training-grid",children:[(0,i.jsxs)("div",{className:"employees-for-training",children:[(0,i.jsx)("h4",{children:"Wybierz pracownika do szkolenia"}),0===h.length?(0,i.jsx)("div",{className:"no-employees-message",children:"Brak pracownik\xf3w spe\u0142niaj\u0105cych kryteria"}):(0,i.jsx)("div",{className:"training-employees-list",children:h.map((e=>(0,i.jsxs)("div",{className:"training-employee-item "+(r===e.id?"selected":""),onClick:()=>o(e.id),children:[(0,i.jsx)("div",{className:"training-employee-name",children:e.name}),(0,i.jsxs)("div",{className:"training-employee-info",children:[(0,i.jsx)("span",{children:m(e.typeShort)}),(0,i.jsxs)("span",{children:["Poziom: ",e.skill,"/10"]})]}),(0,i.jsxs)("div",{className:"training-employee-exp",children:["Do\u015bwiadczenie: ",e.experience," p.d."]})]},e.id)))})]}),(0,i.jsx)("div",{className:"training-options",children:p?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h4",{children:"Dost\u0119pne szkolenia"}),(0,i.jsx)("div",{className:"training-types-list",children:f.map((e=>(0,i.jsxs)("div",{className:"training-type-item "+(l===e.id?"selected":""),onClick:()=>c(e.id),children:[(0,i.jsx)("div",{className:"training-type-name",children:e.name}),(0,i.jsxs)("div",{className:"training-type-cost",children:[e.cost.toLocaleString()," PLN"]})]},e.id)))}),y&&(0,i.jsxs)("div",{className:"training-details",children:[(0,i.jsx)("h5",{children:y.name}),(0,i.jsx)("p",{children:y.description}),(0,i.jsxs)("div",{className:"training-cost",children:["Koszt: ",y.cost.toLocaleString()," PLN"]}),(0,i.jsxs)("div",{className:"training-benefits",children:[(0,i.jsx)("div",{className:"training-benefit-title",children:"Korzy\u015bci:"}),"skill"===l&&(0,i.jsx)("div",{className:"training-benefit-item",children:"\u2022 Wzrost umiej\u0119tno\u015bci o 1 punkt"}),"morale"===l&&(0,i.jsx)("div",{className:"training-benefit-item",children:"\u2022 Wzrost morale o 20 punkt\xf3w"}),l.startsWith("tech_")&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"training-benefit-item",children:"\u2022 Dodatkowe do\u015bwiadczenie w technologii"}),(0,i.jsx)("div",{className:"training-benefit-item",children:"\u2022 Szybszy rozw\xf3j projekt\xf3w tej technologii"})]}),"negotiation"===l&&(0,i.jsx)("div",{className:"training-benefit-item",children:"\u2022 Wy\u017csze szanse na pozyskanie grunt\xf3w"}),"land_valuation"===l&&(0,i.jsx)("div",{className:"training-benefit-item",children:"\u2022 Lepsza ocena potencja\u0142u grunt\xf3w"}),(0,i.jsx)("div",{className:"training-benefit-item",children:"\u2022 Wzrost do\u015bwiadczenia zawodowego"})]}),(0,i.jsx)("button",{className:"start-training-button",onClick:()=>{p&&y&&a.trainStaff(p.typeShort,p.id,l)},children:"Rozpocznij szkolenie"})]})]}):(0,i.jsx)("div",{className:"select-employee-prompt",children:"Wybierz pracownika z listy, aby zobaczy\u0107 dost\u0119pne szkolenia"})})]})]})};function jn(e){return gn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m8 4-6 6v10h12V10L8 4zm4 14H9v-3H7v3H4v-7.17l4-4 4 4V18zm-3-5H7v-2h2v2zm9 7V8.35L13.65 4h-2.83L16 9.18V20h2zm4 0V6.69L19.31 4h-2.83L20 7.52V20h2z"},child:[]}]})(e)}const kn=t=>{let{staffManagement:n,gameState:a,playerState:s}=t;const[r,o]=(0,e.useState)("scout"),[l,c]=(0,e.useState)("junior"),d={scout:2500,developer:3e3,lawyer:0,envSpecialist:0,lobbyist:5e3,lessor:5500},u={junior:1,mid:1.5,senior:2.2},h={lawyer:3e7,envSpecialist:25e6},p=[{type:"lessor",icon:(0,i.jsx)(jn,{}),name:"Dzier\u017cawca",description:"Pozyskuje grunty pod projekty",baseSalary:5500,requirements:{funds:5e3,minReputation:0}},{type:"developer",icon:"\ud83c\udfd7\ufe0f",name:"Developer",description:"Odpowiada za techniczny rozw\xf3j projekt\xf3w",baseSalary:3e3,requirements:{funds:3e3,minReputation:0}},{type:"lawyer",icon:"\u2696\ufe0f",name:"Prawnik",description:"Ekspert w prawie energetycznym i administracyjnym",baseSalary:0,requirements:{funds:0,minReputation:0}},{type:"envSpecialist",icon:"\ud83c\udf3f",name:"Specjalista ds. \u015brodowiska",description:"Ekspert w zakresie ocen oddzia\u0142ywania na \u015brodowisko",baseSalary:0,requirements:{funds:0,minReputation:0}},{type:"lobbyist",icon:"\ud83e\udd1d",name:"Lobbysta",description:"Buduje relacje z lokalnymi spo\u0142eczno\u015bciami i w\u0142adzami",baseSalary:5e3,requirements:{funds:5e3,minReputation:0}}],{monthlySalary:y,hireCost:g}=(()=>{const e=d[r],t=Math.floor(e*u[l]);return{monthlySalary:t,hireCost:"lawyer"===r||"envSpecialist"===r?h[r]:2*t}})(),v=s.cash>=g;return(0,i.jsxs)("div",{className:"employment-center",children:[(0,i.jsx)("h3",{children:"Centrum zatrudnienia"}),(0,i.jsx)("p",{className:"employment-description",children:"Zatrudnij nowych pracownik\xf3w do twojej firmy. Ka\u017cdy typ specjalisty ma unikalne umiej\u0119tno\u015bci, kt\xf3re przyspiesz\u0105 rozw\xf3j twoich projekt\xf3w."}),(0,i.jsxs)("div",{className:"employment-grid",children:[(0,i.jsxs)("div",{className:"employment-options",children:[(0,i.jsxs)("div",{className:"employment-section",children:[(0,i.jsx)("h4",{children:"Wybierz stanowisko"}),(0,i.jsx)("div",{className:"employment-types",children:p.map((e=>(0,i.jsxs)("button",{className:"emp-type-btn "+(r===e.type?"active":""),onClick:()=>o(e.type),children:[(0,i.jsx)("div",{className:"emp-type-icon",children:e.icon}),(0,i.jsx)("div",{className:"emp-type-name",children:e.name})]},e.type)))})]}),(0,i.jsxs)("div",{className:"employment-section",children:[(0,i.jsx)("h4",{children:"Wybierz poziom do\u015bwiadczenia"}),(0,i.jsxs)("div",{className:"employment-levels",children:[(0,i.jsxs)("button",{className:"emp-level-btn "+("junior"===l?"active":""),onClick:()=>c("junior"),children:[(0,i.jsx)("div",{className:"emp-level-name",children:"Pocz\u0105tkuj\u0105cy"}),(0,i.jsx)("div",{className:"emp-level-desc",children:"Ni\u017cszy koszt, mniejsze umiej\u0119tno\u015bci (1-3)"})]}),(0,i.jsxs)("button",{className:"emp-level-btn "+("mid"===l?"active":""),onClick:()=>c("mid"),children:[(0,i.jsx)("div",{className:"emp-level-name",children:"Do\u015bwiadczony"}),(0,i.jsx)("div",{className:"emp-level-desc",children:"\u015aredni koszt, przyzwoite umiej\u0119tno\u015bci (4-7)"})]}),(0,i.jsxs)("button",{className:"emp-level-btn "+("senior"===l?"active":""),onClick:()=>c("senior"),children:[(0,i.jsx)("div",{className:"emp-level-name",children:"Ekspert"}),(0,i.jsx)("div",{className:"emp-level-desc",children:"Wy\u017cszy koszt, wysokie umiej\u0119tno\u015bci (7-10)"})]})]})]})]}),(0,i.jsxs)("div",{className:"employment-summary",children:[(0,i.jsx)("div",{className:"employment-summary-header",children:(0,i.jsx)("h4",{children:"Podsumowanie zatrudnienia"})}),(0,i.jsxs)("div",{className:"employment-summary-content",children:[(0,i.jsxs)("div",{className:"summary-item",children:[(0,i.jsx)("div",{className:"summary-label",children:"Stanowisko:"}),(0,i.jsx)("div",{className:"summary-value",children:m(r)})]}),(0,i.jsxs)("div",{className:"summary-item",children:[(0,i.jsx)("div",{className:"summary-label",children:"Poziom:"}),(0,i.jsx)("div",{className:"summary-value",children:f(l)})]}),"lawyer"!==r&&"envSpecialist"!==r&&(0,i.jsxs)("div",{className:"summary-item",children:[(0,i.jsx)("div",{className:"summary-label",children:"Miesi\u0119czne wynagrodzenie:"}),(0,i.jsxs)("div",{className:"summary-value",children:[y.toLocaleString()," PLN"]})]}),(0,i.jsxs)("div",{className:"summary-item",children:[(0,i.jsx)("div",{className:"summary-label",children:"Koszt zatrudnienia:"}),(0,i.jsxs)("div",{className:"summary-value",children:[g.toLocaleString()," PLN"]})]}),(0,i.jsxs)("div",{className:"summary-item",children:[(0,i.jsx)("div",{className:"summary-label",children:"Dost\u0119pne \u015brodki:"}),(0,i.jsxs)("div",{className:"summary-value",children:[s.cash.toLocaleString()," PLN"]})]}),(0,i.jsxs)("div",{className:"summary-description",children:["lessor"===r&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Dzier\u017cawca"})," - Pozyskuje grunty pod projekty OZE, negocjuje z w\u0142a\u015bcicielami dzia\u0142ek."]}),(0,i.jsx)("p",{children:"\u2022 Zwi\u0119ksza ilo\u015b\u0107 grunt\xf3w gotowych do developmentu"}),(0,i.jsx)("p",{children:"\u2022 Zdobywa do\u015bwiadczenie w pozyskiwaniu grunt\xf3w"})]}),"developer"===r&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Developer"})," - Odpowiada za techniczny rozw\xf3j projekt\xf3w OZE."]}),(0,i.jsx)("p",{children:"\u2022 Przyspiesza rozw\xf3j projekt\xf3w"}),(0,i.jsx)("p",{children:"\u2022 Zdobywa do\u015bwiadczenie w okre\u015blonych technologiach"})]}),"lawyer"===r&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Prawnik"})," - Ekspert w prawie energetycznym i administracyjnym."]}),(0,i.jsx)("p",{children:"\u2022 Przyspiesza uzyskiwanie pozwole\u0144 i decyzji"}),(0,i.jsx)("p",{children:"\u2022 Zmniejsza ryzyko problem\xf3w prawnych"})]}),"envSpecialist"===r&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Specjalista ds. \u015brodowiska"})," - Ekspert w zakresie ocen oddzia\u0142ywania na \u015brodowisko."]}),(0,i.jsx)("p",{children:"\u2022 Przyspiesza uzyskiwanie pozwole\u0144 \u015brodowiskowych"}),(0,i.jsx)("p",{children:"\u2022 Zmniejsza ryzyko problem\xf3w z ochron\u0105 przyrody"})]}),"lobbyist"===r&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Lobbysta"})," - Buduje relacje z lokalnymi spo\u0142eczno\u015bciami i w\u0142adzami."]}),(0,i.jsx)("p",{children:"\u2022 Przyspiesza decyzje administracyjne"}),(0,i.jsx)("p",{children:"\u2022 Zmniejsza ryzyko protest\xf3w spo\u0142ecznych"})]})]}),(0,i.jsx)("button",{className:"hire-button",onClick:()=>{n.hireStaff(r,l)},disabled:!v,children:v?"Zatrudnij pracownika":"Niewystarczaj\u0105ce \u015brodki"})]})]})]})]})},zn=()=>{const{state:t}=l(),{state:n}=F(),a=nt(),[s,r]=(0,e.useState)("employees"),[o,c]=(0,e.useState)(null),[d,u]=(0,e.useState)(null),h=()=>{const e=[];return["lessors","developers","lawyers","envSpecialists","lobbyists"].forEach((n=>{t.staff[n]&&t.staff[n].forEach((t=>{e.push({...t,typePlural:n,typeShort:n.endsWith("s")?n.slice(0,-1):n})}))})),e};return(0,i.jsxs)("div",{className:"hr-system-container",children:[(0,i.jsxs)("div",{className:"hr-system-header",children:[(0,i.jsx)("h2",{children:"System zarz\u0105dzania zasobami ludzkimi"}),(0,i.jsxs)("div",{className:"hr-system-tabs",children:[(0,i.jsx)("button",{className:"employees"===s?"active":"",onClick:()=>r("employees"),children:"Pracownicy"}),(0,i.jsx)("button",{className:"training"===s?"active":"",onClick:()=>r("training"),children:"Szkolenia"}),(0,i.jsx)("button",{className:"upgrades"===s?"active":"",onClick:()=>r("upgrades"),children:"Ulepszenia firmy"}),(0,i.jsx)("button",{className:"employment"===s?"active":"",onClick:()=>r("employment"),children:"Zatrudnienie"})]})]}),(0,i.jsxs)("div",{className:"hr-system-content",children:["employees"===s&&(0,i.jsxs)("div",{className:"hr-employees-view",children:[(0,i.jsx)(rn,{employees:h(),onSelectEmployee:e=>{c(e),u(e.typeShort)},selectedEmployeeId:null===o||void 0===o?void 0:o.id}),o&&(0,i.jsx)(on,{employee:o,staffType:d,staffManagement:a,gameState:n})]}),"training"===s&&(0,i.jsx)(bn,{employees:h(),staffManagement:a,gameState:n}),"upgrades"===s&&(0,i.jsx)(_n,{playerState:t,gameState:n}),"employment"===s&&(0,i.jsx)(kn,{staffManagement:a,gameState:n,playerState:t})]})]})},Nn=()=>{const{state:e}=F();switch(e.currentScreen){case"map":default:return(0,i.jsx)(tt,{});case"company":return(0,i.jsx)($t,{});case"events":return(0,i.jsx)(Yt,{});case"competitors":return(0,i.jsx)(nn,{});case"market":return(0,i.jsx)(sn,{});case"hr":return(0,i.jsx)(zn,{})}};const Pn=function(){return(0,i.jsx)(se,{children:(0,i.jsx)(we,{children:(0,i.jsx)(Nn,{})})})};t.createRoot(document.getElementById("root")).render((0,i.jsx)(e.StrictMode,{children:(0,i.jsx)(Pn,{})}))})()})();